"use strict";(self.webpackChunk_snowflake_nu_ui=self.webpackChunk_snowflake_nu_ui||[]).push([["77429"],{751544:function(e,t,n){n.d(t,{_:()=>i,x:()=>f});var o=n(499924),r=n(868809),a=n(630455);function i(e,t,{serialize:n=JSON.stringify,deserialize:r=JSON.parse}={}){let[l,s]=o.useState(()=>{let n=window.localStorage.getItem(e);return null!==n?r(n):"function"==typeof t?t():t}),u=o.useRef(e);return[l,(0,a.z)(t=>{s(o=>{let r="function"==typeof t?t(o):t,a=u.current;return a!==e&&window.localStorage.removeItem(a),u.current=e,window.localStorage.setItem(e,n(r)),r})})]}function l(e,t){window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:t}))}let s=(e,t)=>{window.localStorage.setItem(e,t),l(e,t)},u=e=>{window.localStorage.removeItem(e),l(e,null)},d=e=>window.localStorage.getItem(e),c=e=>(window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)),E=()=>{throw Error("useLocalStorage is a client-only hook")};function f(e,t){let n=(0,r.useSyncExternalStore)(c,()=>d(e),E),a=(0,o.useMemo)(()=>{if(null===n)return null;try{return JSON.parse(n)}catch(e){return null}},[n]),i=(0,o.useMemo)(()=>null!=a,[a]),l=(0,o.useMemo)(()=>i?a:t,[i,t,a]),f=(0,o.useCallback)(()=>{u(e)},[e]),p=(0,o.useCallback)(t=>{try{null==t&&u(e);let n="function"==typeof t?t(l):t;null==n?u(e):s(e,JSON.stringify(n))}catch(e){console.warn(e)}},[e,l]);return{value:l,setValue:p,hasStoredValue:i,clear:f}}},730480:function(e,t,n){n.d(t,{ox:()=>r});var o,r=((o={}).AccountNameMissing="AccountNameMissing",o.ExchangeNotFound="ExchangeNotFound",o.ListingNameAlreadyExists="ListingNameAlreadyExists",o.ListingCannotDeletePublished="ListingCannotDeletePublished",o.ListingCannotMonetizePublished="ListingCannotMonetizePublished",o.ListingCannotUnmonetizePublished="ListingCannotUnmonetizePublished",o.ListingTitleCharacterLimitExceeded="ListingTitleCharacterLimitExceeded",o.ListingMissingProfile="ListingMissingProfile",o.ListingSubTitleCharacterLimitExceeded="ListingSubTitleCharacterLimitExceeded",o.ListingDescriptionCharacterLimitExceeded="ListingDescriptionCharacterLimitExceeded",o.ListingGlobalNameNotFound="ListingGlobalNameNotFound",o.ListingNoRegionsProvided="ListingNoRegionsProvided",o.ListingInvalidRegion="ListingInvalidRegion",o.ExampleValidationError="ExampleValidationError",o.ExampleValidationNoExamples="ExampleValidationNoExamples",o.ExampleValidationNoShare="ExampleValidationNoShare",o.MemberErrorAdding="MemberErrorAdding",o.MemberErrorUpdating="MemberErrorUpdating",o.ProviderProfileErrorUploadingImage="ProviderProfileErrorUploadingImage",o.ProviderProfileNotFound="ProviderProfileNotFound",o.ProviderProfileImageTooLarge="ProviderProfileImageTooLarge",o.ProviderProfileInUse="ProviderProfileInUse",o.ErrorBootstrap="ErrorBootstrap",o.ErrorValidatingEmail="ErrorValidatingEmail",o.SharingFailed="SharingFailed",o.SharingNotPermitted="SharingNotPermitted",o.CouldNotAccessListing="CouldNotAccessListing",o.NotSupportedSchema="NotSupportedSchema",o.ShareAlreadyAttachedToListing="ShareAlreadyAttachedToListing",o.NotFound="NotFound",o.BodyTooLarge="BodyTooLarge",o.FailedToParseJSON="FailedToParseJSON",o.FailedToRefreshAcceptanceDetails="FailedToRefreshAcceptanceDetails",o.InvalidRegionAllError="InvalidRegionAllError",o.FailedToParseBillingEntity="FailedToParseBillingEntity",o.SecurableNotFound="SecurableNotFound",o.DuplicateSecurablesFound="DuplicateSecurablesFound",o.UserLoggedOut="USER_LOGGED_OUT",o.NetPolicyFailed="NET_POLICY_FAILED",o.NotProvisioned="NOT_PROVISIONED",o.DxNotAdmin="DX_NOT_ADMIN",o.InvalidHeader="INVALID_HEADER",o.TrialSuspended="TRIAL_SUSPENDED",o.WrongCommand="WRONG_COMMAND",o.LoginFailed="LOGIN_FAILED",o.ResultsNotFound="RESULTS_NOT_FOUND",o.CountryCodeMissing="CountryCodeMissing",o.NoPurchasePrivilege="NoPurchasePrivilege",o.StripeKeyMissing="StripeKeyMissing",o.StripeKeyInvalid="StripeKeyInvalid",o.StripeIdMissing="StripeIdMissing",o.StripeError="StripeError",o.StripeInvalidCountryCode="StripeInvalidCountryCode",o.StripeErrorGettingPaymentMethod="StripeErrorGettingPaymentMethod",o)},713756:function(e,t,n){n.d(t,{b:()=>a,k:()=>r});var o=n(374318);function r(e){return e instanceof o.M}function a(e){let t=e;for(;t;){if(r(t))return t;t=t.cause}}},242051:function(e,t,n){n.d(t,{j:()=>I});var o=n(431815),r=n(750129),a=n(767557),i=n(117043),l=n(662839),s=n(613752),u=n(311636),d=n(438635),c=n(83980),E=n(844699),f=n(490066),p=n(396987),S=n(998269),g=n(783844),_=n(279098),h=n(323065);class m extends h.x{loadStores(e){if(this.dispatch){let{user:t,organization:n,securable:o}=e;!this.securablePromises&&o&&this.loadSecurableStore(o),!this.userStore&&t&&this.loadUserStore(t),this.initializeRolesAndWarehouse(t),!this.organizationStore&&n&&this.loadOrganizationStore(n)}}initializeRolesAndWarehouse(e){if(this.dispatch&&!this.userStore&&e){let n=e.isUiSpecifiedSnowflakeFeatureEnabled("UI_ENABLE_WAW_DEX_FEATURE_20");if(this.dataDiscoverRole)e.switchCurrentRole(this.dataDiscoverRole);else{var t;let o=(null==(t=e.currentRole)?void 0:t.call(e))||(0,f.d)(e.currentUser);this.setDataDiscoverRole(o,n)}if(!this.currentWarehouse&&e.currentUser){let{settings:t}=e.currentUser;this.setCurrentWarehouse(null==t?void 0:t.defaultWarehouse,n)}}}get exchangeId(){return(0,p.H)()}get organizationName(){return this.organizationStore.activeOrg.settings.snowflakeOrgName}get isHealthCheckEnabled(){return this.userStore.dxHealthCheckEnabled}get hasSuperAccountAdminRole(){return(0,l.i)(this.availableRoles)}get isCurrentRoleSuperAccountAdmin(){return(0,d.h)(this.dataDiscoverRole)}get hasSuperOrgAdminRole(){return(0,s.j)(this.availableRoles)}get isCurrentRoleSuperOrgAdmin(){return(0,c.l)(this.dataDiscoverRole)}get hasSuperSecurityAdmin(){return(0,u.w)(this.availableRoles)}get isCurrentRoleSuperSecurityAdmin(){return(0,E.E)(this.dataDiscoverRole)}isCurrentUser(e){return this.userStore.isCurrentUser(e)}async validateSnowflakeURL(e){try{let t=await i.nufetch("/validate-snowflake-url?"+a.nZ({url:e}),this.userStore.userRequestContext(),void 0,void 0,!1);if(!t.valid)return{valid:!1};if(!e.toLowerCase().includes(".snowflakecomputing.com"))return console.error("account must include full url"),{valid:!1};return t}catch(e){return console.error("Validate snowflake url failed with err",e),{valid:!1}}}async validateAccountIdentifier(e,t,n){try{let o=await i.nufetch("/validate-snowflake-account-region?"+a.nZ({region:e.toUpperCase(),account:t.toUpperCase(),isSecondaryAccount:n}),this.userStore.userRequestContext());if(!o.valid)return{valid:!1};return o}catch(e){return console.error("Validate snowflake account region failed with err",e),{valid:!1}}}async fetchAccountDeploymentInfo(e,t){try{let n=await i.nufetch("/fetch-account-deployment-info?"+a.nZ({org:e.toUpperCase(),accountAlias:t.toUpperCase()}),this.userStore.userRequestContext());if(!n.valid)return{valid:!1};return{...n,org:n.org.toUpperCase(),accountAlias:n.accountAlias.toUpperCase()}}catch(e){return console.error("Fetch account deployment info failed with err",e),{valid:!1}}}async fetchAccountDeploymentInfoFromURL(e){try{let t=await i.nufetch("/fetch-account-deployment-info-from-url?"+a.nZ({url:e}),this.userStore.userRequestContext());if(!t.valid)return{valid:!1};return{...t,org:t.org.toUpperCase(),accountAlias:t.accountAlias.toUpperCase()}}catch(e){return console.error("Fetch account deployment info from url failed with err",e),{valid:!1}}}getCurrentRegion(){return this.organizationStore.activeOrg.settings.region}constructor(...e){super(...e),this.dataDiscoverRole="",this.secondaryRoles="",this.availableRoles=[],this.currentWarehouse="",this.googleTagManagerInitialized=!1,this.dataDiscoverRoleInitializedResolver=e=>{},this.dataDiscoverRoleInitialized=new Promise(e=>{this.dataDiscoverRoleInitializedResolver=e}),this.loadUserStore=e=>{var t;null==(t=this.dispatch)||t.call(this,t=>{t.userStore=e})},this.loadOrganizationStore=e=>{var t;null==(t=this.dispatch)||t.call(this,t=>{t.organizationStore=e})},this.loadSecurableStore=e=>{var t;null==(t=this.dispatch)||t.call(this,t=>{t.securablePromises=e})},this.validateRoleWarehousePair=(e=!0)=>{var t;null==(t=this.dispatch)||t.call(this,t=>{if(""===t.currentWarehouse||!t.securablePromises)return;let n=t.roleWarehouseValidationKey=new Promise((o,r)=>{var a;null==(a=t.securablePromises)||a.list(t.dataDiscoverRole,g.M.WAREHOUSE,S.Y.show,void 0,{forceRefresh:e,filter:t.currentWarehouse}).then(e=>{var t;null==(t=this.dispatch)||t.call(this,t=>{t.roleWarehouseValidationKey===n&&(e.result.map(e=>e.name).includes(t.currentWarehouse)||(t.currentWarehouse="",o(!1)),o(!0))})},e=>{var t;null==(t=this.dispatch)||t.call(this,t=>{t.roleWarehouseValidationKey===n&&(t.currentWarehouse="",r(e))})})})})},this.setDataDiscoverRole=(e,t=!1)=>{var n;null==(n=this.dispatch)||n.call(this,t=>{var n,o,r,a,i;t.dataDiscoverRole=e,null==(o=t.userStore)||null==(n=o.switchCurrentRole)||n.call(o,e),t.currentWarehouse||(t.currentWarehouse=null==(i=t.userStore)||null==(a=i.currentUser)||null==(r=a.settings)?void 0:r.defaultWarehouse)}),t||this.validateRoleWarehousePair(!1),this.dataDiscoverRoleInitializedResolver(e);try{let t=(0,o._)();o._.set({...t,role:e})}catch(e){r.log.error(e)}},this.setSecondaryRoles=(e,t=!1)=>{var n;null==(n=this.dispatch)||n.call(this,t=>{var n,o;t.secondaryRoles=e,null==(o=t.userStore)||null==(n=o.switchCurrentSecondaryRoles)||n.call(o,e)}),t||this.validateRoleWarehousePair(!1)},this.setAvailableRoles=e=>{var t;null==(t=this.dispatch)||t.call(this,t=>{t.availableRoles=e})},this.setStripeHealthCheckStatus=e=>{var t;null==(t=this.dispatch)||t.call(this,t=>{t.stripeHealthCheckComplete=e})},this.setCurrentWarehouse=(e,t=!1)=>{var n;null==(n=this.dispatch)||n.call(this,t=>{t.currentWarehouse=e}),t||this.validateRoleWarehousePair(!1);try{let t=(0,o._)();o._.set({...t,warehouse:e})}catch(e){r.log.error(e)}},this.setMarketplaceLunrIdx=(e,t)=>{var n;null==(n=this.dispatch)||n.call(this,n=>{n.marketplaceLunrIdx={...n.marketplaceLunrIdx,idx:e,lastLoadTime:t}})},this.setMarketplaceLunrPromise=(e,t)=>{var n;null==(n=this.dispatch)||n.call(this,n=>{n.marketplaceLunrIdx={...n.marketplaceLunrIdx,promise:e,lastLoadTime:t}})},this.setProviderMarketplaceLunrIdx=(e,t)=>{var n;null==(n=this.dispatch)||n.call(this,n=>{n.providerMarketplaceLunrIdx={...n.providerMarketplaceLunrIdx,idx:e,lastLoadTime:t}})},this.setProviderMarketplaceLunrPromise=(e,t)=>{var n;null==(n=this.dispatch)||n.call(this,n=>{n.providerMarketplaceLunrIdx={...n.providerMarketplaceLunrIdx,promise:e,lastLoadTime:t}})},this.setGoogleTagManagerInitialized=e=>{var t;null==(t=this.dispatch)||t.call(this,t=>{t.googleTagManagerInitialized=e})},this.setAccountCreatedDetails=e=>{var t;null==(t=this.dispatch)||t.call(this,t=>{t.accountCreatedDetails=e})}}}let I=(0,_.q)(()=>(0,h.A)(m))},279098:function(e,t,n){n.d(t,{q:()=>r});var o=n(237257);function r(e,...t){let[n,a]=(0,o.Z)(e,...t);return Object.defineProperties(a,{Provider:{get:()=>n}}),a}},323065:function(e,t,n){n.d(t,{A:()=>l,x:()=>i});var o,r=n(499269),a=n(499924);class i{constructor(e){this.dispatch=e,this[o]=!0}}function l(e){let t=new e,[n,o]=(0,a.useReducer)(function(e,t){return(0,r.Uy)(e,t)},t);return(0,a.useEffect)(()=>o(()=>new e(o)),[e]),n}o=r.sc},545842:function(e,t,n){n.d(t,{Z:()=>i,p:()=>a});var o=n(237257),r=n(494743);let[a,i]=(0,o.Z)(()=>(0,r.T)())},475165:function(e,t,n){n.d(t,{O:()=>o});function o(e,t){let{getCacheKey:n,getData:o}=t,r=e?n():void 0,a=e&&r?e.getEntry(r):void 0;if(a)return a;let i=o();return e&&r&&e.setEntry(r,i),i}},755388:function(e,t,n){n.d(t,{m:()=>a});var o=n(499924),r=n(545842);function a(e){let{getFetchId:t,incrementFetchId:n}=(0,r.Z)();return{fetchId:t(e),updateFetchId:(0,o.useCallback)(()=>n(e),[n,e])}}},433915:function(e,t,n){n.d(t,{b:()=>r});var o=n(499924);function r(){let e=(0,o.useRef)({entries:{},currentEvictionBucketIndex:0,evictionBuckets:Array.from({length:6},()=>[])}),t=(0,o.useCallback)(t=>{var n;let{entries:o}=e.current;return null==(n=o[t])?void 0:n.data},[]),n=(0,o.useCallback)((t,n)=>{let{entries:o,currentEvictionBucketIndex:r,evictionBuckets:a}=e.current;o[t]={data:n,evictionBucketIndex:r},a[r].push(t)},[]),r=(0,o.useCallback)(t=>{let{entries:n}=e.current;delete n[t]},[]);return(0,o.useEffect)(()=>{let t=setInterval(()=>{let{entries:t,currentEvictionBucketIndex:n,evictionBuckets:o}=e.current,r=(n+1)%o.length;for(let e of o[r]){var a;(null==(a=t[e])?void 0:a.evictionBucketIndex)===r&&delete t[e]}o[r]=[],e.current.currentEvictionBucketIndex=r},6e4);return()=>{clearInterval(t)}},[]),(0,o.useMemo)(()=>({getEntry:t,setEntry:n,clearEntry:r}),[r,t,n])}},494743:function(e,t,n){n.d(t,{T:()=>r});var o=n(499924);function r(){let[e,t]=(0,o.useState)({});return{getFetchId:(0,o.useCallback)(t=>`${e[t]||1}`,[e]),incrementFetchId:(0,o.useCallback)(e=>{t(t=>({...t,[e]:(t[e]||1)+1}))},[])}}},896426:function(e,t,n){n.d(t,{H$:()=>i,OY:()=>l,Oi:()=>a,bR:()=>u,x3:()=>s});var o=n(467131);let r=(e,...t)=>`${e}${t?":":""}${null==t?void 0:t.join(":")}`,a=e=>{var t,n;let o=e.isUserE2E?[...null!=(t=e.markers)?t:[],"user-e2e"]:[...null!=(n=e.markers)?n:[]];return r(e.event,...o)},i=(e,...t)=>{let n=a({event:e,markers:t});return performance.clearMarks(n),performance.mark(n)},l=(e,...t)=>{let n=a({event:e,markers:t,isUserE2E:!0});return performance.clearMarks(n),performance.mark(n)},s=e=>{let t=a(e),n=performance.getEntriesByName(t);return!!(n&&n.length>0&&n.filter(e=>"mark"===e.entryType).length>0)},u=(e,...t)=>{let n=t.join(":");try{return performance.measure(e,n)}catch(e){return o.cM.info("[TELEMETRY] measureEvent: Event start was not marked for the marker: ",n),{duration:-1}}}},979991:function(e,t,n){n.d(t,{z:()=>s});var o=n(307134),r=n(51723),a=n(499924),i=n(362779),l=n(896426);let s=()=>{let{logEvent:e}=(0,r.useTelemetry)(),t=(0,a.useCallback)((e,...t)=>l.H$(e,...t),[]),n=(0,a.useCallback)((e,...t)=>l.bR(e,...t),[]),s=(0,a.useCallback)((e,...t)=>l.OY(e,...t),[]),u=(0,a.useCallback)(e=>l.x3(e),[]),d=(0,a.useCallback)(e=>{let t;if(e.isUserE2E){let o=l.Oi(e);t=n(e.event,o).duration}let o=l.Oi({...e,isUserE2E:!1});return{durationMs:n(e.event,o).duration,e2eDurationMs:t}},[n]);return{markEventStart:t,measureEventDuration:n,markE2EEventStart:s,isMarkerSet:u,_getDurationsFromMarker:d,logEventToSnowflakeAndDatadog:(0,a.useCallback)(t=>{e(t),i.A.isDisallowedDatadogEvent(t)&&o.v.addAction(t.event,t.data)},[e])}}},437239:function(e,t,n){n.d(t,{k:()=>a});var o=n(307134),r=n(616821);function a(e,t){(0,r.WC)()&&console.error(e,t),o.v.addError(e,t)}},221009:function(e,t,n){n.d(t,{EQ:()=>l,I1:()=>i});var o=n(184168),r=n(499924);let a=r.createContext(void 0),i=()=>(0,r.useContext)(a),l=({configToml:e,children:t})=>(0,o.jsx)(a.Provider,{value:e,children:t});l.displayName="ConfigTomlProvider"},375756:function(e,t,n){n.d(t,{S:()=>o});let o="SYSTEM$BASIC_RUNTIME"},369859:function(e,t,n){n.d(t,{R:()=>r});var o=n(750671);function r(e,t){let n=e.lastVersionLocationUri,r=e.liveVersionLocationUri,a=e.rootLocation;return!t&&r?{kind:"versioned",isLive:!0,rootLocation:r}:n?{kind:"versioned",isLive:!1,rootLocation:n}:{kind:"checkouts",rootLocation:(0,o.h)(a,"Invalid or unsupported location")}}},463462:function(e,t,n){n.d(t,{T:()=>r});var o=n(90911);function r(e){if((0,o.f)(e)){let[t,n]=e.split("/versions/");if((null==n?void 0:n.length)>0)return{stage:t,path:`/versions/${n}`};let o="/checkouts/",[r,a]=e.split(o);if((null==a?void 0:a.length)>0)return{stage:r,path:`${o}${a}`};let i="/commits/",[l,s]=e.split(i);return(null==s?void 0:s.length)>0?{stage:l,path:`${i}${s}`}:{stage:e,path:""}}let t=/^(@?(?:[^/"]*|"(?:[^"]|"")*")*)\/?(.*)/u.exec(e);return t?{stage:t[1].startsWith("@")?t[1]:`@${t[1]}`,path:t[2]}:{stage:e,path:""}}},916914:function(e,t,n){n.d(t,{Y:()=>a});var o=n(527565),r=n(375756);function a(e){return e===o.U?"WarehouseOnly":e===r.S?"SpcsOnly":void 0}},90911:function(e,t,n){n.d(t,{f:()=>o});function o(e){return e.startsWith("snow://")}},583135:function(e,t,n){n.d(t,{A:()=>i});var o=n(499924),r=n(23917),a=n(254759);function i(){let{user:e}=(0,a.m)(["user"]),t="alter-entity-checkout";return(0,o.useCallback)(async({id:n,role:o,secondaryRoles:a})=>{let i=(0,r.BW)(n);return await e.api.query(i,{isInternal:!0,role:o,secondaryRoles:a,desc:t})},[e.api,t])}},735736:function(e,t,n){n.d(t,{U:()=>u});var o=n(499924),r=n(778098),a=n(320241),i=n(646397),l=n(998269),s=n(832072);function u(){let e=(0,o.useContext)(a.V1),{formatMessage:t}=(0,r.Z)();return(0,o.useCallback)(async(n,o,r)=>{let a=await (0,i.W)(e.get(o,n,l.Y.describe,{secondaryRoles:r}));if((0,s.D)(a)){var u;throw Error(t({id:"Could not get details for the object. Error: {message}"},{message:null==(u=a.error)?void 0:u.message}))}if(!a.result)throw Error(t({id:"Could not get details for the object. No result data."}));let d=a.result.columns[0];return d.rootLocation&&!d.lastVersionName?{kind:"checkouts",...d}:{kind:"versioned",...d}},[t,e])}},613159:function(e,t,n){n.d(t,{z:()=>m});var o=n(485387),r=n.n(o),a=n(499924),i=n(242051),l=n(537840),s=n(320241),u=n(998269),d=n(783844),c=n(690908),E=n(67158),f=n(11043),p=n(94587),S=n(254759),g=n(369859),_=n(583135),h=n(731694);let m=e=>{let{dataDiscoverRole:t,secondaryRoles:n,userStore:o}=(0,i.j)(),m=(0,s.fo)(t,{secondaryRoles:n}),I=(0,a.useContext)(s.V1),T=(0,S.m)(["query"]).query,R=(0,a.useMemo)(()=>{var t;let n=m.get(e,u.Y.describe).result;return(null==n||null==(t=n.columns)?void 0:t.length)?n.columns[0]:null},[e,m]),v=(0,_.A)(),C=(0,h.iA)(),y=null!==R,N=(0,a.useCallback)(()=>R?`Copy of ${R.name} ${r()().format("YYYY-MM-DD h:mm:ssa")}`:"",[R]),A=(0,a.useCallback)(async(e,r)=>{let a=new c.L(r?"ALTER SESSION SET ENABLE_COPY_FILES = TRUE, ENABLE_COPY_FILES_API_IN_STORAGE = TRUE":"ALTER SESSION UNSET ENABLE_COPY_FILES, ENABLE_COPY_FILES_API_IN_STORAGE");await o.api.query(a.toQuery(),{isInternal:!0,role:t,secondaryRoles:n,desc:r?"enable-copy-files-sql":"unset-copy-files-sql",pid:e})},[t,n,o.api]),b=(0,a.useCallback)(async(e,r)=>{var a;let i=new c.L("COPY FILES");i.add("INTO {}",(0,f.Q)(r)),i.add("FROM {}",(0,p.i)(null!=(a=null==R?void 0:R.rootLocation)?a:"")),await o.api.query(i.toQuery(),{isInternal:!0,role:t,secondaryRoles:n,desc:"copy-files-for-entity-clone",pid:e})},[t,n,null==R?void 0:R.rootLocation,o.api]),O=(0,a.useCallback)(async({newEntityName:o,newEntityTitle:r,useEmbeddedStage:a,shouldUseVersionedStage:i=!0,postCreationAction:s,getAdditionalProps:u})=>{var c;if(!y)throw Error("Duplication not ready yet.");let{mainFile:f,queryWarehouse:p,codeWarehouse:S}=R,_=(0,l.$3)(f),{type:h,database:m,schema:O,name:L}=e,k=null!=o?o:N(),M=`Duplicated from ${L}`,w={type:h,name:k,database:m,schema:O},{rootLocation:D}=(0,g.R)(R),U=D.endsWith("/")?D:`${D}/`,P=null,x=null!=(c=null==u?void 0:u(R))?c:{};if(a||i)return P=await I.create(t,w,{from:U,warehouse:S,queryWarehouse:p,title:null!=r?r:void 0,mainFile:_,comment:M,...x},{secondaryRoles:n}),i?await C({id:P,role:t,secondaryRoles:n}):await v({id:P,role:t,secondaryRoles:n}),s&&await s({newEntityFullIdentifier:P}),P;let B={type:d.M.STAGE,name:`${o} (Stage)`,database:m,schema:O},F=await I.create(t,B,{},{secondaryRoles:n});try{P=await I.create(t,w,{rootLocation:`@${(0,E.m)(F)}`,mainFile:_,warehouse:S,queryWarehouse:p,title:null!=r?r:"",comment:M,...x},{secondaryRoles:n})}catch(e){throw await I.drop(t,F,{secondaryRoles:n}),e}let G="";try{G=await T.createQuery(),await A(G,!0),await b(G,F)}catch(e){throw await I.drop(t,P,{secondaryRoles:n}),await I.drop(t,F,{secondaryRoles:n}),e}finally{G.length>0&&await T.deleteQuery(G)}return s&&await s({newEntityFullIdentifier:P,newEntityStageIdentifier:F}),P},[A,b,v,t,C,N,T,y,n,I,R,e]);return{sourceEntityDetails:R,duplicate:O,readyForDuplication:y}}},114613:function(e,t,n){n.d(t,{h:()=>u});var o=n(499924),r=n(320241),a=n(380621),i=n(998269),l=n(583135),s=n(919270);let u=()=>{let e=(0,s.Q)(),t=(0,l.A)(),n=(0,o.useContext)(r.V1);return(0,o.useCallback)(async({id:o,role:r,secondaryRoles:l})=>{0===(await e({id:o,role:r,secondaryRoles:l})).rows.length&&(await t({id:o,role:r,secondaryRoles:l}),await (0,a.r)(n.get(r,o,i.Y.describe,{forceRefresh:!0,secondaryRoles:l})))},[e,t,n])}},731694:function(e,t,n){n.d(t,{LH:()=>c,iA:()=>E});var o=n(499924),r=n(778098),a=n(982055),i=n(713756),l=n(320241),s=n(646397),u=n(998269),d=n(832072);async function c(e,t,n,o){try{await e.alter(n,t,{add:!0,version:"live"},{secondaryRoles:o})}catch(e){var r,l;if((0,i.k)(e)&&(r=e.code,l=a.SFDBErrorCode.VSTAGE_LIVE_VERSION_EXISTS,void 0!==r&&void 0!==l&&f(r)===f(l)))return;throw e}}let E=()=>{let e=(0,o.useContext)(l.V1),{formatMessage:t}=(0,r.Z)();return(0,o.useCallback)(async({id:n,role:o,secondaryRoles:r})=>{await c(e,n,o,r);let a=await (0,s.W)(e.get(o,n,u.Y.describe,{secondaryRoles:r}));if((0,d.D)(a)){var i;throw Error(t({id:"Could not get details for the object. Error: {message}"},{message:null==(i=a.error)?void 0:i.message}))}if(!a.result)throw Error(t({id:"Could not get details for the object. No result data."}));return a.result.columns[0]},[t,e])};function f(e){return"number"==typeof e?e:parseInt(e,10)}},446013:function(e,t,n){n.d(t,{P:()=>i,X:()=>a});var o=n(499924);let r=(0,o.createContext)(null),a=r.Provider,i=()=>(0,o.useContext)(r)},810339:function(e,t,n){n.d(t,{Z:()=>s});var o=n(320241),r=n(527565),a=n(998269),i=n(3291),l=n(427674);function s(e){var t;let n=(0,o.fo)();if((0,l.$)())return!1;let s=n.get(e,a.Y.describe);if((0,i.M)(s))return null;let u=null==s||null==(t=s.result)?void 0:t.columns[0];return!!(null==u?void 0:u.runtimeName)&&u.runtimeName!==r.U}},427674:function(e,t,n){n.d(t,{$:()=>l,S:()=>i});var o=n(184168),r=n(499924);let a=(0,r.createContext)(!1),i=({children:e})=>(0,o.jsx)(a.Provider,{value:!0,children:e});i.displayName="StaticNotebookProvider";let l=()=>(0,r.useContext)(a)},985455:function(e,t,n){n.d(t,{a:()=>i});var o=n(649683),r=n(499924);let a={},i=({epochName:e,callbackFreqMs:t,shouldCleanUpDangledTicker:n=!0})=>{let i=`${e}//${t}`,[l,s]=r.useState(0),u=r.useRef(n);u.current=n;let d=(0,o.t)(),c=r.useCallback(()=>{a[i]&&(a[i].startTimeMs=Date.now()),d.current&&s(0)},[i,d]),E=r.useCallback(()=>{delete a[i],d.current&&s(0)},[i,d]);return r.useEffect(()=>{if(null===t)return;a[i]||(a[i]={startTimeMs:Date.now(),callbacks:new Set,intervalId:void 0});let e=()=>s(Date.now()-a[i].startTimeMs);return e(),a[i].callbacks.add(e),a[i].intervalId||(a[i].intervalId=setInterval(()=>{a[i].callbacks.forEach(e=>e())},t)),()=>{a[i].callbacks.delete(e),0===a[i].callbacks.size&&(clearInterval(a[i].intervalId),u.current?E():a[i].intervalId=void 0)}},[t,E,i,d]),{elapsedTimeMs:l,reset:c}}},919270:function(e,t,n){n.d(t,{Q:()=>i});var o=n(499924),r=n(23917),a=n(254759);function i(){let{user:e}=(0,a.m)(["user"]),t="show-checkouts";return(0,o.useCallback)(async({id:n,role:o,secondaryRoles:a})=>{let i=(0,r.CG)(n);return await e.api.query(i,{isInternal:!0,role:o,secondaryRoles:a,desc:t})},[e.api,t])}},562922:function(e,t,n){n.d(t,{_:()=>r});var o=n(642261);class r{actOnItems(){this.action(this.queue.splice(0,this.queue.length))}enqueueItem(e){this.queue.push(e),-1!==this.maxQueueSize&&this.queue.length>=this.maxQueueSize&&this.actOnItems(),this.throttledAction()}flush(){this.throttledAction.flush()}get length(){return this.queue.length}constructor(e,t,n=-1){this.queue=[],this.action=e,this.throttledAction=(0,o.P)(this.actOnItems.bind(this),t,{leading:!1}),this.maxQueueSize=n}}},102078:function(e,t,n){n.d(t,{r:()=>o});function o(e){for(let t of e)return!1;return!0}},537840:function(e,t,n){function o(e,t="/"){return e.startsWith(t)?e.substring(1):e}function r(e,t="/"){return e.startsWith(t)?e:`${t}${e}`}function a(e,t="/"){return e.endsWith(t)?e:`${e}${t}`}function i(e,t="/"){return e.endsWith(t)?e.substring(0,e.length-1):e}function l(e,t="/"){let n=e.lastIndexOf(t);return -1===n?"":e.slice(0,n)}function s(e,t){let n=a(o(t));return 0!==e.indexOf(n)?e:e.slice(n.length)}n.d(t,{$3:()=>o,FR:()=>i,X7:()=>l,kN:()=>a,mJ:()=>r,sR:()=>s})},313554:function(e,t,n){n.d(t,{Q:()=>r});let o={undefined:()=>0,boolean:()=>4,number:()=>8,string:e=>2*e.length,bigint:e=>r(e.toString()),function:e=>r(e.toString()),symbol:e=>r(e.toString()),object:e=>e?e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?e.byteLength:Object.entries(e).reduce((e,[t,n])=>r(t)+r(n)+e,0):0};function r(e){return o[typeof e](e)}},461376:function(e,t,n){function o(e){return"function"==typeof e?e():e}function r(e,t){return o(e)?t:{}}function a(e,...t){return o(e)?t:[]}n.d(t,{V:()=>r,p:()=>a})},490066:function(e,t,n){n.d(t,{d:()=>r});var o=n(54649);function r(e,t){var n,r;if(t)return t;let a=null==e||null==(n=e.settings)?void 0:n.defaultRole;return a&&(null==e||null==(r=e.availableRoles)?void 0:r.includes(a))?a:o.PUBLIC_ROLE}},243181:function(e,t,n){n.d(t,{Bg:()=>I,HS:()=>T,N0:()=>_,Qe:()=>m,RL:()=>R,Te:()=>g,Zl:()=>S,aZ:()=>C,eO:()=>p,mj:()=>v,wZ:()=>f,zd:()=>h});var o=n(616821),r=n(144306),a=n(783844),i=n(690908),l=n(67158),s=n(776983),u=n(988209),d=n(868646),c=n(94587),E=n(244983);let f=(e,t)=>({isInternal:!0,role:e,secondaryRoles:t,desc:"generate-notebook-url"});function p(e){return e.isPrivatelinkEnabled?new i.L().add("CALL SYSTEM$GENERATE_NOTEBOOK_URL_FROM_NAME({} , {} );",(0,c.i)((0,l.m)(e.fullNotebookIdentifier)),(0,u.S)(e.isAccountUsingPrivateLink)).toQuery():new i.L().add("CALL SYSTEM$GENERATE_NOTEBOOK_URL_FROM_NAME({});",(0,c.i)((0,l.m)(e.fullNotebookIdentifier))).toQuery()}function S({fullNotebookIdentifier:e,queryId:t}){return t?new i.L().add("CALL SYSTEM$GENERATE_READ_ONLY_NOTEBOOK_TOKEN_WITH_REPLAY_QUERY_ID({}, {});",(0,c.i)((0,l.m)(e)),(0,c.i)(t)).toQuery():new i.L().add("CALL SYSTEM$GENERATE_NOTEBOOK_TOKEN({});",(0,c.i)((0,l.m)(e))).toQuery()}function g(e){let t=new URL(e);return{baseUriParts:{host:t.hostname,port:""===t.port?443:Number(t.port),basePath:(0,o.WC)()?t.pathname.split("/").filter(e=>"bootstrap"!==e).join("/"):t.pathname},isHttps:"https:"===t.protocol}}function _(e){return e&&`${e.isHttps?"https":"http"}://${e.baseUriParts.host}:${e.baseUriParts.port}${e.baseUriParts.basePath}`}function h({fullNotebookIdentifier:e,queryId:t}){return new i.L().add("CALL SYSTEM$GET_NOTEBOOK_EXECUTION_MAIN_FILE({}, {});",(0,c.i)((0,l.m)(e)),(0,c.i)(t)).toQuery()}function m({database:e,schema:t}){let n=e&&t?`${e}.${t}`:"",o=new i.L;return n?o.add("SELECT SYSTEM$SHOW_NOTEBOOK_COMPUTE_POOLS(?)",(0,c.i)(n)):o.add("SELECT SYSTEM$SHOW_NOTEBOOK_COMPUTE_POOLS()"),o.toQuery()}function I({notebookUrlId:e}){return new i.L().add("CALL SYSTEM$GET_USER_PREFERENCE({}, {}, {});",(0,c.i)(a.M.NOTEBOOK),(0,c.i)(e),(0,c.i)("session_settings")).toQuery()}function T({notebookUrlId:e,sessionSettingsData:t}){return new i.L().add("CALL SYSTEM$SET_USER_PREFERENCE({}, {}, {}, {});",(0,c.i)(a.M.NOTEBOOK),(0,c.i)(e),(0,c.i)("session_settings"),(0,c.i)(t)).toQuery()}function R({fullNotebookIdentifier:e}){return new i.L().add("CALL SYSTEM$IS_ENTITY_READONLY_REPLICA({}, {});",(0,c.i)("NOTEBOOK"),(0,c.i)((0,l.m)(e))).toQuery()}function v({fullNotebookIdentifier:e}){return new i.L().add("CALL SYSTEM$NOTEBOOK_BOOTSTRAP({});",(0,c.i)((0,l.m)(e))).toQuery()}function C(e){let{entityId:t,scheduleName:n,scheduleCronExpression:o,scheduleTimezone:l,warehouse:u,params:f}=e,p=!!f,S=new i.L;if(S.add("CREATE TASK IDENTIFIER(?) WAREHOUSE={} SCHEDULE={}",(0,d.M)({type:a.M.TASK,name:n,database:t.database,schema:t.schema}),(0,c.i)(u),(0,c.i)(`USING CRON ${o} ${l||"UTC"}`)),p){let e=(0,r.J)([{id:0,key:"params",value:null!=f?f:""}]);S.add(`CONFIG=$$${e}$$ AS BEGIN LET PARAMS STRING := SYSTEM$GET_TASK_GRAPH_CONFIG('params')::string;`),S.add("EXECUTE {} {}(:PARAMS)",(0,E.V)(t.type),(0,d.M)(t))}else S.add("AS EXECUTE {} {}()",(0,E.V)(t.type),(0,d.M)(t));let{queryWarehouse:g,codeWarehouse:_,computePool:h,runtimeName:m,runtimeEnvironmentVersion:I,externalAccessIntegrations:T}=e;return S.add("QUERY_WAREHOUSE={}",(0,c.i)(g)),_&&S.add("WAREHOUSE={}",(0,c.i)(_)),h&&S.add("COMPUTE_POOL={}",(0,c.i)(h)),m&&S.add("RUNTIME_NAME={}",(0,c.i)(m)),I&&S.add("RUNTIME_ENVIRONMENT_VERSION={}",(0,c.i)(I)),(null==T?void 0:T.length)&&S.add("EXTERNAL_ACCESS_INTEGRATIONS=({})",(0,s.D)(T)),p?S.add("; END;"):S.add(";"),S.toQuery()}},601127:function(e,t,n){n.d(t,{l:()=>i});var o=n(701257),r=n(577197),a=n(564395);class i{getPath(){return this.path}goBackOrNavigate(e,t={},n=[]){let o=a.lm.entries;if(o.length>1)for(let e=o.length-2;e>=0;e--){if(this.matchesAgainstPath(o[e].pathname))return void a.lm.push(o[e].pathname+o[e].search);let t=!1;for(let r of n)if(r.matchesAgainstPath(o[e].pathname)){t=!0;break}if(!t)break}a.lm.push(this.getURL(e,t))}goBackWithDataOrNavigate(e,t={},n=[]){let o={...e};Object.entries(o).forEach(([e,t])=>{"string"==typeof t&&(o[e]=decodeURIComponent(t))});let r=a.lm.entries;if(r.length>1)for(let e=r.length-2;e>=0;e--){let t=!1;for(let o of[...n,this])if(o.matchesAgainstPath(r[e].pathname)){t=!0;break}if(t){if(this.getURL(o)===r[e].pathname)return void a.lm.push(r[e].pathname+r[e].search)}else break}a.lm.push(this.getURL(o,t))}getURL(e,t){return(0,r.m)(this.path,e,t)}navigate(e,t={}){a.lm.push(this.getURL(e,t))}replaceCurrentURL(e,t={}){a.lm.replace(this.getURL(e,t))}matchesAgainstPath(e){return"string"!=typeof(0,o.Yt)(this.path,e)}constructor(e){this.path=e.path,this.page=e.page,this.validLoggingRouteResolver=e.validLoggingRouteResolver}}},865386:function(e,t,n){n.d(t,{k:()=>a});var o=n(601127),r=n(785433);let a=new o.l({path:[`${(0,r.D)()}/notebooks/id/{notebookUniqueId:string}`,`${(0,r.D)()}/notebooks/{entityIdStr:string}`],page:"notebook_detail"})},849792:function(e,t,n){n.d(t,{a:()=>o});function o(e,t){let n;n=t instanceof URLSearchParams?Array.from(t.entries()):Object.entries(t);let o=e;if(n.length>0){let t=n.map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&");o=`${e}?${t}`}return o}},701257:function(e,t,n){n.d(t,{Mp:()=>s,Yt:()=>l});var o=n(351436),r=n.n(o),a=n(779694);function i(e,t){let n=[].concat(e);for(n=n.map(e=>(0,a.Q)(e)),t=(0,a.Q)(t);n.length;){let e=t.split("/").filter(e=>e.length),o=n.shift(),a=o||"",i=o.replace(/^\//,"").replace(/\/$/,"").split("/").filter(e=>e.length);if("*"!==i.at(-1)&&e.length!==i.length)continue;let l={},s=!1;for(;i.length;){let t=e.shift(),n=i.shift();if(n.startsWith("{")){let e=n.slice(1,-1),o=e.split(":");switch(o[1].replace(/<[^>]*>/,"")){case"number":l[o[0]]=+t;break;case"string":l[o[0]]=decodeURIComponent(t);break;case"exists":t===o[0]?l[o[0]]=!0:s=!0;break;case"enum":let i=o[1].match(/enum<([^>]+)>/);if(null==i?void 0:i[1].match(RegExp(`(^|\\|)${r()(t)}(\\||$)`))){l[o[0]]=t;let e=RegExp(`/{${String(o[0])}:enum<([^\\|}]+(?:\\|[^\\|}]+)+)>}(?:/|$)`);(null==a?void 0:a.match(e))&&(a=a.replace(e,`/${encodeURIComponent(r()(t))}/`))}else s=!0;break;default:let u=this.constructor.name;return{data:`Unknown data typing of "{${e}}" in ${u}.`,path:""}}}else if(t===n)continue;else if(n&&"*"!==n||0!==i.length){s=!0;break}else break}if(!s)return{data:l,path:a}}return{data:`There was a path mismatch for the URL at "${t}"`,path:""}}function l(e,t){return i(e,t).data}function s(e,t){return i(e,t).path}},785433:function(e,t,n){n.d(t,{D:()=>o});function o(){return"/{region:string}/{org:string}"}},207036:function(e,t,n){n.d(t,{s:()=>r});var o=n(564395);function r(e=o.lm.location.search){return new URLSearchParams(decodeURI(e))}},577197:function(e,t,n){n.d(t,{m:()=>a});var o=n(849792),r=n(785433);function a(e,t={},n={},i=!1){let l=[].concat(e),s="";for(l=l.map(e=>e.includes((0,r.D)())?e.replace((0,r.D)(),"/{region:string}/{org:string}/#"):e);l.length;){let e=!1,r=`/${l.shift().replace(/^\//,"")}`;for(let n in t){let o=t[n];if(null==o)continue;let a=RegExp(`/{${n}:string}(?:/|$)`),i=RegExp(`/{${n}:exists}(?:/|$)`),l=RegExp(`/{${n}:enum<([^\\|}]+(?:\\|[^\\|}]+)*)>}(?:/|$)`);if(r.match(a))r=r.replace(a,`/${encodeURIComponent(o)}/`);else if(r.match(i))r=r.replace(i,`/${encodeURIComponent(n)}/`);else if(r.match(l)&&r.match(l)[1].split("|").includes(o))r=r.replace(l,`/${encodeURIComponent(o)}/`);else{e=!0;break}}if(!r.match(/{/)){r=r.replace(/\/$/,"");let t=(0,o.a)(r,n);if(!e)return t.replace(/%25/g,"%2525");s=s||t;break}}if(s){let e=`Left over data when building URL "${s}". Supplied data: ${JSON.stringify(t)}`;if(i)throw Error(e);return console.error(e),encodeURI(s)}throw Error(`Invalid data supplied to "${e}". Supplied data: ${JSON.stringify(t)}`)}},396987:function(e,t,n){n.d(t,{H:()=>s});var o=n(54649),r=n(936546),a=n(564395);let i=["/:region/:org/data/marketplace","/marketplace","/:region/:org/data/provider-studio","/provider-studio","/:region/:org/data/shared/listing","/:region/:org/apps/listing"],l=["/:region/:org/data/manage/admin/:id?","/:region/:org/data/manage/provider/:id?","/:region/:org/data/manage/:id?","/:region/:org/data/shared/manage/:id?","/:region/:org/data/shared/provider/:id?","/:region/:org/data/shared/:id?","/:region/:org/admin/exchange/:id?","/:region/:org/data/","/:region/:org//"],s=()=>{var e;if(i.some(e=>(0,r.LX)({path:e,end:!1},a.lm.location.pathname)))return o.SnowflakePuDxName;let t=l.reduce((e,t)=>{var n;return(null==e||null==(n=e.params)?void 0:n.id)?e:(0,r.LX)({path:t,end:!1},a.lm.location.pathname)},null);return(null==t||null==(e=t.params)?void 0:e.id)&&decodeURI(t.params.id)}},779694:function(e,t,n){n.d(t,{Q:()=>o});function o(e){return e.includes("/#/")?e.replace("/#/","/"):e}},320241:function(e,t,n){n.d(t,{V1:()=>g,fo:()=>_});var o=n(500140),r=n(51723),a=n(710807),i=n.n(a),l=n(499924),s=n(242051),u=n(490066),d=n(596378),c=n(272515),E=n(641392),f=n(832072),p=n(3291),S=n(254759);let g=l.createContext(void 0);function _(e,t={}){let{secondaryRoles:n,sessionContext:o}=t,a=(0,l.useContext)(g),i=(0,l.useContext)(r.TelemetryPerformanceContext),d=(0,s.j)(),c=(0,l.useContext)(S.L),E=null==c?void 0:c.user,f=e||(null==E?void 0:E.currentRole())||(0,u.d)(null==E?void 0:E.currentUser),p=null!=n?n:d.secondaryRoles,[,m]=(0,l.useState)(0),I={};return(0,l.useEffect)(()=>{let e=Object.values(I).map(e=>e(()=>{m(e=>e+1)}));return()=>{for(let t of e)t()}}),new h(f,p,a,I,i,o)}class h{async create(e,t,n){return this.securableStore.create(this.role,e,t,{profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,...n})}async clone(e,t,n,o){return this.securableStore.clone(this.role,e,t,n,{profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,...o})}async alter(e,t,n){return this.securableStore.alter(this.role,e,t,{profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,...n})}async drop(e,t){return this.securableStore.drop(this.role,e,{profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,...t})}async undrop(e,t){return this.securableStore.undrop(this.role,e,{profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,...t})}useList(e,t,n,r){let a=this.useListSkippable(e,t,n,r),i=(0,o.N)({profiler:this.profiler,...r}),s=(0,o.N)(n),u=this.role,d=l.useCallback(()=>this.securableStore.list(u,e,t,s,{...i,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,forceRefresh:!0}),[u,t,s,e,i]);if(void 0===a)throw Error("skipped somehow");return[a,d]}useListSkippable(e,t,n,o){let r=this.useListSkippableNoThrowAux(e,t,n,o);if(r){if((0,p.M)(r.value))throw(0,c.d)(r);if((0,f.D)(r.value))throw r.value.error;return r.value}}useListSkippableNoThrowAux(e,t,n,r){let[,a]=(0,l.useState)(null),i=(0,o.N)({profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,...r}),s=this.role;if((0,l.useEffect)(()=>{if(null==i||!i.skipFetch)return this.securableStore.list(s,e,t,n,i).register(a)},[s,e,t,n,i]),null==i||!i.skipFetch)return this.securableStore.list(s,e,t,n,i)}useListSkippableNoThrow(e,t,n,o){var r;return null==(r=this.useListSkippableNoThrowAux(e,t,n,o))?void 0:r.value}useGet(e,t,n){let o=this.useGetSkippable(e,t,n);if(void 0===o)throw Error("skipped somehow");return o}useGetMulti(e,t,n){let r=t instanceof Array?t:[t],a=r.map(t=>this.useGet(e,t,n)),s=(0,l.useMemo)(()=>Object.assign({},...i()(a,["lastLoadTime"]).map(e=>e.result)),a),u=Object.fromEntries(a.map((e,t)=>[r[t],e])),d=(0,o.N)(n),c=this.role;return{merged:s,bylevel:u,refresh:l.useCallback(t=>this.securableStore.get(c,e,t,{profiler:this.profiler,...d,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,forceRefresh:!0}),[c,e,d])}}useGetSkippableNoThrowAux(e,t,n){let[,r]=(0,l.useState)({result:void 0,loadState:E.p.loading});n=(0,o.N)({profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,...n});let a=this.role;if((0,l.useEffect)(()=>{if(null==n?void 0:n.skipFetch)return;let o=this.securableStore.get(a,e,t,n);return r(o.value),o.register(r)},[a,e,t,n]),null==n||!n.skipFetch)return this.securableStore.get(a,e,t,n)}useGetSkippableNoThrow(e,t,n){var o;return null==(o=this.useGetSkippableNoThrowAux(e,t,n))?void 0:o.value}useGetSkippable(e,t,n){let o=this.useGetSkippableNoThrowAux(e,t,n);if(o){if((0,p.M)(o.value))throw(0,d.c)(o);if((0,f.D)(o.value))throw o.value.error;return o.value}}get(e,t,n){var o;let r=null!=(o=null==n?void 0:n.role)?o:this.role,a=this.securableStore.get(r,e,t,{profiler:this.profiler,...n,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles});return this.registersMap[a.updatingKey]=a.register,a.value}listIds(e,t,n,o){var r;let a=null!=(r=null==o?void 0:o.role)?r:this.role,i=this.securableStore.list(a,e,t,n,{profiler:this.profiler,...o,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles});return this.registersMap[i.updatingKey]=i.register,i.value}useRefreshGet(e,t,n){let r=(0,o.N)(n),a=(0,o.N)(e);return l.useCallback(()=>this.securableStore.get(this.role,a,t,{profiler:this.profiler,...r,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,forceRefresh:!0}),[a,t,r])}useHydratedList(e,t,n,r){let[a,i]=this.useHydratedListSkippable(e,t,n,r),s=(0,o.N)({profiler:this.profiler,...r}),u=(0,o.N)(n),d=this.role,c=l.useCallback(()=>this.securableStore.list(d,e,t,u,{...s,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,forceRefresh:!0}),[d,t,u,e,s]);if(void 0===a||void 0===i)throw Error("skipped somehow");return[a,i,c]}useHydratedListNoThrow(e,t,n,r){let a=this.useListSkippableNoThrow(e,t,n,r),i=(0,o.N)({profiler:this.profiler,...r}),s=(0,o.N)(n),u=null==r?void 0:r.requestContext,d=this.role,c=(0,o.N)(this.sessionContext),E=l.useCallback(()=>this.securableStore.list(d,e,t,s,{...i,sessionContext:c,forceRefresh:!0}),[d,e,t,s,i,c]);return[(0,l.useMemo)(()=>{var e;return null==a||null==(e=a.result)?void 0:e.map(e=>{var n;return this.securableStore.get(this.role,e,t,{profiler:this.profiler,ttlMs:Number.MAX_SAFE_INTEGER,requestContext:u,sessionContext:this.sessionContext,secondaryRoles:null!=(n=null==r?void 0:r.secondaryRoles)?n:this.secondaryRoles}).value.result},this.profiler)},[a,t,u,null==r?void 0:r.secondaryRoles]),a,E]}useHydratedListSkippable(e,t,n,r){let a=this.useListSkippable(e,t,n,r),i=(0,o.N)(null==r?void 0:r.requestContext),s=null==a?void 0:a.result;return[(0,l.useMemo)(()=>null==s?void 0:s.map(e=>{var n;return this.securableStore.get(this.role,e,t,{profiler:this.profiler,ttlMs:Number.MAX_SAFE_INTEGER,requestContext:i,sessionContext:this.sessionContext,secondaryRoles:null!=(n=null==r?void 0:r.secondaryRoles)?n:this.secondaryRoles}).value.result},this.profiler),[s,t,i,null==r?void 0:r.secondaryRoles]),a]}grant(e,t){return this.securableStore.grant(this.role,e,{profiler:this.profiler,sessionContext:this.sessionContext,secondaryRoles:this.secondaryRoles,...t})}useIsRefreshing(e){let[t,n]=(0,l.useState)(!1),[o,r]=(0,l.useState)(e);return(0,l.useEffect)(()=>{if(!o)return;let e=this.securableStore.areRefreshesWithIDPending(o);return n(e.value||!0),e.register(e=>{n(e),r(void 0)})},[o]),[t,o,r]}constructor(e,t,n,o,r,a){this.role=e,this.secondaryRoles=t,this.securableStore=n,this.registersMap=o,this.profiler=r,this.sessionContext=a}}},596378:function(e,t,n){n.d(t,{c:()=>a});var o=n(60501),r=n(832072);function a(e){return new Promise((t,n)=>{let a=e.register(e=>{(0,r.D)(e)?(a(),n(e.error)):(0,o.j)(e)&&(a(),t(e))})})}},272515:function(e,t,n){n.d(t,{d:()=>a});var o=n(832072),r=n(227533);function a(e){return new Promise((t,n)=>{let a=e.register(e=>{(0,o.D)(e)?(a(),n(e.error)):(0,r.g)(e)&&(a(),t(e))})})}},380621:function(e,t,n){n.d(t,{r:()=>a});var o=n(3291),r=n(649957);function a(e,t){return new Promise(n=>{if((0,r.O)(e.value)||(0,o.M)(e.value)){let a=e.register(e=>{(0,r.O)(e)||(0,o.M)(e)||(t||a(),n(e))})}else n(e.value)})}},646397:function(e,t,n){n.d(t,{W:()=>r});var o=n(3291);function r(e){return new Promise(t=>{if((0,o.M)(e.value)){let n=e.register(e=>{(0,o.M)(e)||(n(),t(e))})}else t(e.value)})}},253060:function(e,t,n){n.d(t,{h:()=>l});var o=n(690908),r=n(868646),a=n(94587),i=n(223819);let l=({id:e,alterProps:t,descPrefix:n})=>{let{version:l,pathToVersionDirectory:s,label:u}=t;return{alterSqlQuery:new o.L().add("ALTER APPLICATION PACKAGE IDENTIFIER(?) ADD PATCH FOR VERSION {} USING {} LABEL = {}",(0,r.M)(e),(0,i.t)(l),(0,a.i)(s),(0,a.i)(null!=u?u:"")).toQuery(),desc:`${n}-create-new-patch`}}},63926:function(e,t,n){n.d(t,{S:()=>l});var o=n(690908),r=n(868646),a=n(94587),i=n(223819);let l=({id:e,alterProps:t,descPrefix:n})=>{let{version:l,pathToVersionDirectory:s,label:u,releaseChannel:d}=t,c=new o.L;return c.add("ALTER APPLICATION PACKAGE {}",(0,r.M)(e)),d?c.add("MODIFY RELEASE CHANNEL {} ADD VERSION {}",(0,i.t)(d),(0,i.t)(l)):c.add("ADD VERSION {} USING {} LABEL = {}",(0,i.t)(l),(0,a.i)(s),(0,a.i)(null!=u?u:"")),{alterSqlQuery:c.toQuery(),desc:d?`${n}-add-version-to-release-channel`:`${n}-add-version`}}},365240:function(e,t,n){n.d(t,{W:()=>i});var o=n(690908),r=n(868646),a=n(223819);let i=({id:e,alterProps:t,descPrefix:n})=>{let{version:i}=t;return{alterSqlQuery:new o.L().add("ALTER APPLICATION PACKAGE {} DEREGISTER VERSION {}",(0,r.M)(e),(0,a.t)(i)).toQuery(),desc:`${n}-deregister-version`}}},39766:function(e,t,n){n.d(t,{M:()=>i});var o=n(690908),r=n(868646),a=n(223819);let i=({id:e,alterProps:t,descPrefix:n})=>{let{version:i}=t;return{alterSqlQuery:new o.L().add("ALTER APPLICATION PACKAGE {} DROP VERSION {}",(0,r.M)(e),(0,a.t)(i)).toQuery(),desc:`${n}-drop-version`}}},712993:function(e,t,n){n.d(t,{T:()=>l});var o=n(690908),r=n(868646),a=n(94587),i=n(244983);let l=({id:e,alterProps:t,descPrefix:n})=>{let{comment:l,distribution:s}=t,u=new o.L;return u.add("ALTER APPLICATION PACKAGE {} SET COMMENT = {} DISTRIBUTION = {}; ",(0,r.M)(e),(0,a.i)(l),(0,i.V)(s)),{alterSqlQuery:u.toQuery(),desc:`${n}-edit`}}},108469:function(e,t,n){n.d(t,{g:()=>g});var o=n(790757),r=n(253060),a=n(63926),i=n(365240),l=n(39766),s=n(712993),u=n(605323),d=n(525804),c=n(646656),E=n(515079),f=n(915060),p=n(911692);let S={[o.Q.EDIT_APP_PACKAGE]:s.T,[o.Q.RENAME_APP_PACKAGE]:c.t,[o.Q.ADD_VERSION]:a.S,[o.Q.ADD_PATCH_TO_VERSION]:r.h,[o.Q.DROP_VERSION]:l.M,[o.Q.SET_DEFAULT_RELEASE_DIRECTIVE]:E.v,[o.Q.SET_RELEASE_DIRECTIVE]:f.P,[o.Q.UNSET_RELEASE_DIRECTIVE]:p.q,[o.Q.MODIFY_RELEASE_DIRECTIVE]:u.r,[o.Q.REGISTER_VERSION]:d.a,[o.Q.DEREGISTER_VERSION]:i.W},g=e=>{let{alterSqlQuery:t,desc:n,newName:o}=(0,S[e.alterProps.alterType])(e);return{alters:[{...t,desc:n}],newName:null!=o?o:""}}},420844:function(e,t,n){n.d(t,{g:()=>o.g});var o=n(108469)},605323:function(e,t,n){n.d(t,{r:()=>l});var o=n(690908),r=n(868646),a=n(833030),i=n(223819);let l=({id:e,alterProps:t,descPrefix:n})=>{let{directiveName:l,version:s,patch:u,releaseChannel:d}=t,c=new o.L;return c.add("ALTER APPLICATION PACKAGE {}",(0,r.M)(e)),d&&c.add("MODIFY RELEASE CHANNEL {}",(0,i.t)(d)),c.add("MODIFY RELEASE DIRECTIVE {} VERSION = {} PATCH = {}",(0,i.t)(l),(0,i.t)(s),(0,a._)(u)),{alterSqlQuery:c.toQuery(),desc:d?`${n}-modify-release-directive-for-release-channel`:`${n}-modify-release-directive`}}},525804:function(e,t,n){n.d(t,{a:()=>l});var o=n(690908),r=n(868646),a=n(94587),i=n(223819);let l=({id:e,alterProps:t,descPrefix:n})=>{let{version:l,pathToVersionDirectory:s,label:u}=t;return{alterSqlQuery:new o.L().add("ALTER APPLICATION PACKAGE {} REGISTER VERSION {} USING {} LABEL = {}",(0,r.M)(e),(0,i.t)(l),(0,a.i)(s),(0,a.i)(null!=u?u:"")).toQuery(),desc:`${n}-register-version`}}},646656:function(e,t,n){n.d(t,{t:()=>i});var o=n(783844),r=n(690908),a=n(868646);let i=({id:e,alterProps:t,descPrefix:n})=>{let{name:i}=t,l=new r.L;return l.add("ALTER APPLICATION PACKAGE IDENTIFIER(?) RENAME TO IDENTIFIER(?)",(0,a.M)(e),(0,a.M)({type:o.M.APPLICATION_PACKAGE,name:i})),{alterSqlQuery:l.toQuery(),desc:`${n}-rename`,newName:i}}},515079:function(e,t,n){n.d(t,{v:()=>l});var o=n(690908),r=n(868646),a=n(833030),i=n(223819);let l=({id:e,alterProps:t,descPrefix:n})=>{let{version:l,patch:s,releaseChannel:u}=t,d=new o.L;return d.add("ALTER APPLICATION PACKAGE {}",(0,r.M)(e)),u&&d.add("MODIFY RELEASE CHANNEL {}",(0,i.t)(u)),d.add("SET DEFAULT RELEASE DIRECTIVE VERSION = {} PATCH = {}",(0,i.t)(l),(0,a._)(s)),{alterSqlQuery:d.toQuery(),desc:u?`${n}-set-default-release-directive-for-release-channel`:`${n}-set-default-release-directive`}}},915060:function(e,t,n){n.d(t,{P:()=>s});var o=n(783844),r=n(690908),a=n(868646),i=n(833030),l=n(223819);let s=({id:e,alterProps:t,descPrefix:n})=>{let{version:s,patch:u,directiveName:d,accounts:c,releaseChannel:E}=t,f=new r.L,p=c.map(e=>(0,a.M)({type:o.M.ACCOUNT,...e}));return f.add("ALTER APPLICATION PACKAGE {}",(0,a.M)(e)),E&&f.add("MODIFY RELEASE CHANNEL {}",(0,l.t)(E)),f.add("SET RELEASE DIRECTIVE {} ACCOUNTS = (",(0,l.t)(d)),p.forEach((e,t)=>{let n=t===p.length-1;f.add(n?"{}":"{}, ",e)}),f.add(") VERSION = {} PATCH = {}",(0,l.t)(s),(0,i._)(u)),{alterSqlQuery:f.toQuery(),desc:E?`${n}-set-release-directive-for-release-channel`:`${n}-set-release-directive`}}},911692:function(e,t,n){n.d(t,{q:()=>i});var o=n(690908),r=n(868646),a=n(223819);let i=({id:e,alterProps:t,descPrefix:n})=>{let{directiveName:i,releaseChannel:l}=t,s=new o.L;return s.add("ALTER APPLICATION PACKAGE {}",(0,r.M)(e)),l&&s.add("MODIFY RELEASE CHANNEL {}",(0,a.t)(l)),s.add("UNSET RELEASE DIRECTIVE {}",(0,a.t)(i)),{alterSqlQuery:s.toQuery(),desc:l?`${n}-unset-release-directive-for-release-channel`:`${n}-unset-release-directive`}}},113803:function(e,t,n){n.d(t,{g:()=>S,w:()=>p});var o=n(783844),r=n(481642),a=n(690908),i=n(884407),l=n(390080),s=n(868646),u=n(94587),d=n(72949),c=n(802118),E=n(201515),f=n(230981);let p=e=>{var t,n,r,l;let d,p,S=(null==(t=e.id)?void 0:t.name)||"",g=(null==(l=e.options)||null==(r=l.extras)||null==(n=r.filter)?void 0:n.toString())||"",_=(0,s.M)({name:S,type:o.M.APPLICATION});g?(d="CALL SYSTEM$GET_REFERENCE_DEFINITIONS(?,[?])",p=[_,(0,u.i)(g)]):(d="CALL SYSTEM$GET_REFERENCE_DEFINITIONS(?)",p=[_]);let h=new a.L(d,...p).toQuery();return{...e,query:h,adapter:e=>{var t,n,r;let a=null!=(r=null==(n=e.rows)||null==(t=n[0])?void 0:t[0])?r:"",l=a?(0,E.F)(a):[],s=(0,f.y)(l);return s.forEach(e=>{let t=e.objectType.toLowerCase();if("api integration"===t)e.objectType=o.M.API_INTEGRATION;else if("external table"===t)e.objectType=o.M.EXTERNAL_TABLE;else if("external_access integration"===t||"external access integration"===t)e.objectType=o.M.EXTERNAL_ACCESS_INTEGRATION;else if("function"===t||"procedure"===t){let t=e.bindings;for(let e=0;e<t.length;e++)if(t[e].name){let n=t[e],{args:o,name:r}=(0,i.L)(n.name);n.name=(0,c.Z2)(r)||r,n.args=o}}}),{rows:[{id:{type:o.M.APPLICATION,name:S},references:s}]}},desc:"show-application-references"}},S=(e,t)=>{let n,i=e.reference;if(!i)return[];let c=(0,l.y)({type:o.M.PROCEDURE,database:t.name,...i.registerCallback}),E=[],f=(0,u.i)(i.name),p=(0,u.i)(i.actionType);switch(i.actionType){case r.l.ADD:if(i.objects&&i.objects.length>0){n=`call ${c}(?, {}, system$reference({}, ?, 'PERSISTENT', {}))`;for(let e=0;e<i.objects.length;e++){let t=i.objects[e],o=(0,s.M)(t,{withArgs:!0}),r=(0,u.i)(t.type),l=new a.L().add(n,f,p,r,o,(0,d.K)(i.privileges||[]));E.push({...l.toQuery(),desc:"set-reference-add"})}}break;case r.l.REMOVE:if(i.objects&&i.objects.length>0){n=`call ${c}(?, {}, ?)`;for(let e=0;e<i.objects.length;e++){let t=(0,u.i)(i.objects[e]),o=new a.L().add(n,f,p,t);E.push({...o.toQuery(),desc:"set-reference-remove"})}}break;case r.l.CLEAR:{n=`call ${c}(?, {}, '')`;let e=new a.L().add(n,f,p);E.push({...e.toQuery(),desc:"set-reference-clear"})}}return E}},17951:function(e,t,n){n.d(t,{c:()=>u});var o=n(783844),r=n(690908),a=n(868646),i=n(833030),l=n(908545),s=n(223819);function u(e,t){let n=t.from.name,u=t.version,d=t.patch,c=new r.L().add("create {} IDENTIFIER(?) from APPLICATION PACKAGE IDENTIFIER(?)",(0,l.T)(e.type),(0,a.M)(e),(0,a.M)({name:n,type:o.M.APPLICATION_PACKAGE}));return t.from.type===o.M.APPLICATION_PACKAGE&&u&&void 0!==d&&c.add("USING VERSION {} PATCH {}",(0,s.t)(u),(0,i._)(d)),c.toQuery()}},527565:function(e,t,n){n.d(t,{T:()=>o,U:()=>r});let o="SYSTEM$STREAMLIT_NOTEBOOK_WH",r="SYSTEM$WAREHOUSE_RUNTIME"},865666:function(e,t,n){n.d(t,{L:()=>u});var o=n(690908),r=n(868646),a=n(908545),i=n(94587),l=n(244983),s=n(410183);function u(e,t){let n=t.from?t.from.name:"",u=t.using?t.using.name:"",d=t.trial,c=t.autoRenew,E=t.preferMCD,f=t.paymentMethodId,p=t.purchaseOrderId,S=t.isBackgroundInstall,g=t.isEventSharingAuthorization,_=t.offer,h=new o.L().add("create {} IDENTIFIER(?)",(0,a.T)(e.type),(0,r.M)(e)).add("from LISTING {}",(0,i.i)(n));return u&&h.add("using RELEASE CHANNEL {}",(0,l.V)(u)),S&&h.add("BACKGROUND_INSTALL = true"),g&&h.add("AUTHORIZE_TELEMETRY_EVENT_SHARING = true"),(0,s.rW)(h,{trial:d,autoRenew:c,preferMCD:E,paymentMethodId:f,purchaseOrderId:p,offer:_}),h.toQuery()}},438081:function(e,t,n){n.d(t,{x:()=>E});var o=n(23917);function r(e){return(t,n)=>e(t,n)}function a(e,t){let n=`alter-${e.type.toLowerCase()}`;return`${n}-${t}`}let i=r((e,t)=>{if(!t.push)return null;if(t.secret&&t.push){let{secret:n,name:r,email:i,comment:l,to:s}=t;return[{...(0,o.fd)(e,{secret:n,name:r,email:i,comment:l,to:s}),desc:a(e,"push")}]}let{username:n,password:r,name:i,email:l,comment:s,to:u}=t;return[{...(0,o.fd)(e,{username:n,password:r,name:i,email:l,comment:s,to:u}),desc:a(e,"push")}]}),l=r((e,t)=>{if(!0===t.add){let{from:n,live:r}=t;return[{...(0,o.Hb)(e,{from:n,live:r||!n}),desc:a(e,"add-version")}]}return null}),s=r((e,t)=>!0===t.commit?[{...(0,o.Tp)(e),desc:a(e,"commit")}]:null),u=r((e,t)=>!0===t.pull?[{...(0,o.Qo)(e,t.enableConflictResolution),desc:a(e,"pull")}]:null),d=r((e,t)=>t.executeAs?[{...(0,o.cA)(e,t.executeAs),desc:a(e,"execute-as")}]:null),c=[l,s,i,u,d,r((e,t)=>t.newId?[{...(0,o.U9)(e,t.newId),desc:a(e,"rename-to")}]:null),r((e,t)=>t.newSchema&&t.newOwner?[{...(0,o.oh)(e,t.newSchema,t.newOwner),desc:a(e,"move-to")}]:null)];function E(e,t){for(let n of c){let o=n(e,t);if(o)return o}return null}},106526:function(e,t,n){n.d(t,{Q:()=>i});var o=n(916616),r=n.n(o),a=n(783844);let i=(e,t)=>{let n=[],o=[],i=[];return e.forEach(e=>{e.targetColNames?e.targetColNames.forEach(t=>{i.push({mappedColumns:e.mappedColumns,policy:e.policy,targetColName:t})}):i.push(e)}),t.forEach(e=>{e.targetColNames?e.targetColNames.forEach(t=>{o.push({mappedColumns:e.mappedColumns,policy:e.policy,targetColName:t})}):o.push(e)}),o.forEach(e=>{if(e.policy.domain===a.M.AGGREGATION_POLICY||e.policy.domain===a.M.ROW_ACCESS_POLICY){let t=i.find(t=>t.policy.domain===e.policy.domain);t&&n.push({toSet:t,toUnset:e})}else{let t=i.find(t=>t.policy.domain===e.policy.domain&&t.targetColName===e.targetColName);t&&n.push({toSet:t,toUnset:e})}}),{toRemove:o.filter(e=>!n.some(({toUnset:t})=>r()(t,e))),toAdd:i.filter(e=>!n.some(({toSet:t})=>r()(t,e))),toEdit:n}}},410183:function(e,t,n){n.d(t,{As:()=>ee,Nj:()=>en,Vk:()=>el,Vq:()=>ei,_t:()=>W,jJ:()=>q,n5:()=>ea,pV:()=>H,r5:()=>Z,rW:()=>K,w3:()=>J});var o=n(678830),r=n.n(o),a=n(326290),i=n.n(a),l=n(783844),s=n(237627),u=n(690908),d=n(369497),c=n(470946),E=n(183021),f=n(794912),p=n(645807),S=n(988209),g=n(971478),_=n(868646),h=n(253833),m=n(610280),I=n(833030),T=n(802402),R=n(908545),v=n(94587),C=n(244983),y=n(516727),N=n(850114),A=n(420844),b=n(113803),O=n(17951),L=n(351886),k=n(755218),M=n(786391),w=n(14542),D=n(865666),U=n(438081),P=n(106526),x=n(86917),B=n(991458);function F(e){return i()(e).toUpperCase().replace("UTF_8","UTF8")}function G(e,t){var n;e.add("{} {}",(n=t.name,(0,N.yB)(n)?(0,T.M)(n):(0,T.M)((0,f.P)(n))),(0,g.j)(t.type));let o="STRING"===t.type||"VARCHAR"===t.type||"DATE"===t.type||"TIMESTAMP"===t.type?`'${t.default}'`:String(t.default);void 0!==t.default&&e.add("DEFAULT {}",(0,C.V)(o)),t.notNull&&e.add("NOT NULL"),t.comment&&e.add("COMMENT {}",(0,v.i)(t.comment))}let V=["ALLOWED_AUTHENTICATION_SECRETS","STORAGE_INTEGRATION"];function K(e,t,n){if(t){let o=!1;for(let a of Object.keys(t)){let i=t[a],s=F(a);switch(typeof i){case"string":"FILE_FORMAT"===s?e.add("FILE_FORMAT = (TYPE = {})",(0,m.a)(i)):"DEFAULT_SECONDARY_ROLES"===s?(e.add("{} = (",(0,m.a)(s)),i&&e.add("{}",(0,v.i)(i)),e.add(")")):V.includes(s)?e.add("{} = {}",(0,h.e)(s),(0,h.e)(i)):e.add("{} = {}",(0,m.a)(s),(0,v.i)(i));break;case"boolean":e.add("{} = {}",(0,m.a)(s),(0,S.S)(i));break;case"number":e.add("{} = {}",(0,m.a)(s),(0,I._)(i));break;case"object":if(r()(i))i.length>0?(e.add("{} = (",(0,m.a)(s)),i.forEach((t,n)=>{n>0&&e.add(","),e.add("{}",(0,v.i)(t))}),e.add(")")):n&&e.add("{} = ()",(0,m.a)(s));else if(null===i)e.add("{} = null",(0,m.a)(s));else switch(s){case"REPLICA_OF":e.add("AS REPLICA OF IDENTIFIER(?)",(0,_.M)({type:l.M.DATABASE,...i}));break;case"SCHEDULE":"mins"in i?e.add("{} = {}",(0,m.a)(s),(0,v.i)(`${i.mins} MINUTE`)):"expression"in i&&e.add("{} = {}",(0,m.a)(s),(0,v.i)(`USING CRON ${i.expression} ${i.timezone}`));break;case"LOCATION":e.add("{} = {}",(0,m.a)(s),(0,_.M)(i));break;case"FILE_FORMAT":e.add("{} = (FORMAT_NAME = {})",(0,m.a)(s),(0,_.M)(i));break;case"TRIGGERS":o=!0;break;case"METADATA":e.add("METADATA = '{}'",{inlineRepr:(0,c.H)(JSON.stringify(i))});break;default:e.add("{} = (",(0,m.a)(s)),K(e,i),e.add(")")}}}o&&es(e,t.triggers)}}function W(e){return(0,N.SD)(e)?e.toUpperCase():(0,N.r9)(e)?(0,y.b)(e):e}function H(e){return{...e,name:W(e.name)}}let $=[{keyword:"secure",renderer:e=>{e.add("secure")}},{keyword:"replace",renderer:e=>{e.add("or replace")}}],Q=[{keyword:"existsConditional",renderer:(e,t)=>{"ifNotExists"===t&&e.add("if not exists")}}],j=[{keyword:"columns",renderer:function(e,t){e.add("("),function(e,t,n){for(let o=0;o<t.length;o++)o>0&&e.add(","),n(e,t[o])}(e,t,G),e.add(")")}},{keyword:"sourceTable",renderer:function(e,t){e.add("on"),e.addFullyQualifiedIdentifier(t)}},{keyword:"returns",renderer:(e,t)=>{e.add("returns {}",(0,h.e)(t))}},{keyword:"withManagedAccess",renderer:e=>{e.add("WITH MANAGED ACCESS")}},{keyword:"language",renderer:(e,t)=>{e.add("language {}",(0,h.e)(t))}},{keyword:"from",renderer:(e,t)=>{e.add("FROM"),"string"==typeof t?e.add("{}",(0,v.i)(t)):e.addFullyQualifiedIdentifier(t)}}],Y=[{keyword:"definition",renderer:function(e,t,n){e.add("as"),n.type===l.M.FUNCTION||n.type===l.M.PROCEDURE?e.add("{}",(0,v.i)(t)):e.add("{}",(0,T.M)(t))}}];function z(e,t,n,o){for(let r of t){let t=n[r.keyword];void 0!==t&&(r.renderer(e,t,o),delete n[r.keyword])}}function q(e,t){if(e.type===l.M.ORG_EMAIL)return eu(l.M.ORG_EMAIL,"CREATE",t);if(e.type===l.M.BUDGET_BUNDLE)return(0,w.cQ)(e);if(e.type===l.M.APPLICATION){let n=t;return n.from.type===l.M.APPLICATION_PACKAGE?(0,O.c)(e,n):(0,D.L)(e,n)}if(e.type===l.M.PROVIDER_LISTING)return(0,L.a)(e,t);t={...t};let n=new u.L("create");z(n,$,t,e);let o=[];for(let e of Q){let n=t[e.keyword];void 0!==n&&(o.push({keyword:e.keyword,renderer:t=>e.renderer(t,n)}),delete t[e.keyword])}n.addFullyQualifiedIdentifier(e,o),z(n,j,t,e);let r={...t};for(let e of Y)delete r[e.keyword];return K(n,r),z(n,Y,t,e),n.toQuery()}function Z(e,t,n){let o=new u.L("CREATE");return o.add("{}",(0,R.T)(e.type)),o.add("IDENTIFIER(?)",(0,_.M)(t)),o.add("CLONE"),o.add("IDENTIFIER(?)",(0,_.M)(e)),n.comment&&o.add("COMMENT = {}",(0,v.i)(n.comment)),o.toQuery()}function J(e,t){if(e.type===l.M.PROVIDER_LISTING)return(0,k._)(e);if(e.type===l.M.ML_MODEL_VERSION){let t={name:e.module,database:e.database,schema:e.schema,type:l.M.ML_MODEL};return new u.L().add("ALTER MODEL IDENTIFIER(?) DROP VERSION {}",(0,_.M)(t),{bindingsJSONRepr:e.name,inlineRepr:e.name}).toQuery()}let n=new u.L("drop");return e.type===l.M.BUDGET_BUNDLE?n.add("instance IDENTIFIER(?)",(0,_.M)(e)):n.addFullyQualifiedIdentifier(e),(null==t?void 0:t.cascade)&&e.type===l.M.APPLICATION&&n.add("CASCADE"),e.type===l.M.ACCOUNT&&(null==t?void 0:t.gracePeriodInDays)&&n.add("grace_period_in_days="+t.gracePeriodInDays),n.toQuery()}function X(e,{emailType:t,oldEmail:n,newEmail:o},r){let[a,i]=function(...e){return e.map(e=>Array.isArray(e)?e:[e])}(n,o),l=a.filter(e=>!i.includes(e)),s=i.filter(e=>!a.includes(e));return{alters:[...l.map((n,o)=>({...eu(e,"DROP",{email:n,emailType:t}),desc:`${r}-drop${0===o?"":"-"+(o+1)}`})),...s.map((n,o)=>({...eu(e,"CREATE",{email:n,emailType:t}),desc:`${r}-create${0===o?"":"-"+(o+1)}`}))],newName:""}}function ee(e,t){let n,o=`alter-${e.type.toLowerCase()}`;if(e.type===l.M.ORG_EMAIL)return X(l.M.ORG_EMAIL,t,o);if(e.type===l.M.ACCOUNT_EMAIL)return X(l.M.ACCOUNT_EMAIL,t,o);if(e.type===l.M.SHARE){if(t.useAdd){let n=[];return n.push({...(0,B.I)(e,t,"add"),desc:`${o}-add-accounts`}),{alters:n,newName:""}}else if(t.useRemove){let n=[];return n.push({...(0,B.I)(e,t,"remove"),desc:`${o}-remove-accounts`}),{alters:n,newName:""}}}if(e.type===l.M.CONSUMER_LISTING&&t.unpublishByAdmin)return{alters:[{...new u.L().add("call system$unpublish_data_exchange_listing_by_admin(?, ?, ?)",(0,v.i)(e.exchangeId),(0,v.i)(e.name),(0,v.i)(t.reason)).toQuery(),desc:`${o}-unpublish-listing-by-admin`}],newName:""};if(e.type===l.M.LISTING&&t.appPackage)return{alters:[{...new u.L().add("call SYSTEM$SETUP_LISTING_WITH_APPLICATION_PACKAGE(?, ?)",(0,_.M)(e),(0,_.M)({name:t.appPackage,type:l.M.APPLICATION_PACKAGE})).toQuery(),desc:`${o}-setup-listing-with-app-package`}],newName:""};if(e.type===l.M.BUDGET_BUNDLE){let n,r=[],a="";if(t.budgetId){let r=t.budgetId;a=W(r.name),n={...(0,w.Wh)(e,r),desc:`${o}-rename`}}if(t.spendingLimit&&r.push({...(0,w._w)(e,t.spendingLimit),desc:`${o}-set-spending-limit`}),t.emailNotification){let n=t.emailNotification;r.push({...(0,w.FX)(e,n.recipient),desc:`${o}-set-email-notification-without-integration`})}return t.activate&&r.push({...(0,w.qz)(e),desc:`${o}-activate-account-budget`}),t.deactivate&&r.push({...(0,w.wS)(e),desc:`${o}-deactivate-account-budget`}),t.addResources&&t.addResources.length>0&&t.addResources.forEach(t=>r.push({...(0,w.Pl)(e,t),desc:`${o}-add-resource-to-budget`})),t.removeResources&&t.removeResources.length>0&&t.removeResources.forEach(t=>r.push({...(0,w.yu)(e,t),desc:`${o}-remove-resource-from-budget`})),n&&r.push(n),{alters:r,newName:a}}if(e.type===l.M.APPLICATION_PACKAGE&&t.alterType)return(0,A.g)({alterProps:t,id:e,descPrefix:o});if(e.type===l.M.PROVIDER_LISTING&&t.alterType)return(0,M.g)({alterProps:t,id:e,descPrefix:o});if(e.type===l.M.APPLICATION&&t.reference)return{alters:(0,b.g)(t,e),newName:""};if(e.type===l.M.ACCOUNT&&t.name){let n=W(t.name),r=[];return r.push({...(0,E.M)(e,n,t.saveOldUrl),desc:`${o}-rename`}),{alters:r,newName:n}}if((0,s.n)(e)){let n=(0,U.x)(e,t);if(n)return{alters:n,newName:""}}let r=[],a={},i=!1,c=[],f="";for(let s in t){let E=t[s];if("name"===s)E&&W(E)!==e.name&&(n={...ei(e,f=W(E)),desc:`${o}-rename`});else if("networkPolicy"===s&&e.type===l.M.ACCOUNT)r.push({...function(e,t){let n=new u.L("alter");return(0,d.c)(n,e),"activate"===t.action?n.add("set NETWORK_POLICY = {}",(0,v.i)(t.name)):n.add("unset NETWORK_POLICY"),n.toQuery()}(e,E),desc:`${o}-${E.action}-${E.name.replace(" ","-")}`});else if("action"===s)r.push({...el(e,E),desc:`${o}-${E.replace(" ","-")}`});else if("secure"===s&&e.type===l.M.FUNCTION){let t=E?"set":"unset";r.push({...el(e,`${t} secure`),desc:`${o}-${t}-secure`})}else if("enableReplication"===s&&e.type===l.M.DATABASE)r.push({...ed(e,E,"enable replication"),desc:`${o}-enable-replication`});else if("disableReplication"===s&&e.type===l.M.DATABASE)r.push({...ed(e,E,"disable replication"),desc:`${o}-disable-replication`});else if("enableFailover"===s&&e.type===l.M.DATABASE)r.push({...ed(e,E,"enable failover"),desc:`${o}-enable-failover`});else if("disableFailover"===s&&e.type===l.M.DATABASE)r.push({...ed(e,E,"disable failover"),desc:`${o}-disable-failover`});else if("policy"===s){let t,{toSet:n,toUnset:a,targetColumnName:i,entityColumns:s}=E,u=n?n.policy.domain:a.domain,d=u===l.M.ROW_ACCESS_POLICY,c=u===l.M.MASKING_POLICY,f=u===l.M.PROJECTION_POLICY,p=u===l.M.AGGREGATION_POLICY,S=u===l.M.PRIVACY_POLICY;d?ef({id:e,actions:r,toSet:n,toUnset:a,targetColumnName:i,descPrefix:o}):S?(n&&a?t=`${o}-drop-and-add-privacy-policy`:n?t=`${o}-add-privacy-policy`:a&&(t=`${o}-drop-privacy-policy`),r.push({...eo({id:e,addParams:n,dropParams:a}),desc:t})):c?n&&a?r.push({...eo({id:e,addParams:n,dropParams:a,targetColumnName:i}),desc:`${o}-set-masking-policy-force`}):n?r.push({...eo({id:e,addParams:n,targetColumnName:i}),desc:`${o}-set-masking-policy`}):a&&r.push({...eo({id:e,dropParams:a,targetColumnName:i}),desc:`${o}-unset-masking-policy`}):f?n&&a?r.push({...eo({id:e,addParams:n,dropParams:a,targetColumnName:i}),desc:`${o}-set-projection-policy-force`}):n?r.push({...eo({id:e,addParams:n,targetColumnName:i}),desc:`${o}-set-projection-policy`}):a&&r.push({...eo({id:e,dropParams:a,targetColumnName:i}),desc:`${o}-unset-projection-policy`}):p&&ep({id:e,actions:r,toSet:n,toUnset:a,entityColumns:s,descPrefix:o})}else if("policies"===s){let{rowAccessPolicy:t,aggregationPolicy:n,projectionPolicies:a}=E;if(t){let{toSet:n,toUnset:a,targetColumnName:i}=t;ef({id:e,actions:r,toSet:n,toUnset:a,targetColumnName:i,descPrefix:o})}if(n){let{toSet:t,toUnset:a}=n;ep({id:e,actions:r,toSet:t,toUnset:a,entityColumns:null==t?void 0:t.entityColumns,descPrefix:o})}if(a){let{toSet:t,toUnset:n}=a;!function({id:e,actions:t,toSet:n,toUnset:o,descPrefix:r}){let{toAdd:a,toRemove:i,toEdit:l}=(0,P.Q)(null!=n?n:[],null!=o?o:[]);a.forEach(n=>{t.push({...eo({id:e,addParams:n,targetColumnName:n.targetColName}),desc:`${r}-set-projection-policy`})}),i.forEach(n=>{t.push({...eo({id:e,dropParams:n.policy,targetColumnName:n.targetColName}),desc:`${r}-unset-projection-policy`})}),l.forEach(n=>{t.push({...eo({id:e,addParams:n.toSet,dropParams:n.toUnset.policy,targetColumnName:n.toSet.targetColName}),desc:`${r}-set-projection-policy-force`})})}({id:e,actions:r,toSet:t,toUnset:n,descPrefix:o})}}else if("tags"===s)(null==E?void 0:E.length)>0&&r.push({...function(e,t){let n=new u.L("alter");return ec(e,n),t[0].targetColumnName&&eE(n,t[0].targetColumnName),n.add("set TAG"),t.forEach((e,t)=>{t>0&&n.add(",");let o={name:e.name,database:e.database,schema:e.schema,type:l.M.TAG};n.add("IDENTIFIER(?) = {}",(0,_.M)(o),(0,v.i)(e.value))}),n.toQuery()}(e,E),desc:`${o}-set`});else if("tagsToUnset"===s)(null==E?void 0:E.length)>0&&r.push({...function(e,t){let n=new u.L("alter");return ec(e,n),t[0].targetColumnName&&eE(n,t[0].targetColumnName),n.add("unset TAG"),t.forEach((e,t,o)=>{let r={type:l.M.TAG,name:e.name,database:e.database,schema:e.schema};t<o.length-1?n.add("IDENTIFIER(?),",(0,_.M)(r)):n.add("IDENTIFIER(?)",(0,_.M)(r))}),n.toQuery()}(e,E),desc:`${o}-unset`});else if("columnToDrop"===s)r.push({...function(e,t){let n=new u.L("alter");ec(e,n),n.add("drop COLUMN");let o={type:l.M.SCHEMA,name:t};return n.add("{}",(0,_.M)(o)),n.toQuery()}(e,E),desc:`${o}-drop-column`});else if((e.type===l.M.TABLE||e.type===l.M.VIEW||e.type===l.M.DYNAMIC_TABLE||e.type===l.M.ICEBERG_TABLE||e.type===l.M.EXTERNAL_TABLE)&&"columnComment"===s){let{column:t,comment:n}=E;r.push({...function(e,t,n){let o=new u.L("ALTER");return(0,d.c)(o,e),o.add(`ALTER COLUMN ${(0,p.v)(t)}`),n?o.add("COMMENT {}",(0,v.i)(n)):o.add("UNSET COMMENT"),o.toQuery()}(e,t,n),desc:`${o}-column-comment`})}else{let t=e.type===l.M.WAREHOUSE&&"autoSuspend"===s;null!==E||e.type===l.M.RESOURCE_MONITOR||t?(a[s]=E,i=!0):c.push(s)}}let S=[];return r.length>0&&S.push(...r),i&&S.push({...en(e,a),desc:`${o}-set`}),c.length>0&&S.push({...ea(e,c),desc:`${o}-unset`}),n&&S.push(n),{alters:S,newName:f}}let et=[l.M.NETWORK_POLICY,l.M.NOTEBOOK,l.M.STREAMLIT];function en(e,t){let n=new u.L("alter");(0,d.c)(n,e);let o=Object.keys(t);if(e.type===l.M.RESOURCE_MONITOR&&1===o.length&&"triggers"===o[0])es(n,t.triggers);else if(e.type===l.M.SHARE&&void 0!==t.accounts&&null!==t.accounts){n.add("set");let e=t.accounts;delete t.accounts,(0,x.m)(n,e),K(n,t)}else n.add("set"),K(n,t,et.includes(e.type));return n.toQuery()}function eo({id:e,addParams:t,dropParams:n,targetColumnName:o,entityColumns:r}){let a=new u.L("alter");ec(e,a);let i=null==t?void 0:t.policy.domain;return o&&eE(a,o),n&&t&&i!==l.M.ROW_ACCESS_POLICY&&i!==l.M.PRIVACY_POLICY?er(a,t,o,r,!0):(n&&function(e,t){let{domain:n,name:o,schema:r,database:a}=t;n===l.M.MASKING_POLICY?e.add("unset masking policy"):n===l.M.ROW_ACCESS_POLICY?(e.add("drop row access policy"),e.add("IDENTIFIER(?)",(0,_.M)({type:n,name:o,schema:r,database:a}))):n===l.M.PRIVACY_POLICY?(e.add("drop privacy policy"),e.add("IDENTIFIER(?)",(0,_.M)({type:n,name:o,schema:r,database:a}))):n===l.M.AGGREGATION_POLICY?e.add("unset aggregation policy"):n===l.M.PROJECTION_POLICY&&e.add("unset projection policy")}(a,n),n&&t&&a.add(","),t&&er(a,t,o,r)),a.toQuery()}function er(e,t,n,o,r){let{policy:a,mappedColumns:i}=t,{domain:s,name:u,schema:d,database:c}=a,E={type:s,name:u,schema:d,database:c};s===l.M.MASKING_POLICY&&n&&i?(e.add("set masking policy"),e.add("IDENTIFIER(?)",(0,_.M)(E)),i.length>1&&(e.add("using ("),i.forEach((t,o,r)=>{0===o?e.add("{}",(0,_.M)({type:l.M.SCHEMA,name:n})):e.add("{}",(0,_.M)({type:l.M.SCHEMA,name:t.mappedColName})),o<r.length-1&&e.add(",")}),e.add(")")),r&&e.add("force")):s===l.M.ROW_ACCESS_POLICY&&!n&&i?(e.add("add row access policy"),e.add("IDENTIFIER(?)",(0,_.M)(E)),e.add("on ("),i.forEach((t,n,o)=>{let r={type:l.M.SCHEMA,name:t.mappedColName};e.add("{}",(0,_.M)(r)),n<o.length-1&&e.add(",")}),e.add(")")):s===l.M.AGGREGATION_POLICY?(e.add("set aggregation policy"),e.add("IDENTIFIER(?)",(0,_.M)(E)),(null==o?void 0:o.length)&&(e.add("ENTITY KEY ("),o.forEach((t,n)=>{e.add("{}",(0,_.M)({type:l.M.SCHEMA,name:t})),n<o.length-1&&e.add(",")}),e.add(")")),r&&e.add("force")):s===l.M.PROJECTION_POLICY&&n?(e.add("set projection policy"),e.add("IDENTIFIER(?)",(0,_.M)(E)),r&&e.add("force")):s===l.M.PRIVACY_POLICY&&(e.add("add privacy policy"),e.add("IDENTIFIER(?)",(0,_.M)(E)))}function ea(e,t){let n=new u.L("alter");n.addFullyQualifiedIdentifier(e),n.add("unset");for(let e=0;e<t.length;e++){let o=F(t[e]);e<t.length-1?n.add("{},",(0,m.a)(o)):n.add("{}",(0,m.a)(o))}return n.toQuery()}function ei(e,t){let n=new u.L("alter");return(0,d.c)(n,e),n.add("rename to IDENTIFIER(?)",(0,_.M)({...e,name:t})),n.toQuery()}function el(e,t){let n=new u.L("alter");return n.addFullyQualifiedIdentifier(e),n.add("{}",(0,m.a)(t)),n.toQuery()}function es(e,t){let{suspend:n,suspendImmediately:o,notify:r}=t;for(let t of((n||o||r)&&e.add("TRIGGERS"),n&&e.add("ON {} PERCENT DO SUSPEND",(0,I._)(n)),o&&e.add("ON {} PERCENT DO SUSPEND_IMMEDIATE",(0,I._)(o)),r))t&&e.add("ON {} PERCENT DO NOTIFY",(0,I._)(t))}function eu(e,t,n){let o=new u.L,r="";return e===l.M.ACCOUNT_EMAIL?"CREATE"===t?r="call system$ADD_EMAIL_STORAGE_FOR_ACCOUNT({}, {})":"DROP"===t&&(r="call system$DELETE_EMAIL_STORAGE_FOR_ACCOUNT({}, {})"):e===l.M.ORG_EMAIL&&("CREATE"===t?r="call system$ADD_EMAIL_STORAGE_FOR_ORGANIZATION({}, {})":"DROP"===t&&(r="call system$DELETE_EMAIL_STORAGE_FOR_ORGANIZATION({}, {})")),o.add(r,(0,v.i)(n.emailType),(0,v.i)(n.email)),o.toQuery()}function ed(e,t,n){let o=new u.L("alter");return(0,d.c)(o,e),o.add(`${n} to accounts`),t.forEach((e,t)=>{0!==t&&o.add(","),o.add("IDENTIFIER(?)",(0,_.M)(e))}),o.toQuery()}function ec(e,t){e.type===l.M.EXTERNAL_TABLE?t.add("{} IDENTIFIER(?)",(0,R.T)(l.M.TABLE),(0,_.M)(e)):e.type===l.M.MATERIALIZED_VIEW?t.add("{} IDENTIFIER(?)",(0,R.T)(l.M.VIEW),(0,_.M)(e)):t.addFullyQualifiedIdentifier(e)}function eE(e,t){let n={type:l.M.SCHEMA,name:t};e.add("modify COLUMN"),e.add("{}",(0,_.M)(n))}function ef({id:e,actions:t,toSet:n,toUnset:o,targetColumnName:r,descPrefix:a}){let i="";n&&o?i=`${a}-drop-and-add-row-access-policy`:n?i=`${a}-add-row-access-policy`:o&&(i=`${a}-drop-row-access-policy`),t.push({...eo({id:e,addParams:n,dropParams:o,targetColumnName:r}),desc:i})}function ep({id:e,actions:t,toSet:n,toUnset:o,entityColumns:r,descPrefix:a}){let i="";n&&o?t.push({...eo({id:e,addParams:n,dropParams:o,entityColumns:r}),desc:`${a}-set-aggregation-policy-force`}):n?(i=`${a}-set-aggregation-policy`,t.push({...eo({id:e,addParams:n,entityColumns:r}),desc:i})):o&&(i=`${a}-unset-aggregation-policy`,t.push({...eo({id:e,dropParams:o}),desc:i}))}},144306:function(e,t,n){n.d(t,{J:()=>a});var o=n(734176);let r=e=>{try{let t=JSON.parse(e);return"string"==typeof t}catch(e){return!0}},a=e=>{let t=e.filter(e=>!(0,o.U)(e));return 0===t.length?"":JSON.stringify(t.reduce((e,t)=>({...e,[t.key]:r(t.value)?t.value:JSON.parse(t.value)}),{}))}},201515:function(e,t,n){n.d(t,{F:()=>a});var o=n(54649),r=n(467131);function a(e){try{return(0,o.jsonParseDoubleDollarSafe)(e)}catch(e){return r.cM.error(Error(`error running jsonParseDoubleDollarSafe ${e}`)),{}}}},734176:function(e,t,n){n.d(t,{U:()=>o});let o=e=>""===e.key&&""===e.value},230981:function(e,t,n){n.d(t,{n:()=>d,y:()=>u});var o=n(693936),r=n.n(o),a=n(812598),i=n.n(a),l=n(934835),s=n(201515);function u(e){return(0,l.l)(e,r())}let d=e=>{let t=(0,s.F)(null!=e?e:"{}");return i()(t)?void 0:u(t)}},86917:function(e,t,n){n.d(t,{m:()=>a});var o=n(783844),r=n(868646);function a(e,t){e.add("ACCOUNTS ="),t.forEach((t,n)=>{0!==n&&e.add(","),e.add("{}",(0,r.M)({type:o.M.ACCOUNT,name:t}))})}},991458:function(e,t,n){n.d(t,{I:()=>i});var o=n(690908),r=n(369497),a=n(86917);function i(e,t,n){let i=new o.L("alter");(0,r.c)(i,e),i.add(n);let l=t.accounts||[];return delete t.accounts,(0,a.m)(i,l),i.toQuery()}},783624:function(e,t,n){n.d(t,{a:()=>l});var o=n(690908),r=n(868646),a=n(244983),i=n(944799);let l=(e,t)=>{let{shareId:n,distribution:l,title:s,description:u,profile:d,targetAccounts:c,regions:E,autoFulfillment:f,reviewParameter:p="FALSE",publishParameter:S="FALSE"}=t,g={title:s,description:u,profile:null!=d?d:void 0,terms_of_service:{type:"OFFLINE"},targets:{accounts:c.length>0?c:void 0,regions:E.length>0?E:void 0},auto_fulfillment:f?{refresh_type:f.refreshType,refresh_schedule:f.refreshSchedule}:void 0};return new o.L().add("CREATE LISTING IDENTIFIER(?) FOR SHARE IDENTIFIER(?) AS {} DISTRIBUTION={} REVIEW={} PUBLISH={}",(0,r.M)(e),(0,r.M)(n),(0,i.Z)(g,{forceQuotes:!0}),(0,a.V)(l),(0,a.V)(p),(0,a.V)(S)).toQuery()}},351886:function(e,t,n){n.d(t,{a:()=>o.a});var o=n(783624)},978358:function(e,t,n){n.d(t,{_:()=>a});var o=n(690908),r=n(868646);let a=e=>new o.L().add("DROP LISTING IDENTIFIER(?)",(0,r.M)(e)).toQuery()},755218:function(e,t,n){n.d(t,{_:()=>o._});var o=n(978358)},543495:function(e,t,n){n.d(t,{s:()=>l});var o=n(690908),r=n(868646),a=n(944799),i=n(633445);let l=({id:e,alterProps:t,descPrefix:n})=>{let{listingDetails:l}=t,s=(0,i.f)(l);return{alterSqlQuery:new o.L("ALTER LISTING IDENTIFIER(?) AS {}",(0,r.M)(e),(0,a.Z)(s,{forceQuotes:!0})).toQuery(),desc:`${n}-edit`}}},93694:function(e,t,n){n.d(t,{g:()=>s});var o=n(739732),r=n(543495),a=n(46906),i=n(262963);let l={[o.d.EDIT]:r.s,[o.d.PUBLISH]:a.F,[o.d.UNPUBLISH]:i.r},s=e=>{let{alterSqlQuery:t,desc:n,newName:o}=(0,l[e.alterProps.alterType])(e);return{alters:[{...t,desc:n.replaceAll("_","-").toLowerCase()}],newName:null!=o?o:""}}},786391:function(e,t,n){n.d(t,{g:()=>o.g});var o=n(93694)},46906:function(e,t,n){n.d(t,{F:()=>a});var o=n(690908),r=n(868646);let a=({id:e,descPrefix:t})=>({alterSqlQuery:new o.L("ALTER LISTING IDENTIFIER(?) PUBLISH",(0,r.M)(e)).toQuery(),desc:`${t}-publish`})},262963:function(e,t,n){n.d(t,{r:()=>a});var o=n(690908),r=n(868646);let a=({id:e,descPrefix:t})=>({alterSqlQuery:new o.L("ALTER LISTING IDENTIFIER(?) UNPUBLISH",(0,r.M)(e)).toQuery(),desc:`${t}-unpublish`})},633445:function(e,t,n){n.d(t,{f:()=>o.f});var o=n(356769)},356769:function(e,t,n){n.d(t,{f:()=>s});var o=n(326290),r=n.n(o),a=n(934835),i=n(108145),l=n(596208);let s=e=>{var t,n,o,s,u,d;let c=(0,l.T)(e.resources),E=(0,i.q)(e.dataDictionary);return{title:e.title,subtitle:null!=(t=e.subtitle)?t:void 0,description:null!=(n=e.description)?n:void 0,custom_contact:null!=(o=e.customContact)?o:void 0,profile:null!=(s=e.profile)?s:void 0,terms_of_service:{type:e.termsOfService.type,link:null!=(u=e.termsOfService.link)?u:void 0},auto_fulfillment:e.autoFulfillment?{refresh_type:e.autoFulfillment.refreshType,refresh_schedule:e.autoFulfillment.refreshSchedule}:void 0,business_needs:e.businessNeeds,targets:{accounts:e.targetAccounts,regions:e.regions},usage_examples:e.usageExamples,categories:e.categories,resources:c,data_attributes:e.dataAttributes?{refresh_rate:e.dataAttributes.refreshRate,geography:{geo_option:e.dataAttributes.geography.geoOption,granularity:e.dataAttributes.geography.granularity,coverage:e.dataAttributes.geography.coverage},time:(0,a.l)(e.dataAttributes.time,r()),features:null!=(d=e.dataAttributes.features)?d:void 0}:void 0,data_dictionary:E}}},108145:function(e,t,n){n.d(t,{q:()=>o});let o=e=>{if(e)return{featured:e}}},596208:function(e,t,n){n.d(t,{T:()=>o});let o=e=>{var t,n;if(e)return{documentation:null!=(t=e.documentation)?t:void 0,media:null!=(n=e.media)?n:void 0}}},14542:function(e,t,n){n.d(t,{FX:()=>h,Iq:()=>A,Pl:()=>b,S6:()=>m,SN:()=>S,Wh:()=>v,X7:()=>N,YY:()=>E,_w:()=>_,cC:()=>p,cQ:()=>g,i4:()=>f,ll:()=>I,ny:()=>L,qz:()=>T,sq:()=>y,wS:()=>R,yu:()=>O,zZ:()=>C});var o=n(783844),r=n(408015),a=n(677967),i=n(316758),l=n(690908),s=n(868646),u=n(833030),d=n(94587),c=n(128659);function E(e){return new l.L().add("CALL {}!GET_SPENDING_LIMIT();",(0,s.M)(e)).toQuery()}function f(e){return new l.L().add("CALL {}!GET_NOTIFICATION_INTEGRATION_NAME();",(0,s.M)(e)).toQuery()}function p(e){return new l.L().add("CALL {}!GET_NOTIFICATION_EMAIL();",(0,s.M)(e)).toQuery()}function S(e,t){let{lowerBound:n,upperBound:o}=t;return new l.L().add("CALL {}!get_spending_history({}, {})",(0,s.M)(e),(0,d.i)(n),(0,d.i)(o)).toQuery()}function g(e){return new l.L().add("CREATE SNOWFLAKE.CORE.BUDGET {}();",(0,s.M)(e)).toQuery()}function _(e,t){return new l.L().add("CALL {}!SET_SPENDING_LIMIT({});",(0,s.M)(e),(0,u._)(t)).toQuery()}function h(e,t){return new l.L().add("CALL {}!SET_EMAIL_NOTIFICATIONS({});",(0,s.M)(e),(0,d.i)(t)).toQuery()}function m(){return new l.L("CALL SYSTEM$SHOW_BUDGETS_IN_ACCOUNT();").toQuery()}function I(){return new l.L("CALL SYSTEM$SHOW_BUDGET_DETAILS_IN_ACCOUNT();").toQuery()}function T(e){return new l.L().add("CALL {}!ACTIVATE();",(0,s.M)(e)).toQuery()}function R(e){return new l.L().add("CALL {}!DEACTIVATE();",(0,s.M)(e)).toQuery()}function v(e,t){return new l.L("ALTER SNOWFLAKE.CORE.BUDGET {} RENAME TO {};",(0,s.M)(e),(0,s.M)(t)).toQuery()}let C=e=>{let{inclusiveDateRange:t,timezone:n,serviceType:o,budgetId:u}=e,{lowerBound:c,upperBound:E}=(0,i.A)(t),f=(0,a.f)(t);return new l.L().add("CALL {}!GET_SERVICE_TYPE_USAGE({}, {}, {}, {}, {});",(0,s.M)(u),(0,d.i)(o),(0,d.i)(f),(0,d.i)(n||"UTC"),(0,d.i)((0,r.c)(c)),(0,d.i)((0,r.c)(E))).toQuery()},y=e=>new l.L().add("CALL {}!get_linked_resources();",(0,s.M)(e)).toQuery(),N=e=>new l.L().add("CALL {}!get_linked_tags();",(0,s.M)(e)).toQuery(),A=e=>new l.L().add("CALL {}!get_activation_date();",(0,s.M)(e)).toQuery(),b=(e,t)=>{if(t.type===o.M.TAG){let{tagName:n,tagValue:o}=(0,c.Q)(t);return new l.L().add("CALL {}!ADD_TAG((SELECT SYSTEM$REFERENCE('TAG', {}, 'SESSION', 'APPLYBUDGET')), {});",(0,s.M)(e),(0,d.i)(n),(0,d.i)(o)).toQuery()}let n=t.type===o.M.APPLICATION?o.M.DATABASE:t.type;return new l.L().add("CALL {}!ADD_RESOURCE(SELECT SYSTEM$REFERENCE({}, '{}', 'SESSION', 'APPLYBUDGET'));",(0,s.M)(e),(0,d.i)(n),(0,s.M)(t)).toQuery()},O=(e,t)=>{if(t.type===o.M.TAG){let{tagName:n,tagValue:o}=(0,c.Q)(t);return new l.L().add("CALL {}!REMOVE_TAG((SELECT SYSTEM$REFERENCE('TAG', {}, 'SESSION', 'APPLYBUDGET')), {});",(0,s.M)(e),(0,d.i)(n),(0,d.i)(o)).toQuery()}let n=t.type===o.M.APPLICATION?o.M.DATABASE:t.type;return new l.L().add("CALL {}!REMOVE_RESOURCE(SELECT SYSTEM$REFERENCE({}, '{}', 'SESSION', 'APPLYBUDGET'));",(0,s.M)(e),(0,d.i)(n),(0,s.M)(t)).toQuery()};function L(e){return new l.L().add("CALL {}!GET_CONFIG();",(0,s.M)(e)).toQuery()}},23917:function(e,t,n){n.d(t,{BW:()=>f,CG:()=>p,DS:()=>h,Hb:()=>m,M0:()=>S,Qo:()=>R,Rf:()=>v,Tp:()=>I,U9:()=>N,V1:()=>g,YK:()=>C,cA:()=>y,fd:()=>T,iv:()=>_,oh:()=>A});var o=n(783844),r=n(690908),a=n(67158),i=n(868646),l=n(833030),s=n(908545),u=n(657452),d=n(94587),c=n(244983),E=n(144306);function f(e){return new r.L().add("ALTER {} {} CHECKOUT;",(0,s.T)(e.type),(0,i.M)(e)).toQuery()}function p(e){return new r.L().add("SHOW CHECKOUTS IN {} {};",(0,s.T)(e.type),(0,i.M)(e)).toQuery()}function S(e){return new r.L().add("CALL SYSTEM$SHOW_WAREHOUSES_FOR_FILE_BASED_ENTITY({});",(0,d.i)(e)).toQuery()}function g(e){return new r.L().add("CALL SYSTEM$SHOW_SCHEMAS_IN_ACCOUNT_WITH_CREATE_FILE_BASED_ENTITY({});",(0,d.i)(e)).toQuery()}function _(e){return e.params?function({entityId:e,scheduleName:t,scheduleCronExpression:n,scheduleTimezone:a,warehouse:l,params:s}){return new r.L(`CREATE TASK IDENTIFIER(?) WAREHOUSE={} SCHEDULE={} CONFIG=$$${(0,E.J)([{id:0,key:"params",value:null!=s?s:""}])}$$ AS BEGIN LET PARAMS STRING := SYSTEM$GET_TASK_GRAPH_CONFIG('params')::string; EXECUTE {} {}(:PARAMS); END;`,(0,i.M)({type:o.M.TASK,name:t,database:e.database,schema:e.schema}),(0,d.i)(l),(0,d.i)(`USING CRON ${n} ${null!=a?a:"UTC"}`),(0,c.V)(e.type),(0,i.M)(e)).toQuery()}(e):function({entityId:e,scheduleName:t,scheduleCronExpression:n,scheduleTimezone:a,warehouse:l}){return new r.L("CREATE TASK IDENTIFIER(?) WAREHOUSE={} SCHEDULE={} AS EXECUTE {} {}();",(0,i.M)({type:o.M.TASK,name:t,database:e.database,schema:e.schema}),(0,d.i)(l),(0,d.i)(`USING CRON ${n} ${null!=a?a:"UTC"}`),(0,c.V)(e.type),(0,i.M)(e)).toQuery()}(e)}function h(e){return new r.L().add("ALTER TASK IDENTIFIER(?) RESUME",(0,i.M)(e)).toQuery()}function m(e,{from:t,live:n,versionAlias:o}){let a=new r.L("ALTER {} {} ADD",(0,s.T)(e.type),(0,i.M)(e));return n&&a.add("LIVE"),a.add("VERSION"),o&&!1===/^live$/iu.test(o)&&a.add("{}",(0,d.i)(o)),a.add("FROM {}",null==t||"last"===t?(0,c.V)("LAST"):(0,u.F)(t.gitRepository,t.path)).toQuery()}function I(e){return new r.L("ALTER {} {} COMMIT;",(0,s.T)(e.type),(0,i.M)(e)).toQuery()}function T(e,{username:t,password:n,name:o,email:a,comment:l,secret:c,to:E}){let f=new r.L("ALTER {} {} PUSH",(0,s.T)(e.type),(0,i.M)(e));return E&&f.add("TO {}",(0,u.F)(E.gitRepository,E.path)),c&&f.add("GIT_CREDENTIALS={}",(0,i.M)(c)),t&&f.add("USERNAME={}",(0,d.i)(t)),n&&f.add("PASSWORD={}",(0,d.i)(n)),o&&f.add("NAME={}",(0,d.i)(o)),a&&f.add("EMAIL={}",(0,d.i)(a)),l&&f.add("COMMENT={}",(0,d.i)(l)),f.toQuery()}function R(e,t=!1){let n=new r.L("ALTER {} {} PULL",(0,s.T)(e.type),(0,i.M)(e));return t&&n.add("ENABLE_MANUAL_CONFLICT_RESOLUTION=true"),n.toQuery()}function v({entityId:e,maxRuns:t}){return new r.L().add("CALL SYSTEM$LIST_FILE_BASED_ENTITY_EXECUTIONS({}, {}, {});",(0,d.i)(e.type),(0,d.i)((0,a.m)(e)),(0,l._)(t)).toQuery()}function C({entityId:e,queryId:t}){return new r.L().add("CALL SYSTEM$GET_FILE_BASED_ENTITY_EXECUTION({}, {}, {});",(0,d.i)(e.type),(0,d.i)((0,a.m)(e)),(0,d.i)(t)).toQuery()}function y(e,t){return new r.L(`ALTER {} IDENTIFIER(?) EXECUTE AS ${t}`,(0,s.T)(e.type),(0,i.M)(e)).toQuery()}function N(e,t){return new r.L("ALTER {} IDENTIFIER(?) RENAME TO IDENTIFIER(?)",(0,s.T)(e.type),(0,i.M)(e),(0,i.M)(t)).toQuery()}function A(e,t,n){return new r.L("ALTER {} IDENTIFIER(?) MOVE TO SCHEMA IDENTIFIER(?) GRANT OWNERSHIP TO ROLE IDENTIFIER(?)",(0,s.T)(e.type),(0,i.M)(e),(0,i.M)(t),(0,d.i)(n)).toQuery()}},128659:function(e,t,n){n.d(t,{Q:()=>o});let o=e=>{var t;let n=(null==e||null==(t=e.database)?void 0:t.replace("/","."))||"",[o="",r=""]=e.name.split("/");return{tagName:[...n&&[n],o].join("."),tagValue:r}}},998269:function(e,t,n){n.d(t,{Y:()=>r});var o,r=((o={}).terse="terse",o.show="show",o.describe="describe",o.grants="grants",o.grants_to="grants_to",o.grants_of="grants_of",o.grantable_privileges="grantable_privileges",o.future_grants="future_grants",o.visible_grants="visible_grants",o.replication_information="replication_information",o.get_ddl="get_ddl",o.bootstrap="bootstrap",o.organization_account_info="organization_account_info",o.external_table="external_table",o.query_result="query_result",o.query_history="query_history",o.query_plan="query_plan",o.user_name="user_name",o.preview="preview",o.inbound_shares="inbound_shares",o.outbound_shares="outbound_shares",o.outbound_share_details="outbound_share_details",o.share_properties="share_properties",o.provider_data_dictionary_shared_object_list="provider_data_dictionary_shared_object_list",o.pwd_change_info="pwd_change_info",o.edition="edition",o.available_databases="available_databases",o.replication="replication",o.available_roles="available_roles",o.mfa="mfa",o.mfa_optin="mfa_optin",o.authorized_actions="authorized_actions",o.metrics="metrics",o.utilization="utilization",o.cluster_utilization="cluster_utilization",o.org_contract_balance="org_contract_balance",o.anaconda_terms="anaconda_terms",o.gov_marketplace_terms="gov_marketplace_terms",o.is_marketplace_terms_accepted="is_marketplace_terms_accepted",o.marketplace_terms="marketplace_terms",o.columns="columns",o.tag_references="tag_references",o.tag_references_internal="tag_references_internal",o.related_listings="related_listings",o.tag_references_all_columns="tag_references_all_columns",o.policy_references="policy_references",o.list_entities_bottomup_check="list_entities_bottomup_check",o.entity_detail="entity_detail",o.by_name_reference="by_name_reference",o.authorized_operations="authorized_operations",o.popularity_scores="popularity_scores",o.listing_popularity_scores="listing_popularity_scores",o.provider_popularity_scores="provider_popularity_scores",o.category_popularity_scores="category_popularity_scores",o.listing_category_mapping="listing_category_mapping",o.database_refresh_history="database_refresh_history",o.imported_databases="imported_databases",o.listing_database_replication_schedules="listing_database_replication_schedules",o.listings_all_private_exchanges="listing_all_private_exchanges",o.private_listings_all_public_exchanges="private_listings_all_public_exchanges",o.listing_target_accounts="listing_target_accounts",o.listing_data_dictionary_provider_featured_objects="listing_data_dictionary_provider_featured_objects",o.available_regions="available_regions",o.listing_data_dictionary_consumer_shared_object_list="listing_data_dictionary_consumer_shared_object_list",o.listing_data_dictionary_consumer_featured_objects="listing_data_dictionary_consumer_featured_objects",o.is_database_imported="is_database_imported",o.mcd_properties="mcd_properties",o.listing_replication_schedules="listing_replication_schedules",o.listing_fulfillment_status="listing_fulfillment_status",o.share_validation_for_fulfillment="share_validation_for_fulfillment",o.compatibility_checker_for_fulfillment="compatibility_checker_for_fulfillment",o.terms_acknowledged="terms_acknowledged",o.listing_data_dictionary_consumer_object_details="listing_data_dictionary_consumer_object_details",o.exchange_regions="exchange_regions",o.spending_limit="spending_limit",o.spending_history="spending_history",o.notification_integration="notification_integration",o.notification_email="notification_email",o.show_budgets_in_account="show_budgets_in_account",o.show_budget_details_in_account="show_budget_details_in_account",o.resource_usage="resource_usage",o.get_attached_resources="get_attached_resources",o.activation_date="activation_date",o.get_config="get_config",o.get_linked_tags="get_linked_tags",o.password_policy="password_policy",o.application_instances="application_instances",o.application_metadata="application_metadata",o.owned_objects="owned_objects",o.privileges="privileges",o.references="references",o.versions="versions",o.associated_listings="associated_listings",o.release_directives="release_directives",o.version_manifest="version_manifest",o.application_package_file="application_package_file",o.application_package_validation_for_fulfillment="application_package_validation_for_fulfillment",o.dcr_versions_info="dcr_versions_info",o.application_package_size="application_package_size",o.application_package_available_regions="application_package_available_regions",o.show_in_account="show_in_account",o.show_in_account_limit="show_in_account_limit",o.eligible_objects_for_file_based_entity="eligible_objects_for_file_based_entity",o.contact_references_on_object="contact_references_on_object",o.semantic_view_references="semantic_view_references",o)},641392:function(e,t,n){n.d(t,{p:()=>r});var o,r=((o={}).unloaded="unloaded",o.loading="loading",o.loaded="loaded",o.refreshing="refreshing",o.error="error",o)},790757:function(e,t,n){n.d(t,{Q:()=>r});var o,r=((o={}).EDIT_APP_PACKAGE="EDIT_APP_PACKAGE",o.RENAME_APP_PACKAGE="RENAME_APP_PACKAGE",o.ADD_VERSION="ADD_VERSION",o.ADD_PATCH_TO_VERSION="ADD_PATCH_TO_VERSION",o.DROP_VERSION="DROP_VERSION",o.SET_RELEASE_DIRECTIVE="SET_RELEASE_DIRECTIVE",o.SET_DEFAULT_RELEASE_DIRECTIVE="SET_DEFAULT_RELEASE_DIRECTIVE",o.UNSET_RELEASE_DIRECTIVE="UNSET_RELEASE_DIRECTIVE",o.MODIFY_RELEASE_DIRECTIVE="MODIFY_RELEASE_DIRECTIVE",o.REGISTER_VERSION="REGISTER_VERSION",o.DEREGISTER_VERSION="DEREGISTER_VERSION",o)},365222:function(e,t,n){n.d(t,{X:()=>r});var o,r=((o={}).list="list",o.byid="byid",o.forwardId="forwardid",o)},739732:function(e,t,n){n.d(t,{d:()=>r});var o,r=((o={}).EDIT="EDIT",o.PUBLISH="PUBLISH",o.UNPUBLISH="UNPUBLISH",o)},60501:function(e,t,n){n.d(t,{j:()=>r});var o=n(365222);function r(e){return(null==e?void 0:e.resultType)===o.X.byid}},832072:function(e,t,n){n.d(t,{D:()=>r});var o=n(641392);function r(e){return(null==e?void 0:e.loadState)===o.p.error&&void 0==e.result&&void 0==e.resultType}},237627:function(e,t,n){n.d(t,{n:()=>r});var o=n(783844);function r(e){return e.type===o.M.NOTEBOOK||e.type===o.M.STREAMLIT}},227533:function(e,t,n){n.d(t,{g:()=>r});var o=n(365222);function r(e){return(null==e?void 0:e.resultType)===o.X.list}},3291:function(e,t,n){n.d(t,{M:()=>r});var o=n(641392);function r(e){return(null==e?void 0:e.loadState)===o.p.loading}},649957:function(e,t,n){n.d(t,{O:()=>o});function o(e){return!!(null==e?void 0:e.isRefreshing)}},481642:function(e,t,n){n.d(t,{l:()=>r});var o,r=((o={}).ADD="ADD",o.REMOVE="REMOVE",o.CLEAR="CLEAR",o)},610329:function(e,t,n){n.d(t,{G:()=>i,z:()=>a});var o,r,a=((o={}).START="START",o.STOP="STOP",o.RESTART="RESTART",o.RESET="RESET",o.PAUSE="PAUSE",o),i=((r={}).IDLE="IDLE",r.RETRYING="RETRYING",r.PAUSED="PAUSED",r)},561993:function(e,t,n){n.d(t,{i:()=>i});var o=n(467131),r=n(587393),a=n(610329);function i(e,t,n){let i,l=0,s=0,u=0,d=1,{maxRetries:c=20,exponent:E=1.5,interval:f=1,constantRetryTimeInSec:p,maxBackOffIntervalInSec:S=45,shouldPauseOnInactive:g=!0,enableBackOffOnPollingFailures:_=!1,maxPollingFailuresBeforeBackOff:h=5,enforceMaxRetryOnConsecutivePollFailures:m=!1}=n||{},I=null==n?void 0:n.customBackOffTimer,T=e,R=a.G.IDLE,v={[a.z.STOP]:[]},C=()=>"hidden"===document.visibilityState&&R===a.G.RETRYING?void w(a.z.PAUSE):"visible"===document.visibilityState&&R===a.G.PAUSED?void w(a.z.RESTART):void 0,y=()=>{g&&document.removeEventListener("visibilitychange",C,!1)},N=0,A=()=>{clearTimeout(l),d=1,l=0,s=0,N=0,i=void 0},b=()=>{let e=d>c&&!p||N>c&&m;v[a.z.STOP].forEach(t=>t(e,i))},O=e=>{let t=e;if(I){let t=Math.max(u,I(e,d,N,n));return u=0,t}!p||p&&N>=h?(t+=Number(Math.pow(f*E,_?N:d).toFixed(2)),t=Math.min(t,S)):t=p;let r=u>t?u:t;return u>0&&o.cM.info(`Retriable backoff set: ${r} ${new Date}`),u=0,r},L=async()=>{if(R===a.G.RETRYING){if((null==t?void 0:t.isUserIdle())&&g){o.cM.info("Retriable User idle. Skipping retry"),s||(s=O(s)),l=window.setTimeout(L,1e3*s);return}if(d>c&&!p)return o.cM.info("Retriable Max retries reached. Stopping retries"),M(a.G.IDLE);try{await T(),N=0,i=void 0}catch(e){o.cM.error(Error(`Retriable Async function execution failed with: ${e}`)),e instanceof r.M&&(u=e.retryAfterMs/1e3,o.cM.info(`Retriable Have Http429, setting "minBackoffTimeFrom429" to ${u} ${new Date}`)),N+=1,i=e}if(m&&N>c)return o.cM.info("Retriable Max retries reached. Stopping retries"),M(a.G.IDLE);R===a.G.RETRYING&&(d+=1,s=O(s),l=window.setTimeout(L,1e3*s))}},k={[a.G.IDLE]:{[a.G.RETRYING]:{action:[L,()=>{g&&document.addEventListener("visibilitychange",C,!1)}]}},[a.G.PAUSED]:{[a.G.IDLE]:{action:[b,A,y]},[a.G.RETRYING]:{action:L}},[a.G.RETRYING]:{[a.G.IDLE]:{action:[b,A,y]},[a.G.PAUSED]:{action:()=>clearTimeout(l)}}},M=e=>{if(k[R][e]){let t=k[R][e];R=e,t&&("function"==typeof t.action&&t.action(),Array.isArray(t.action)&&t.action.map(e=>e()))}},w=(e,t)=>{switch(e){case a.z.RESTART:M(a.G.IDLE),M(a.G.RETRYING);break;case a.z.STOP:M(a.G.IDLE);break;case a.z.START:M(a.G.RETRYING);break;case a.z.PAUSE:M(a.G.PAUSED);break;case a.z.RESET:{let e=R;M(a.G.IDLE);let{asyncFunction:n,retriableOptions:o}=t||{};n&&(T=n),o&&(c=o.maxRetries||c,E=o.exponent||E,f=o.interval||f,p=o.constantRetryTimeInSec||p,S=o.maxBackOffIntervalInSec||S,g=o.shouldPauseOnInactive||g,_=o.enableBackOffOnPollingFailures||_,h=o.maxPollingFailuresBeforeBackOff||h,m=o.enforceMaxRetryOnConsecutivePollFailures||m),M(e)}break;default:throw`Unrecognized event: ${e}`}};return{start:()=>w(a.z.START),stop:()=>w(a.z.STOP),restart:()=>w(a.z.RESTART),reset:e=>w(a.z.RESET,e),currentState:()=>R,onStop:e=>(v[a.z.STOP].includes(e)||v[a.z.STOP].push(e),()=>{let t=v[a.z.STOP].indexOf(e);-1!==t&&v[a.z.STOP].splice(t,1)})}}},493098:function(e,t,n){n.d(t,{IG:()=>f,cf:()=>E,cs:()=>S});var o,r=n(184168),a=n(751544),i=n(77822),l=n(429207),s=n(336902),u=n(100591),d=n(233174),c=n(499924),E=((o={}).WEB_SOCKET_LOGGING="WEB_SOCKET_LOGGING",o.NOTEBOOK_EDIT_LOCK_CHECK="NOTEBOOK_EDIT_LOCK_CHECK",o.NOTEBOOK_EDIT_STATUS_SHORT_POLL="NOTEBOOK_EDIT_STATUS_SHORT_POLL",o);function f(e){return"true"===localStorage.getItem(p(e))}function p(e){return`debug:${e}`}function S({onHide:e}){let t=(0,c.useRef)(null),[n,o]=(0,a._)(p("WEB_SOCKET_LOGGING"),!1),[E,f]=(0,a._)(p("NOTEBOOK_EDIT_LOCK_CHECK"),!1),[S,g]=(0,a._)(p("NOTEBOOK_EDIT_STATUS_SHORT_POLL"),!1);return(0,r.jsxs)(i.Vq,{manuallyShown:!0,causalElement:t,onHide:e,children:[(0,r.jsx)(i.fK,{children:"Debug menu"}),(0,r.jsxs)(i.a7,{children:[(0,r.jsxs)(l.X,{align:"justify",children:[(0,r.jsx)(s._,{htmlFor:"log-web-socket-setting",children:"Log web socket messages"}),(0,r.jsx)(u.r,{id:"log-web-socket-setting",checked:n,onChange:()=>o(!n),value:"1"})]}),(0,r.jsxs)(l.X,{align:"justify",marginTop:12,children:[(0,r.jsx)(s._,{htmlFor:"log-notebook-edit-lock-check",children:"Log notebook concurrent edit check"}),(0,r.jsx)(u.r,{id:"log-notebook-edit-lock-check",checked:E,onChange:()=>f(!E),value:"1"})]}),(0,r.jsxs)(l.X,{align:"justify",verticalAlign:"middle",marginTop:12,children:[(0,r.jsx)(s._,{htmlFor:"log-notebook-edit-lock-poll",children:"Use short poll frequency for notebook edit status (10s)"}),(0,r.jsx)(u.r,{id:"log-notebook-edit-lock-poll",checked:S,onChange:()=>g(!S),value:"1"})]})]}),(0,r.jsx)(i.cN,{children:(0,r.jsx)(d.zx,{use:"primary",onClick:e,children:"Close"})})]})}S.displayName="DebugMenuDialog"},408015:function(e,t,n){n.d(t,{c:()=>o});function o(e){return`${e.format("YYYY-MM-DD")}T00:00:00Z`}},677967:function(e,t,n){n.d(t,{f:()=>a});var o=n(767793),r=n(860194);let a=(e,t)=>(0,o.d)(e)?"month":(0,r.e)(e)||t?"day":"hour"},316758:function(e,t,n){n.d(t,{A:()=>o});function o(e){let t=e.endDate.clone().add(1,e.unitOfTime);return{lowerBound:e.startDate.clone(),upperBound:t}}},767793:function(e,t,n){n.d(t,{d:()=>o});function o({startDate:e,endDate:t}){return t.diff(e,"months",!0)>6}},860194:function(e,t,n){function o({startDate:e,endDate:t}){return t.diff(e,"days")>7}function r({startDate:e,endDate:t}){return t.diff(e,"days")>0}n.d(t,{e:()=>o,f:()=>r})},934835:function(e,t,n){n.d(t,{l:()=>function e(t,n){return r()(t)?t.map(t=>e(t,n)):i()(t)?s()(d()(t,t=>e(t,n)),(e,t)=>n(t)):t}});var o=n(268598),r=n.n(o),a=n(303266),i=n.n(a),l=n(84676),s=n.n(l),u=n(297561),d=n.n(u)},709711:function(e,t,n){n.d(t,{CZ:()=>p,LU:()=>f,pD:()=>d,q$:()=>c,qv:()=>E,uf:()=>u});var o=n(794221),r=n.n(o),a=n(759388),i=n.n(a);let l=[["",1],["K",1e3],["M",1e6],["B",1e9],["T",1e12]],s=(e=0)=>0===e?"0,0":`0,0.${"0".repeat(e)}`,u=(e,t=1)=>{let n=r()(e)?0:t;return i()(e).format(s(n))};function d(e,t=!1){let n=0;e>=3600&&(n=Math.floor(e/3600));let o="";return n>0&&(o+=String(n),t?(o+=" hour",n>1&&(o+="s")):o+="h"),o}function c(e,t=!1){let n=0;e>=60&&(n=Math.floor(e/60));let o="";return n>0&&(o+=String(n),t?(o+=" minute",n>1&&(o+="s")):o+="m"),o}function E(e){return e>=1e3?f(e/1e3):`${e.toFixed(0)}ms`}function f(e,t=!1,n=!1){let o=e,r=d(o,t);r.length&&(r+=" ");let a=+(o<10);o>=3600&&(o%=3600);let i=c(o,t);return i.length&&(r+=`${i} `),o>=60&&(o%=60),t?(n&&r.length&&(r+="and "),o>=60?r+=`${o.toFixed(a)} second`:Number.isInteger(o)?r+=`${o} second`:r+=`${o.toFixed(a)} second`,o>1&&(r+="s")):r+=`${o.toFixed(a)}s`,r}let p=(e,t,n)=>S(e,t,n,l),S=(e,t,n,o)=>{let r=0,a="";if(e<0)return"";for(let t=o.length-1;t>=0;t--)if(e/o[t][1]>=1){a=o[t][0],r=o[t][1];break}0===r&&(r=1);let i=u(e/(r||1),t)+a;return n&&1!==r?`${i} (${u(e,t)})`:i}},369497:function(e,t,n){n.d(t,{c:()=>i});var o=n(783844),r=n(868646),a=n(908545);function i(e,t){if(t.type===o.M.EXTERNAL_TABLE)e.add("{} IDENTIFIER(?)",(0,a.T)(o.M.TABLE),(0,r.M)(t));else if(t.type===o.M.ML_MODEL_VERSION){let n={database:t.database,schema:t.schema,name:t.module,type:o.M.ML_MODEL};e.add("MODEL IDENTIFIER (?) MODIFY VERSION {}",(0,r.M)(n),{bindingsJSONRepr:t.name,inlineRepr:t.name})}else e.addFullyQualifiedIdentifier(t)}},371743:function(e,t,n){n.d(t,{J:()=>a});var o=n(581775),r=n(516727);function a(e,t){let n=(0,o.v)(e);if(7!==n.length)throw Error(`Invalid identifier: '${e}'`);let a=n[1],i=n[3],l=n[5];return{type:t,database:(0,r.b)(a),schema:(0,r.b)(i),name:(0,r.b)(l)}}},931147:function(e,t,n){n.d(t,{m:()=>a});let o=/(\([^\(\)]+\))\s*RETURN/u,r=/(\(.+\))\s*/u;function a(e){if(!e)return"";let t=e.match(o),n=e.match(r);return t&&t.length>1?t[1]:n&&n.length>1?function(e){let t=e;if(!t)return"";let n=t.indexOf(" RETURN");if(-1===n&&(n=t.length),-1===(n=(t=t.slice(0,n)).lastIndexOf(")"))||-1===(n=t.lastIndexOf(")")))return"()";let o=n-1,r=1;for(;o>=0&&r>0;)")"===t[o]?r+=1:"("===t[o]&&(r-=1),o-=1;return 0!==r?"()":t.slice(o+1,n+1)||"()"}(e):"()"}},884407:function(e,t,n){n.d(t,{L:()=>r});var o=n(931147);function r(e){if(!e)return{name:"",args:""};let t=(0,o.m)(e),n=e.indexOf(t);return -1===n?{name:e,args:"()"}:{args:t,name:e.slice(0,n)}}},183021:function(e,t,n){n.d(t,{M:()=>i});var o=n(690908),r=n(369497),a=n(868646);function i(e,t,n){let i=new o.L("alter");return(0,r.c)(i,e),i.add("rename to IDENTIFIER(?)",(0,a.M)({...e,name:t})),void 0!==n&&i.add("save_old_url = "+n),i.toQuery()}},150543:function(e,t,n){n.d(t,{$:()=>a});var o=n(470946),r=n(645807);function a(e){let{database:t,schema:n,name:a}=e;return[t,n,a].map(e=>(0,r.v)((0,o.H)(e))).join(".")}},581775:function(e,t,n){n.d(t,{v:()=>o});function o(e){return e.split(/((?:[^."]|"(?:[^"]|"")*")+)/u)}},776983:function(e,t,n){n.d(t,{D:()=>r});var o=n(470946);function r(e,t){return{inlineRepr:e.map(e=>t?`'${e}'`:`${(0,o.H)(e)}`).join(",")}}},988209:function(e,t,n){n.d(t,{S:()=>o});function o(e){if(!!e!==e)throw Error("Didn't pass a boolean");return{bindingsJSONRepr:e,inlineRepr:String(e)}}},971478:function(e,t,n){n.d(t,{j:()=>o});function o(e){if(!/^[A-Za-z0-9_]+(\([0-9, ]+\))?$/u.test(e))throw Error(`String is not a valid datatype: ${e}`);return{inlineRepr:e}}},253833:function(e,t,n){n.d(t,{e:()=>o});function o(e){if(!e.match(/^[A-Za-z_][A-Za-z_0-9]*$/))throw Error(`String is not a valid keyword: ${e}`);return{inlineRepr:e}}},610280:function(e,t,n){n.d(t,{a:()=>o});function o(e){if(!e.match(/^[A-Za-z_][A-Za-z0-9_ ]*$/))throw Error(`String is not a valid set of keywords: ${e}`);return{inlineRepr:e}}},833030:function(e,t,n){n.d(t,{_:()=>o});function o(e){if(!Number.isFinite(e))throw Error("Didn't pass a finite number");return{bindingsJSONRepr:e,inlineRepr:String(e)}}},802402:function(e,t,n){n.d(t,{M:()=>o});function o(e){return{inlineRepr:e}}},11043:function(e,t,n){n.d(t,{Q:()=>r});var o=n(150543);function r(e){let t=`'@${(0,o.$)(e)}'`;return{bindingsJSONRepr:t,inlineRepr:t}}},657452:function(e,t,n){n.d(t,{F:()=>a});var o=n(470946),r=n(150543);function a(e,t){let n=`'@${(0,r.$)(e)}/${(0,o.H)(t)}'`;return{bindingsJSONRepr:n,inlineRepr:n}}},72949:function(e,t,n){n.d(t,{K:()=>r});var o=n(470946);function r(e){return{inlineRepr:e.map(e=>`'${(0,o.H)(e)}'`).join(",")}}},223819:function(e,t,n){n.d(t,{t:()=>r});var o=n(645807);let r=e=>{let t=(0,o.v)(e);return{bindingsJSONRepr:t,inlineRepr:t}}},944799:function(e,t,n){n.d(t,{Z:()=>r});var o=n(772598);function r(e,t){let n=o.$w(e,t);return{inlineRepr:`$$${n}$$`}}},802118:function(e,t,n){n.d(t,{RT:()=>l,Z2:()=>i,ZL:()=>a});var o,r=n(516727),a=((o={}).OnlyWhenFullySurrounding="onlyWhenFullySurrounding",o.WhenAtLeastOnOneSide="whenAtLeastOnOneSide",o);function i(e,t="onlyWhenFullySurrounding"){return e?l(e,t):e}function l(e,t="onlyWhenFullySurrounding"){let n,o=(0,r.b)(e);if(e!==o)return o;return n=e,"whenAtLeastOnOneSide"===t&&n?('"'===n.charAt(0)&&(n=n.substr(1,n.length-1)),'"'===n.charAt(n.length-1)&&(n=n.substr(0,n.length-1))):n&&'"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substr(1,n.length-2)),n}},902417:function(e,t,n){n.d(t,{U:()=>d});var o=n(51723),r=n(975477),a=n.n(r),i=n(499924),l=n(475165),s=n(750671),u=n(254759);function d(e,t,n,r){var d;let c=i.useContext(u.L),E=(0,s.h)(null==c||null==(d=c.user)?void 0:d.api,"UserStore is not loaded"),f=i.useContext(o.TelemetryPerformanceContext);return(0,i.useMemo)(()=>({executeQuery:(o,i,s,u,d)=>{var c,p,S,g,_,h,m,I,T;return c=E,p=o,S=e,g=n,_=i,h=s,m=u,I=r,T={profiler:f,secondaryRoles:t,...d},(0,l.O)(I,{getCacheKey:()=>{var e;let t={sqlQuery:p,currentRole:S,currentWarehouse:g,description:_,fetchId:h,hideFromQueryHistory:m,secondaryRoles:null==T?void 0:T.secondaryRoles},n=null==T||null==(e=T.requestContext)?void 0:e.userKey;return n&&(t[n]=n),a()(t)},getData:async()=>{var e;let t=null==T||null==(e=T.profiler)?void 0:e.group(`executeSqlQuery:${_}`);null==t||t.addContext("role",S),null==t||t.addContext("warehouse",g),null==t||t.addContext("sqlText",p.sqlText),null==t||t.addContext("pid",null==T?void 0:T.pid);try{return null==t||t.start(),{tableData:await c.query(p,{isInternal:m,role:S,warehouse:g,desc:_,context:null==T?void 0:T.context,requestContext:null==T?void 0:T.requestContext,pid:null==T?void 0:T.pid,secondaryRoles:null==T?void 0:T.secondaryRoles}),timestamp:new Date(Date.now())}}finally{null==t||t.end()}}})}}),[E,r,f,e,t,n])}},782649:function(e,t,n){n.d(t,{O:()=>E,l:()=>f});var o=n(237257),r=n(975477),a=n.n(r),i=n(499924),l=n(475165),s=n(433915),u=n(854162),d=n(172274),c=n(702268);let[E,f]=(0,o.Z)(()=>(function(){let e=(0,s.b)(),t=(0,i.useCallback)(async(t,n,o,r=u.U.urc.requestContext())=>{var a;let i=await (0,l.O)(e,{getCacheKey:()=>{var e;return p(t,n,o,null!=(e=r.role)?e:"")},getData:async()=>await (0,d._)(t,n,o,r)});return e.clearEntry(p(t,n,o,null!=(a=r.role)?a:"")),i},[e]),n=(0,i.useCallback)(async(t,n,o,r,a=u.U.urc.requestContext())=>{let i=await (0,c.u)(t,n,o,r,a);if(i.success){var l;e.clearEntry(p(t,n,o,null!=(l=a.role)?l:""))}return i},[e]);return(0,i.useMemo)(()=>({read:t,write:n}),[t,n])})());function p(e,t,n,o){return a()({role:o,stage:e,path:t,fileName:n})}},168333:function(e,t,n){n.d(t,{J:()=>s,R:()=>u});var o=n(609737),r=n(117043),a=n(11043),i=n(392313);let l="/files/download";async function s(e,t,n,a){return(0,i.a)()?await function(e,t,n,a={}){var i,s;let u=o.flags._DP_DISABLE_DEFAULT_REQUEST_CONTEXT_FOR_STAGE_FILE_OPERATIONS(),d={stage:e,filePath:t,role:u?n.role:null!=(i=n.role)?i:"PUBLIC",secondaryRoles:u?n.secondaryRoles:null!=(s=n.secondaryRoles)?s:"ALL"};return(0,r.nufetchForm)(l,n,{body:JSON.stringify(d),method:"POST",headers:{"Content-Type":"application/json",...a}},"/v1")}(e,t,n,a):await function(e,t,n,a){var i,s,u;let d=o.flags._DP_DISABLE_DEFAULT_REQUEST_CONTEXT_FOR_STAGE_FILE_OPERATIONS(),c=new FormData;return c.set("stage",e),c.set("relativePath",t),c.set("allowUnencryptedReadWrite","true"),d?n.secondaryRoles&&c.set("secondaryRoles",n.secondaryRoles):c.set("secondaryRoles",null!=(i=n.secondaryRoles)?i:"ALL"),(0,r.nufetchForm)(l,d?n:{...n,role:null!=(s=n.role)?s:"PUBLIC",secondaryRoles:null!=(u=n.secondaryRoles)?u:"ALL"},{method:"POST",body:c,...a?{headers:a}:{}})}(e,t,n,a)}function u(e){return(0,a.Q)(e).inlineRepr}},392313:function(e,t,n){n.d(t,{a:()=>a,z:()=>i});var o=n(609737),r=n(740591);function a(){return r.IL.services.featureFlags.isEnabled("UI_ENABLE_WAW_DEX_FEATURE_12")}function i(){return o.flags.UI_ENABLE_WAW_DEX_FEATURE_13()}},447978:function(e,t,n){n.d(t,{L:()=>r});var o=n(407486);function r(e,t){return(0,o.Vo)([e,t],!0)}},407486:function(e,t,n){function o(e){return e?e.startsWith("/")?e:`/${e}`:""}function r(e,t=!1){let n=e.map(e=>e?e.replace(/^\/|\/$/gu,""):"").filter(e=>""!==e).join("/");return t?`/${n}`:n}n.d(t,{Vo:()=>r,yx:()=>o})},172274:function(e,t,n){n.d(t,{J:()=>l,_:()=>i});var o=n(854162),r=n(168333),a=n(447978);async function i(e,t,n,l=o.U.urc.requestContext()){try{let o=await (0,r.J)(e,(0,a.L)(t,n),l,{Accept:"text/plain"});return{success:!0,content:o.textContent,error:null}}catch(e){if(e instanceof Error)return{success:!1,error:e,content:null};return{success:!1,error:Error("Unknown Error"),content:null}}}async function l(e){let{success:t,error:n,content:o}=await e;if(t)return o;throw n}},702268:function(e,t,n){n.d(t,{g:()=>s,u:()=>u});var o=n(609737),r=n(117043),a=n(854162),i=n(392313),l=n(407486);async function s(e,t,n,u,d=a.U.urc.requestContext()){var c,E,f;let p=o.flags._DP_DISABLE_DEFAULT_REQUEST_CONTEXT_FOR_STAGE_FILE_OPERATIONS(),S=new FormData;if(S.set("stage",e),S.set("path",(0,l.yx)(t)||"/"),d.secondaryRoles&&S.set("secondaryRoles",d.secondaryRoles),(0,i.z)()){S.set("fileName",n),p?d.role&&S.set("role",d.role):S.set("role",null!=(c=d.role)?c:"PUBLIC");let e=new URLSearchParams;S.forEach((t,n)=>{e.append(n,t.toString())});let t=`/files/upload?${e.toString()}`;await (0,r.nufetchForm)(t,p?d:{...d,role:null!=(E=d.role)?E:"PUBLIC"},{method:"POST",body:u,headers:{"Content-Type":"application/octet-stream",Accept:"text/plain"}},"/v1")}else S.set("file",new File([u],n)),await (0,r.nufetchForm)("/files/upload",p?d:{...d,role:null!=(f=d.role)?f:"PUBLIC"},{method:"POST",body:S})}async function u(e,t,n,o,r=a.U.urc.requestContext()){try{return await s(e,t,n,o,r),{success:!0,error:null}}catch(e){if(e instanceof Error)return{success:!1,error:e};return{success:!1,error:Error("Unknown Error")}}}},336400:function(e,t,n){n.d(t,{k:()=>a});var o=n(499924),r=n(254759);function a(e){let t=(0,r.m)(["user"]).user;return(0,o.useMemo)(()=>!!t&&t.userRequestContext(e),[t,e])}},906759:function(e,t,n){n.d(t,{Z:()=>g});var o=n(467131),r=n(485387),a=n.n(r),i=n(401824),l=n(117043),s=n(805018),u=n(539509),d=n(982842),c=n(941345),E=n(445060),f=n(198364);class p{async receive(e){}addUpdater(e,t,n){}removeUpdater(e,t,n){}}async function S(){var e,t;if(null==(t=u.X.stores)||null==(e=t.user)?void 0:e.isGuestUser)return;let n=new d.E,o=new p,r=new c.s,a=new f.P(new i.$,n,e=>new E.w(l,e),o,r);await a.restPassthrough("POST","/request/console/bootstrap-data-request",{role:"PUBLIC",isJsonBody:!0,keepAlive:!1},{dataKinds:[]})}let g=new class{registerEventListeners(){document.addEventListener("mousemove",this.onGlobalMouseMoveDebounced),document.addEventListener("mousedown",this.onGlobalMouseDownDebounced),document.addEventListener("visibilitychange",this.onVisibilityChangeHandler)}unregisterEventListeners(){document.removeEventListener("mousemove",this.onGlobalMouseMoveDebounced),document.removeEventListener("mousedown",this.onGlobalMouseDownDebounced),document.removeEventListener("visibilitychange",this.onVisibilityChangeHandler),this.stopUserSessionValidityCheck()}constructor(e={}){this.registerUserActivityListener=e=>{this.onUserActivityListeners.push(e),this.validityCheckTimer||this.registerEventListeners()},this.unregisterUserActivityListener=e=>{this.onUserActivityListeners=this.onUserActivityListeners.filter(t=>t!==e),this.onUserActivityListeners.length||this.unregisterEventListeners()},this.onVisibilityChangeHandler=()=>{"hidden"===document.visibilityState&&(o.cM.info("Tracker: Turning off timers"),this.stopUserSessionValidityCheck()),"visible"===document.visibilityState&&(o.cM.info("Tracker: Turning on timers"),this.startUserSessionValidityCheck())},this.isUserIdle=()=>a()().diff(this.lastView)>6e4,this.checkForSessionValidity=async()=>{if(a()().diff(this.lastView)>6e4){o.cM.info("Tracker: Check","Checking session with bootstrap activity");try{await S()}catch(e){o.cM.error(e,{message:"User session check failed."});return}}this.validityCheckTimer=window.setTimeout(this.checkForSessionValidity,60001)},this.startUserSessionValidityCheck=()=>{this.validityCheckTimer||this.checkForSessionValidity()},this.stopUserSessionValidityCheck=()=>{this.validityCheckTimer&&clearTimeout(this.validityCheckTimer),this.validityCheckTimer=null},this.view=async()=>{let e=a()();this.lastView=e,this.onUserActivityListeners&&this.onUserActivityListeners.forEach(t=>t(e))},this.onGlobalMouseMove=()=>{this.view()},this.onGlobalMouseDown=()=>{this.view()},this.lastView=a()(),this.onUserActivityListeners=e.onViewListeners||[],this.onGlobalMouseMoveDebounced=(0,s.D)(this.onGlobalMouseMove,100),this.onGlobalMouseDownDebounced=(0,s.D)(this.onGlobalMouseDown,100),this.registerEventListeners()}}},962689:function(e,t,n){n.d(t,{fc:()=>s,xK:()=>u,zp:()=>l});var o=n(500140),r=n(499924),a=n(561993),i=n(906759);function l(e,t={}){let{pollingIntervalInSec:n=10,maxBackOffIntervalInSec:o=45,shouldPauseOnInactive:r,enableBackOffOnPollingFailures:s,maxPollingFailuresBeforeBackOff:u}=t;return(0,a.i)(e,i.Z,{maxRetries:1/0,constantRetryTimeInSec:n,maxBackOffIntervalInSec:o,shouldPauseOnInactive:r,enableBackOffOnPollingFailures:s,maxPollingFailuresBeforeBackOff:u})}function s(e,t={}){let[n]=r.useState(l(e,t)),a=(0,o.N)(t);return r.useEffect(()=>{let{pollingIntervalInSec:t=10,maxBackOffIntervalInSec:o=45,shouldPauseOnInactive:r,enableBackOffOnPollingFailures:i,maxPollingFailuresBeforeBackOff:l}=a;n.reset({asyncFunction:e,retriableOptions:{constantRetryTimeInSec:t,maxBackOffIntervalInSec:o,shouldPauseOnInactive:r,enableBackOffOnPollingFailures:i,maxPollingFailuresBeforeBackOff:l}})},[e,a]),r.useEffect(()=>()=>{n.stop()},[n]),n}function u(e,t){let{maxRetries:n,shouldPauseOnInactive:o,enforceMaxRetryOnConsecutivePollFailures:r}=t;return(0,a.i)(e,i.Z,{maxRetries:n,shouldPauseOnInactive:o,enforceMaxRetryOnConsecutivePollFailures:r})}},254759:function(e,t,n){n.d(t,{L:()=>l,m:()=>u});var o=n(500140),r=n(257606),a=n(499924),i=n(621335);let l=a.createContext(void 0),s=()=>{};function u(e,t=s,n=i.I){let d=a.useContext(l),c=(0,o.N)(e.reduce((e,t)=>(e[t]=d[t],e),{})),E=(0,o.N)(Object.keys(c).map(e=>c[e])),f=(0,o.N)({...c,untracked:d}),p=a.useCallback((e,n)=>{t(e,f,n)},[t,f]),S=(0,r.N)(),g=a.useCallback((e,t)=>{n(e,t)&&S()},[S,n]);return a.useEffect(()=>(E.forEach(e=>{e.__subscribe(p,g)}),()=>E.forEach(e=>{e.__unsubscribe(p,g)})),[E,p,g]),f}},551276:function(e,t,n){n.d(t,{d:()=>i});var o=n(609737),r=n(499924),a=n(238257);let i=()=>(0,r.useCallback)(()=>!!o.flags.UI_ENABLE_IS_PRIVATELINK_OVERRIDE_FOR_INTERNAL_TEST()||(0,a.r)(window.location.hostname),[])},317075:function(e,t,n){n.d(t,{E:()=>l,t:()=>i});var o=n(184168),r=n(499924);let a=(0,r.createContext)({data:null,loading:!1,appViewRequestId:"default-request-id"}),i=({bootstrapResult:e,children:t})=>(0,o.jsx)(a.Provider,{value:e,children:t});i.displayName="StreamlitBootstrapDataProvider";let l=()=>(0,r.useContext)(a)},927514:function(e,t,n){n.d(t,{T:()=>s});var o=n(374318),r=n(993914),a=n(482148),i=n(13715),l=n(42218);let s=({error:e,isUserError:t})=>{let n,s,u;if(e instanceof i.Z?n=e.payload:e instanceof l.a||e instanceof Error?n=e.message:"string"==typeof e?n=e:null!=e&&(n="unknown error"),e instanceof o.M){if(s=e.logDetailMessage,!(u=e.externalErrorCause.code)&&e.message){let t=e.message.match(/^(\d+):/u);t&&(u=t[1])}}else e instanceof a.P?u=e.errorCode:e instanceof i.Z?u=e.topic.toString():e instanceof l.a&&(s=e.errors.map(e=>e.message).join(", "));return{error:n,isUserError:t||(0,r.e)(e),errorDetail:s,errorCode:u}}},689708:function(e,t,n){n.d(t,{aR:()=>l,ho:()=>i,ur:()=>a});let o="streamlit-",r=["embed","embed_options","__parentOrigin","__clientVersion"];function a(e){let t=new URLSearchParams;for(let[n,o]of e)!r.includes(n)&&n.length>0&&t.append(n,o);return t}function i({snowsightQueryParams:e,iframeQueryParams:t}){let n=new URLSearchParams;for(let[t,r]of e)t.startsWith(o)||n.append(t,r);for(let[e,r]of a(t))n.append(`${o}${e}`,r);return n}function l(e){let t=new URLSearchParams;for(let[n,r]of e)if(n.startsWith(o)){let e=n.replace(o,"");e.length>0&&t.append(e,r)}return a(t)}},65662:function(e,t,n){n.d(t,{Du:()=>l,FF:()=>_,Sz:()=>f,VP:()=>E,YT:()=>u,fY:()=>s,fe:()=>d,hk:()=>g,mR:()=>S,s9:()=>p,zL:()=>c});var o=n(690908),r=n(67158),a=n(988209),i=n(94587);function l({fullStreamlitIdentifier:e,isPrivatelink:t}){let n=new o.L().add("CALL SYSTEM$GENERATE_STREAMLIT_URL_FROM_NAME({}",(0,i.i)((0,r.m)(e)));return n.add(", {}",(0,a.S)(t)),n.add(");"),n.toQuery()}function s(e){return new o.L().add("CALL SYSTEM$GENERATE_STREAMLIT_TOKEN({});",(0,i.i)((0,r.m)(e))).toQuery()}function u(e){return new o.L().add("CALL SYSTEM$GET_STREAMLIT_API_TOKEN({});",(0,i.i)((0,r.m)(e))).toQuery()}function d(e){return new o.L().add("CALL SYSTEM$STREAMLIT_RELOAD({});",(0,i.i)((0,r.m)(e))).toQuery()}function c(e,t){return new o.L().add("CALL SYSTEM$ASSOCIATE_STAGE_WITH_STREAMLIT({}, {});",(0,i.i)((0,r.m)(e)),(0,i.i)((0,r.m)(t))).toQuery()}function E(e){return new o.L().add("CALL SYSTEM$STREAMLIT_RERUN({});",(0,i.i)((0,r.m)(e))).toQuery()}function f(e,t,n={}){return new o.L().add("CALL SYSTEM$LOG_STREAMLIT_TELEMETRY({},{},{});",(0,i.i)(null===e?"":(0,r.m)(e)),(0,i.i)(t),(0,i.i)(JSON.stringify(n))).toQuery()}function p(e,t){return new o.L().add("CALL SYSTEM$LOG_STREAMLIT_TELEMETRY_BATCH({},{});",(0,i.i)(null===e?"":(0,r.m)(e)),(0,i.i)(JSON.stringify(t))).toQuery()}function S({fullStreamlitIdentifier:e,appViewRequestId:t,isPrivatelink:n,historyQueryId:l}){let s=new o.L().add("CALL SYSTEM$STREAMLIT_BOOTSTRAP({}",(0,i.i)((0,r.m)(e))),u=(0,i.i)(null!=t?t:""),d=[{param:u,couldIgnore:!t},{param:(0,a.S)(n),couldIgnore:!1},{param:(0,i.i)(null!=l?l:""),couldIgnore:!l}];return d.slice(0,d.findLastIndex(e=>!e.couldIgnore)+1).forEach(e=>s.add(", {}",e.param)),s.add(");"),s.toQuery()}function g(e){return new o.L().add("CALL SYSTEM$STREAMLIT_BOOTSTRAP_STARTUP_STATUS({});",(0,i.i)((0,r.m)(e))).toQuery()}function _({srcStreamlitIdentifier:e,newStreamlitName:t,newStreamlitTitle:n}){return new o.L().add("CALL SYSTEM$DUPLICATE_STREAMLIT_WITHOUT_EMBEDDED_STAGE({}, {}, {});",(0,i.i)((0,r.m)(e)),(0,i.i)(t),(0,i.i)(n)).toQuery()}},689398:function(e,t,n){n.d(t,{$g:()=>S,AU:()=>N,C1:()=>b,EX:()=>w,F2:()=>E,I:()=>G,JI:()=>A,Jd:()=>a,MI:()=>g,TW:()=>V,Ui:()=>p,Wh:()=>L,YL:()=>i,Yb:()=>U,ZR:()=>k,_t:()=>_,_y:()=>y,b2:()=>C,bH:()=>c,c:()=>s,cQ:()=>h,dr:()=>B,fY:()=>F,gN:()=>m,gf:()=>v,kL:()=>R,lO:()=>O,lU:()=>P,p0:()=>r,pN:()=>x,qK:()=>D,rc:()=>M,sB:()=>T,tS:()=>u,tt:()=>d,uy:()=>f,w:()=>K,wd:()=>I,x3:()=>l});var o=n(609737);function r(){return o.flags.UI_ENABLE_STREAMLIT_HIDE_PREVIEW_PILL()}function a(){return o.flags.FEATURE_UI_ENABLE_STREAMLIT_CONFIG_TOML()}function i(){return o.flags.UI_ENABLE_STREAMLIT_QUERY_PARAMS()}function l(){return o.flags.UI_ENABLE_STREAMLIT_EMBEDDED_STAGES()}function s(){return o.flags.ENABLE_STREAMLIT_VERSIONED_STAGE()}function u(){return o.flags.UI_ENABLE_STREAMLIT_NEW_MENU_BUTTON()}function d(){return o.flags.UI_ENABLE_STREAMLIT_SEND_THEME_POST_MESSAGE_ON_SCRIPT_STATE_CHANGED()}function c(){return o.flags.FEATURE_UI_ENABLE_STREAMLIT_SCHEDULING()}function E(){return o.flags.UI_ENABLE_STREAMLIT_THEMING()}function f(){return o.flags.UI_ENABLE_STREAMLIT_DEBUG_CONSOLE_LOGGING_FOR_TESTING()}function p(){return o.flags.UI_ENABLE_STREAMLIT_SUPPRESS_WEBSOCKET_HEARTBEATS()}function S(){return o.flags.UI_ENABLE_STREAMLIT_DEBUG_FATAL_EXCEPTION_OVERRIDE_FOR_TESTING()}function g(){return o.flags.UI_ENABLE_STREAMLIT_ON_SPCS()}function _(){return o.flags.UI_ENABLE_STREAMLIT_PREAMBLE_CSP_VIOLATION_DETECTION()}function h(){return o.flags.UI_ENABLE_STREAMLIT_PREAMBLE_SERVICE_WORKER()}function m(){return o.flags.UI_ENABLE_STREAMLIT_BATCH_TELEMETRY_ENDPOINT()}function I(){return o.flags.UI_ENABLE_STREAMLIT_PIPE_TELEMETRY_TO_BATCH_ENDPOINT()}function T(){return o.flags.STREAMLIT_BATCH_TELEMETRY_QUEUE_THROTTLE_IN_MS()}function R(){return o.flags.UI_ENABLE_STREAMLIT_INDIVIDUAL_LOAD_METRICS()}function v(){return o.flags.ENABLE_STREAMLIT_SERVICE_WORKER()}function C(){return o.flags.ENABLE_STREAMLIT_ALLOW_FILE_UPLOADER()}function y(){return o.flags.UI_ENABLE_STREAMLIT_LOAD_SEQUENCE_IN_SNOWSIGHT()}function N(){return o.flags.UI_ENABLE_STREAMLIT_DISPLAY_SPCS_DETAILED_LOAD_SEQUENCE()}function A(){return o.flags.UI_ENABLE_STREAMLIT_RESTRICTED_CALLERS_RIGHTS()}function b(){return o.flags.UI_ENABLE_STREAMLIT_INITIAL_RETRY_SKIP()}function O(){return o.flags.UI_ENABLE_STREAMLIT_CONSUME_SLEEP_TIMER_DURATION_FROM_BOOTSTRAP()}function L(){return o.flags.FEATURE_COPILOT_STREAMLIT()}function k(){return o.flags.UI_ENABLE_MLPF_FEATURE_16()}function M(){return o.flags.UI_ENABLE_STREAMLIT_FEATURE_2()}function w(){return o.flags.UI_ENABLE_STREAMLIT_APP_STATE_MACHINE()}function D(){return o.flags._DP_UI_ENABLE_STREAMLIT_LIST_VIEW_RUNTIME_STATUS_COLUMN()}function U(){return o.flags._DP_UI_ENABLE_STREAMLIT_ENHANCED_APP_LIFECYCLE_TELEMETRY()}function P(){return o.flags.UI_ENABLE_CHROMELESS_SIS_APPS()}function x(){return o.flags.UI_ENABLE_STREAMLIT_FEATURE_1()}function B(){return o.flags._DP_UI_ENABLE_STREAMLIT_WEBSOCKET_HEALTHCHECK()}function F(){return o.flags._DP_UI_ENABLE_STREAMLIT_WEBSOCKET_HEALTHCHECK_SHADOW_MODE()}function G(){return o.flags._DP_UI_ENABLE_STREAMLIT_TRUNCATE_LEADING_SLASH_FROM_UPLOAD()}function V(){return o.flags._DP_UI_ENABLE_STREAMLIT_CACHE_IFRAME_URL()}function K(){return o.flags._DP_UI_ENABLE_STREAMLIT_PROMPT_INPUT()}},268008:function(e,t,n){n.d(t,{Y:()=>f,t:()=>E});var o=n(609737),r=n(467131),a=n(499924),i=n(242051),l=n(750671),s=n(254759),u=n(551276),d=n(65662),c=n(263952);let E=640;function f(){var e;let t=o.flags._DP_UI_ENABLE_STREAMLIT_WEBSOCKET_TELEMETRY(),{dataDiscoverRole:n,secondaryRoles:f}=(0,i.j)(),p="log-streamlit-batch-telemetry",S=(0,a.useContext)(s.L),g=(0,l.h)(null==S||null==(e=S.user)?void 0:e.api,"UserStore is not loaded"),_=(0,u.d)();return t&&c.WD.forEach(e=>c.kD.add(e)),(0,a.useCallback)(async({events:e,fullStreamlitIdentifier:t})=>{let o=e.filter(e=>c.kD.has(e.eventName));if(0===o.length)return;let a=Date.now();for(let e=0;e<o.length;e+=E){let i=function(e,t,n){let o={};for(let i of e){var r,a;let{eventName:e,additionalParams:l={},componentName:s}=i,u={clientTimeStamp:null!=(r=l.clientTimeStamp)?r:n,...l,componentName:s,isPrivateLink:t()},d=null!=(a=o[e])?a:[];d.push(u),o[e]=d}return o}(o.slice(e,e+E),_,a),l=(0,d.s9)(t,i);try{await g.query(l,{isInternal:!0,role:n,secondaryRoles:f,desc:p})}catch(e){r.cM.error(e)}}},[g,n,f,p,_])}},263952:function(e,t,n){n.d(t,{Qh:()=>g,WD:()=>p,kD:()=>S});var o=n(609737),r=n(467131),a=n(499924),i=n(242051),l=n(750671),s=n(254759),u=n(551276),d=n(674337),c=n(65662),E=n(689398),f=n(350596);let p=[d.dO0,d.uYd,d.TV5,d.UfY,d.X9g],S=new Set([d.WmD,d.D3Z,d.w0o,d.SxE,d.Zq6,d.Hqt,d.pwE,d.ESo,d.RKz,d.__d,d.KF8,d.Bpb,d.qnG,d.rKO,d.hn2,d.IeT,d.cT0,d.u9u,d.Vdk,d.wKB,d.Rb3,d.J8b,d.yDA,d.Xrf,d.me3,d.VF4,d.VjJ,d.FSx,d.xJE,d.m2U,d.peE,d.Ao4,d.jym,d.UG5,d.t6j,d.mBZ]);function g(){var e;let t=o.flags._DP_UI_ENABLE_STREAMLIT_WEBSOCKET_TELEMETRY(),n=(0,E.gN)(),d=(0,E.wd)()&&n,{dataDiscoverRole:g,secondaryRoles:_}=(0,i.j)(),h="log-streamlit-telemetry",m=(0,a.useContext)(s.L),I=(0,l.h)(null==m||null==(e=m.user)?void 0:e.api,"UserStore is not loaded"),T=(0,u.d)(),R=(0,f.m)();return t&&p.forEach(e=>S.add(e)),(0,a.useCallback)(e=>{let{fullStreamlitIdentifier:t,componentName:n,eventName:o,additionalParams:a={}}=e;if(!S.has(o))return;if(d&&R){a.clientTimeStamp=Date.now(),R.enqueueItem({...e,additionalParams:a});return}let i={...a,componentName:n,clientTimeStamp:Date.now(),eventType:o,isPrivateLink:T()},l=(0,c.Sz)(t,o,i);I.query(l,{isInternal:!0,role:g,secondaryRoles:_,desc:h}).catch(e=>{r.cM.error(e)})},[d,R,T,I,g,_,h])}},135047:function(e,t,n){n.d(t,{Z:()=>a});var o=n(499924),r=n(689398);let a=()=>{let e=(0,r.uy)();return{debugLog:(0,o.useCallback)((t,n,...o)=>{e&&console.debug(`[ST_DEBUG][${t}]`,n,...o)},[e])}}},40532:function(e,t,n){n.d(t,{H:()=>s,h:()=>l});var o=n(499924),r=n(783844),a=n(371743);let i=o.createContext(""),l=i.Provider,s=e=>{let t=(0,o.useContext)(i),n=e||t;return{entityId:(0,o.useMemo)(()=>(0,a.J)(n,r.M.STREAMLIT),[n]),entityIdStr:n}}},80550:function(e,t,n){n.d(t,{A:()=>r});var o=n(106564);function r(e){let t=(0,o.f)({iframeUrl:e,page:void 0});return t?new URL(t).origin:void 0}},106564:function(e,t,n){n.d(t,{f:()=>c});var o=n(282153),r=n(499924),a=n(383151),i=n(750671),l=n(102078),s=n(207036),u=n(689708),d=n(689398);function c({iframeUrl:e,page:t,rawParams:n=(0,s.s)()}){let{colorScheme:c}=(0,o.ZQ)(),E=(0,d.YL)(),f=(0,d.F2)();return(0,r.useMemo)(()=>{if(!e)return;(0,i.N)(""===new URL(e).search,"Base URL must not contain search parameters");let o=new URL(null!=t?t:"",e.endsWith("/")?e:`${e}/`);o.searchParams.set("embed","true"),o.searchParams.append("embed_options","show_padding"),f&&("dark"===c&&o.searchParams.append("embed_options","dark_theme"),"light"===c&&o.searchParams.append("embed_options","light_theme")),o.searchParams.set("__parentOrigin",window.location.origin),o.searchParams.set("__clientVersion",encodeURIComponent(a.X.clientVersion||""));let r=(0,u.ur)(o.searchParams);if((0,i.N)((0,l.r)(r),`Unknown query parameter(s) [${r.toString()}] set on Streamlit iFrame URL.`),E)for(let[e,t]of(0,u.aR)(n))o.searchParams.append(e,t);return o.toString()},[e,t,f,E,c,n])}},350596:function(e,t,n){n.d(t,{m:()=>u});var o=n(499924),r=n(562922),a=n(67158),i=n(254759),l=n(689398),s=n(268008);let u=()=>{var e;let t=(0,s.Y)(),n=(0,o.useCallback)(e=>{let n={};for(let t of e){var o;let e=t.fullStreamlitIdentifier?(0,a.m)(t.fullStreamlitIdentifier):"<none>",r=null!=(o=n[e])?o:[];r.push(t),n[e]=r}for(let e of Object.values(n))t({fullStreamlitIdentifier:e[0].fullStreamlitIdentifier,events:e.map(e=>({componentName:e.componentName,eventName:e.eventName,additionalParams:e.additionalParams}))})},[t]),{analytics:u}=(0,i.m)(["analytics"]),d=u.getStreamlitQueue(),c=null!=(e=(0,l.sB)())?e:5e3,E=(0,l.wd)()?new r._(n,c,s.t):void 0;return d||u.setStreamlitQueue(E),null!=d?d:E}},423882:function(e,t,n){n.d(t,{I:()=>r});var o,r=((o={}).loading="loading",o.loaded="loaded",o.suspended="suspended",o)},482148:function(e,t,n){n.d(t,{P:()=>o});class o extends Error{}},13715:function(e,t,n){n.d(t,{Z:()=>o});class o extends Error{constructor({topic:e,level:t,payload:n}){super(n),this.topic=e,this.level=t,this.payload=n}}},42218:function(e,t,n){n.d(t,{a:()=>o});class o extends AggregateError{}},459510:function(e,t,n){n.d(t,{e:()=>o});let o={CONNECTED:"CONNECTED",DISCONNECTED_FOREVER:"DISCONNECTED_FOREVER",INITIAL:"INITIAL",PINGING_SERVER:"PINGING_SERVER",CONNECTING:"CONNECTING"}},243100:function(e,t,n){function o(e,t){let n=e,o=null;for(;n;){let e=n;if(e.getAttribute&&(o=e.getAttribute(t)))return o;n=n.parentNode}return null}function r(e,t){return o(e,"data-"+t)}function a(e,t){for(;e;){if(t(e))return!0;e=e.parentNode}return!1}function i(){}function l(e){e.preventDefault(),e.stopPropagation()}function s(e){return e.stopPropagation()}function u(e){e.dataTransfer.setData("text/plain",""),c(e)}function d(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}function c(e){if(e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage){let t=document.createElement("img");t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e.dataTransfer.setDragImage(t,0,0)}}function E(e){for(;e;){if(e.getAttribute&&e.getAttribute("data-is-popover"))return e;e=e.parentNode}}function f(e,t){let n=E(e),o=E(t);return n&&o&&n===o}n.d(t,{DY:()=>a,EI:()=>i,Jf:()=>c,Ob:()=>f,QO:()=>d,UW:()=>s,aC:()=>o,nm:()=>u,qf:()=>l,um:()=>r})},421141:function(e,t,n){n.d(t,{z:()=>u});var o=n(499924),r=n(225532),a=n(979991),i=n(846036),l=n(783844),s=n(523023);let u=e=>{let t=(0,s.h)(),{logEventToSnowflakeAndDatadog:n}=(0,a.z)(),u=sessionStorage.getItem(r.VE);return(0,o.useCallback)(o=>{let{fullIdentifier:r,forceLog:a,...s}=o;switch(e){case l.M.STREAMLIT:t({fullStreamlitIdentifier:r,...s,eventType:s.eventType});break;case l.M.NOTEBOOK:n({component:o.componentName,event:o.eventName,type:o.eventType,data:{...o.additionalTelemetryParams,windowId:u,fullNotebookIdentifier:r}});break;default:throw(0,i.U)(e),Error(`Received call to logFileBasedEntityEvent with unsupported type: ${e}`)}},[n,t,e,u])}},787679:function(e,t,n){n.d(t,{_:()=>l});var o=n(499924),r=n(778098),a=n(320241),i=n(254759);function l(){let e=(0,o.useContext)(a.V1),t=(0,i.m)(["user"]),{formatMessage:n}=(0,r.Z)();return(0,o.useCallback)(async(o,r,a)=>{let i={lastUpdatedUser:t.user.currentUserId,lastUpdatedTime:Date.now()};try{await e.alter(r,o,{comment:JSON.stringify(i)},{secondaryRoles:a})}catch(e){throw Error(n({id:"Could not refresh last updated information. Error: {message}"},{message:e instanceof Error?e.message:"unknown error"}))}},[n,e,t.user.currentUserId])}},164090:function(e,t,n){n.d(t,{j:()=>A});var o=n(184168),r=n(651489),a=n(567410),i=n(821034),l=n(239243),s=n(751907),u=n(429207),d=n(628587),c=n(145753),E=n(236689),f=n(702679),p=n(77822),S=n(233174),g=n(982055),_=n(499924),h=n(778098),m=n(374318),I=n(896426),T=n(810339),R=n(471864),v=n(67158),C=n(674337),y=n(3535),N=n(421141);let A=_.memo(({hideLayer:e,sourceEntityIdentifier:t,sourceEntityTitle:n,dialogTitle:A,navigateToNewEntity:b,embeddedStageEnabled:O=!1,versionedStageEnabled:L=!0,openNewEntityButtonText:k,duplicate:M,readyForDuplication:w,entityShared:D,validateName:U,additionalTelemetryParams:P})=>{let{formatMessage:x}=(0,h.Z)(),[B,F]=(0,_.useState)(""),G=(0,_.useRef)(!1),[V,K]=(0,_.useState)(r.Yg.NONE),[W,H]=(0,_.useState)(!1),[$,Q]=(0,_.useState)(null),j=(0,N.z)(t.type),Y=(0,_.useRef)(!1),z=(0,_.useRef)(null),q=(0,T.Z)(t);(0,_.useEffect)(()=>{G.current||F(n?`Copy of ${n}`:"")},[n]);let Z=(0,_.useCallback)(e=>{G.current=!0,F(e.target.value)},[]),J=V!==r.Yg.INVALID&&B&&!W&&w,X=(0,_.useCallback)(async()=>{if(!J)return;H(!0);let e=null,n=null,o=null,r=!1,i=null,l=(0,v.m)(t);try{(0,I.H$)(y.g3,l),i=await M({newEntityName:B,newEntityTitle:B}),Q(i),r=!0}catch(i){var s;let t;n=i instanceof m.M?null==(s=i.externalErrorCause)?void 0:s.code:void 0,o=i instanceof m.M?i.statusCode:void 0,t=n===g.SFDBErrorCode.ALREADY_EXISTS_002002?x({id:"This name is used by another notebook. Try a different name."}):(i instanceof Error?i.message:void 0)||x({id:"Error when duplicating the object. Try again later."}),(0,a.w)({type:"alert",content:t,autoDismiss:!1}),r=!1,e=null==i?void 0:i.message}finally{H(!1);let a=(0,I.Oi)({event:y.g3,markers:[l],isUserE2E:!1}),{duration:s}=(0,I.bR)(y.g3,a);j({fullIdentifier:t,componentName:C.jNi,eventName:C.LGO,eventType:r?"ui_response_success":"ui_response_error",forceLog:!1,additionalTelemetryParams:{success:r,embeddedStageEnabled:O,versionedStageEnabled:L,error:null!=e?e:void 0,errorStatusCode:null!=o?o:void 0,errorCode:null!=n?n:void 0,hasUserChangedTitle:G.current,runtime:q?"spcs":"wh",durationMs:s,newEntityIdentifier:r?(0,v.m)(i):void 0,...P}})}},[J,M,O,x,q,j,B,t,L,P]),ee=(0,_.useCallback)(()=>{$&&(e(),b($))},[e,b,$]),et=(0,_.useMemo)(()=>(0,o.jsx)(i.q,{minHeight:30,paddingTop:4,paddingBottom:4,borderRadius:8,width:"100%"}),[]),en=(0,_.useMemo)(()=>(0,o.jsxs)(l.g,{children:[(0,o.jsx)(s.lt,{layout:"compact",children:(0,o.jsx)(s.MR,{label:x({id:"Name"}),input:{value:B,disabled:W,validation:e=>U?U(e):(0,R.hs)(e,x),onValidationChange:K,onChange:Z,spellCheck:!1,autoFocus:!0}})}),D&&(0,o.jsxs)(u.X,{marginTop:16,verticalAlign:"middle",children:[(0,o.jsx)(d.JO,{icon:"warning-triangle",color:c.Q2.iconColor,flexShrink:0,marginRight:8,size:16}),(0,o.jsx)(E.x,{size:"small",display:"inline-flex",verticalAlign:"middle",weight:400,color:c.Il.Gray70,children:x({id:"The duplicated app will not be shared with the same roles."})})]})]}),[D,x,Z,W,B,U]),eo=(0,_.useMemo)(()=>(0,o.jsxs)(f.s,{align:"center",children:[(0,o.jsx)(d.JO,{flexShrink:0,color:c.Q2.statusSuccessColor,icon:"status-success",height:64,width:64}),(0,o.jsx)(E.x,{size:"default",display:"inline-flex",verticalAlign:"middle",weight:400,marginTop:24,color:c.Q2.primaryTextColor,children:x({id:"Copy of {sourceEntityTitle} created!"},{sourceEntityTitle:n})})]}),[x,n]);(0,_.useEffect)(()=>{Y.current||(j({fullIdentifier:t,componentName:C.jNi,eventName:C.mL4,eventType:"ui_impression",forceLog:!1,additionalTelemetryParams:{embeddedStageEnabled:O,versionedStageEnabled:L}}),Y.current=!0)},[O,j,t,L]);let er=(0,_.useRef)(null),[ea,ei]=(0,_.useState)("auto");(0,_.useEffect)(()=>{er.current&&ei(er.current.scrollHeight)},[$,w]);let el=(0,_.useMemo)(()=>$?{transitionProperty:"height",transitionDuration:"1000ms",transitionTimingFunction:"ease"}:{},[$]);return(0,o.jsxs)(p.Vq,{manuallyShown:!0,onHide:e,causalElement:z,children:[(0,o.jsx)(p.fK,{children:A}),(0,o.jsx)(p.a7,{children:(0,o.jsx)(l.g,{height:ea,...el,ref:er,children:$?eo:w?en:et})}),(0,o.jsxs)(p.cN,{children:[(0,o.jsx)(S.zx,{use:"default",onClick:e,disabled:W,marginRight:8,telemetryComponent:C.jNi,telemetryName:C.c6E,telemetryData:{sourceEntityIdentifier:t,embeddedStageEnabled:O,versionedStageEnabled:L,hasUserChangedTitle:G.current},children:$?x({id:"Close"}):x({id:"Cancel"})}),(0,o.jsx)(S.zx,{use:"primary",onClick:$?ee:X,disabled:!J,inProgress:W,telemetryComponent:C.jNi,telemetryName:$?C.RVD:C.J9z,telemetryData:{sourceEntityIdentifier:t,newEntityIdentifier:null!=$?$:void 0,embeddedStageEnabled:O,versionedStageEnabled:L,hasUserChangedTitle:G.current},children:$?null!=k?k:x({id:"Open app"}):x({id:"Duplicate"})})]})]})});A.displayName="DuplicateFileBasedEntityDialog"},481354:function(e,t,n){n.d(t,{C$:()=>T,Fx:()=>h,Gk:()=>f,Jf:()=>E,Oz:()=>g,XJ:()=>I,qL:()=>m,xe:()=>_});var o,r=n(184168),a=n(467131),i=n(485387),l=n.n(i);n(499924);var s=n(665007),u=n(985455),d=n(783844),c=n(709711),E=((o={}).initializingMessage="initializingMessage",o.startingComputePoolMessage="startingComputePoolMessage",o.startingContainerServiceMessage="startingContainerServiceMessage",o.connectingServiceMessage="connectingServiceMessage",o.waitingEndpointMessage="waitingEndpointMessage",o.waitingEndpointMessageStreamlit="waitingEndpointMessageStreamlit",o.runningAppMessage="runningAppMessage",o.runningAppMessageStreamlit="runningAppMessageStreamlit",o.fullComputePoolMessage="fullComputePoolMessage",o.insufficientCapacityErrorMessage="insufficientCapacityErrorMessage",o.generalContainerClientErrorMessage="generalContainerClientErrorMessage",o.unreachableContainerErrorMessage="unreachableContainerErrorMessage",o.generalContainerRunErrorMessage="generalContainerRunErrorMessage",o.reusingExistingServiceMessage="reusingExistingServiceMessage",o.oomWarehouseErrorMessage="oomWarehouseErrorMessage",o.generalWarehouseErrorMessage="generalWarehouseErrorMessage",o);let f=e=>{if(!e)return;let t=e.name;if(!(t in E))throw Error(`Unknown FormattedMessageSupplier key: ${t}`);return t},p=(e,t)=>({initializingMessage:()=>(0,r.jsx)(s.Z,{id:"Initializing connection and scanning existing service"}),startingComputePoolMessage:e=>(null==e?void 0:e.duration)?(0,r.jsx)(s.Z,{id:"{duration} \xb7 Starting compute pool. This can take 35 minutes",values:e}):(0,r.jsx)(s.Z,{id:"Starting compute pool. This can take 35 minutes"}),startingContainerServiceMessage:e=>(null==e?void 0:e.duration)?(0,r.jsx)(s.Z,{id:"{duration} \xb7 Starting container service. This can take 35 minutes",values:e}):(0,r.jsx)(s.Z,{id:"Starting container service. This can take 35 minutes"}),connectingServiceMessage:()=>(0,r.jsx)(s.Z,{id:"Connecting to container service"}),waitingEndpointMessage:()=>(0,r.jsx)(s.Z,{id:"Waiting for notebook endpoint to be ready"}),waitingEndpointMessageStreamlit:()=>(0,r.jsx)(s.Z,{id:"Waiting for Streamlit endpoint to be ready"}),runningAppMessage:()=>(0,r.jsx)(s.Z,{id:"Running notebook application"}),runningAppMessageStreamlit:()=>(0,r.jsx)(s.Z,{id:"Running Streamlit"}),fullComputePoolMessage:()=>(0,r.jsx)(s.Z,{id:"Couldnt start session because compute pool is full. Try a different compute pool or contact your admin."}),insufficientCapacityErrorMessage:()=>(0,r.jsx)(s.Z,{id:"Couldn't start session due to insufficient capacity from cloud provider. Try a different compute pool or try again later."}),generalContainerRunErrorMessage:()=>(0,r.jsx)(s.Z,{id:"Couldn't start session due to an issue with Snowpark Container Services: {errorDetail}",values:t}),unreachableContainerErrorMessage:()=>(0,r.jsx)(s.Z,{id:"Session ended due to unreachable container."}),generalContainerClientErrorMessage:()=>(0,r.jsx)(s.Z,{id:"Encountered error with service connection: {errorDetail}",values:t}),reusingExistingServiceMessage:e=>(null==e?void 0:e.duration)?(0,r.jsx)(s.Z,{id:"{duration} \xb7 Trying to reuse existing service. This can take 15 minutes",values:e}):(0,r.jsx)(s.Z,{id:"Trying to reuse existing service. This can take 15 minutes"}),oomWarehouseErrorMessage:()=>(0,r.jsx)(s.Z,{id:"Notebook session ended due to out of memory issue. Try limiting your dataset or use a Snowpark-optimized warehouse."}),generalWarehouseErrorMessage:()=>(0,r.jsx)(s.Z,{id:"Notebook session ended due to error: {errorDetail}",values:t})})[e],S={STARTING_COMPUTE_POOL_INFO_STRING:"Compute pool node(s) are being provisioned",STARTING_SERVICE_INFO_STRING:"Waiting to start",FULL_COMPUTE_POOL_ERROR_SUBSTRING:"Notebook service is unschedulable in full compute pool",INSUFFICIENT_RESOURCES_ERROR_SUBSTRING:"Unschedulable due to insufficient",INSUFFICIENT_CAPACITY_ERROR_SUBSTRING:"Compute pool insufficient capacity error",UNREACHABLE_CONTAINER_ERROR_PREFIX:"UNAVAILABLE:",RUNNING_STRING:"Running",OOM_WAREHOUSE_ERROR_SUBSTRING:"Function available memory exhausted"},g=()=>(0,r.jsx)(s.Z,{id:"Packages updated successfully."}),_=(e,t)=>{var n,o,r;switch(e.topic){case 1:return p("initializingMessage");case 2:{let t=e.payload?JSON.parse(e.payload):void 0,o=Object.values(null!=(n=null==t?void 0:t.containers)?n:{}).flat().map(e=>e.message);if(o.includes(S.STARTING_COMPUTE_POOL_INFO_STRING))return p("startingComputePoolMessage");return o.includes(S.STARTING_SERVICE_INFO_STRING)||o.includes(S.RUNNING_STRING)||a.cM.warn(`Unrecognized service status message: ${e.payload}`),p("startingContainerServiceMessage")}case 3:return p("connectingServiceMessage");case 4:if(t===d.M.STREAMLIT)return p("waitingEndpointMessageStreamlit");return p("waitingEndpointMessage");case 5:if(t===d.M.STREAMLIT)return p("runningAppMessageStreamlit");return p("runningAppMessage");case 6:{let t=e.payload;if(null==t?void 0:t.includes(S.FULL_COMPUTE_POOL_ERROR_SUBSTRING))return p("fullComputePoolMessage");if((null==t?void 0:t.includes(S.INSUFFICIENT_CAPACITY_ERROR_SUBSTRING))||(null==t?void 0:t.includes(S.INSUFFICIENT_RESOURCES_ERROR_SUBSTRING)))return p("insufficientCapacityErrorMessage");return p("generalContainerRunErrorMessage",{errorDetail:t})}case 7:if(null==(o=e.payload)?void 0:o.startsWith(S.UNREACHABLE_CONTAINER_ERROR_PREFIX))return p("unreachableContainerErrorMessage");return p("generalContainerClientErrorMessage",{errorDetail:e.payload});case 8:return p("reusingExistingServiceMessage");case 101:if(null==(r=e.payload)?void 0:r.includes(S.OOM_WAREHOUSE_ERROR_SUBSTRING))return p("oomWarehouseErrorMessage");return p("generalWarehouseErrorMessage",{errorDetail:e.payload});default:return void a.cM.warn(`Unrecognized lifecycle message topic: ${e.topic}`)}},h=(e,t,n=!1)=>{let o=(null==t?void 0:t.type)==="ReceivedStreamlitLifecycleMsg"?_(t.data,e):void 0,r=f(o),a="startingComputePoolMessage"===r||"startingContainerServiceMessage"===r||"reusingExistingServiceMessage"===r,{elapsedTimeMs:i}=(0,u.a)({epochName:"startingService",callbackFreqMs:a?1e3:null}),s=a?n?(0,c.qv)(i):l().duration(i,"milliseconds").format("h[h] m[m] s[s]",0,{trim:"all"}):void 0;return{displayTextSupplier:o,values:a?{duration:s}:void 0}},m=(e,t,n=!1)=>{let{displayTextSupplier:o,values:r}=h(e,t,n);return null==o?void 0:o(r)},I=e=>(null==e?void 0:e.length)?e.map(e=>e.error).join("\n"):null,T=e=>(null==e?void 0:e.length)?e.map(e=>e.message).join("\n"):null},278928:function(e,t,n){n.d(t,{a$:()=>a,fs:()=>l,gE:()=>i,gK:()=>s,tZ:()=>o,yN:()=>r});let o="ui_click",r="ui_visit",a="ui_impression",i="ui_keyboard",l="ui_response_success",s="ui_response_error"},562940:function(e,t,n){n.d(t,{J:()=>a});var o=n(307134),r=n(609737);function a(){let e=r.flags.UI_ENABLE_NOTEBOOK_FEATURE_33();return o.v.addFeatureFlagEvaluation("EnableRunWhileCacheLoading",e),e}},936057:function(e,t,n){n.d(t,{S:()=>l});var o=n(499924),r=n(514248),a=n(920597);let i=r.H.cacheFiller;function l(e,t){let n=(0,a.q)(e,(e,t,n)=>{i.debug("New Start Document Cache Load Effect"),e.registerHandler(t.docCacheHandler)}),r=(0,a.q)(e,(e,t,n)=>{i.debug("New End Document Cache Load Effect"),e.unregisterHandler(t.docCacheHandler)}),l=(0,a.q)(e,(e,n,o)=>{i.debug("New Fetch Cache Results called");let r=n.cellIds.map(e=>({cellId:e})),a=0;e.connection.isConnected()&&r&&r.length>0&&(a=1e3*t,e.registerHandler(n.messageHandler),e.sendMessage({previousResults:{warmStart:!1,cellIds:r,allowResultsAfterStart:!0}})),setTimeout(()=>{i.debug("Cells Timedout",{cellIds:n.cellIds}),n.messageHandler.onCancel(n.cellIds,"Timeout")},a)}),s=(0,a.q)(e,(e,t,n)=>{i.debug("New Fetch Cache Results DONE called"),e.unregisterHandler(t.messageHandler)});return(0,o.useMemo)(()=>({newStartDocumentCachedLoad:n,newEndDocumentCachedLoad:r,newFetchCachedResults:l,newFetchCachedResultsDone:s}),[r,l,s,n])}},771661:function(e,t,n){n.d(t,{j:()=>i});var o=n(514248),r=n(399696);let a=o.H.cacheFiller,i={NEW_START_DOCUMENT_CACHE_LOAD:function(e,t,n){if(a.debug("NEW_START_DOCUMENT_CACHE_LOAD",{cacheLoadId:t.cacheLoadId}),"pending"===e.cacheStatus)return void a.reportError("unexpected_nested_document_cache_start","Should not get a start documnet cache load in pending",{action:t});e.cacheLoadId=t.cacheLoadId,e.cacheStatus="pending";let{id:o,role:r,secondaryRoles:i}=t;n({type:"newStartDocumentCachedLoad",id:o,role:r,secondaryRoles:i,docCacheHandler:t.docCacheHandler,pageMode:t.pageMode}),e.cacheLoadId=t.cacheLoadId,e.cacheStatus="pending"},NEW_END_DOCUMENT_CACHE_LOAD:function(e,t,n){if(a.debug("NEW_END_DOCUMENT_CACHE_LOAD"),null==t.cacheLoadId||e.cacheLoadId===t.cacheLoadId){e.cacheLoadId=void 0;let o=e.cacheStatus;a.assertOrReport("pending"===e.cacheStatus||"loaded"===e.cacheStatus,"end_document_cache_load_without_pending_cache_status","Running a cache load batch with the cacheStatus in a non-pending state",{cacheStatus:o,cacheLoadId:t.cacheLoadId}),"error"!==o&&(e.cacheStatus="loaded");let{id:r,role:i,secondaryRoles:l}=t;n({type:"newEndDocumentCachedLoad",id:r,role:i,secondaryRoles:l,pageMode:t.pageMode,docCacheHandler:t.docCacheHandler})}},NEW_START_FETCHING_CACHED_RESULT:function(e,t,n){let{id:o,role:r,secondaryRoles:i,cellIds:l}=t;a.debug("NEW_START_FETCHING_CACHED_RESULT",{cellIds:l}),(null==t.cacheLoadId||e.cacheLoadId===t.cacheLoadId)&&l&&l.length>0&&(a.assertOrReport("pending"===e.cacheStatus||"loaded"===e.cacheStatus,"active_batch_without_pending_cache_status","Running a cache load batch with the cacheStatus in a non-pending state",{cacheStatus:e.cacheStatus,cellIds:l,cacheLoadId:t.cacheLoadId}),"pending"!==e.cacheStatus&&"loaded"!==e.cacheStatus?t.messageHandler.onCancel(l,"RunAlreadyHappened"):n({type:"newFetchCachedResults",id:o,role:r,secondaryRoles:i,cellIds:t.cellIds,messageHandler:t.messageHandler,pageMode:t.pageMode,cacheLoadId:t.cacheLoadId}))},NEW_END_FETCHING_CACHED_RESULT:function(e,t,n){let{id:o,role:r,secondaryRoles:i}=t;a.debug("NEW_END_FETCHING_CACHED_RESULT"),n({type:"newFetchCachedResultsDone",id:o,role:r,secondaryRoles:i,messageHandler:t.messageHandler,pageMode:t.pageMode})},NEW_SET_CACHE_RESULTS:function(e,t,n){a.debug("NEW_SET_CACHE_RESULTS",{cellId:t.cellId});let o=e.notebookState;if(!o)return void a.error("No Notebook state when setting cache results");if(null==t.cacheLoadId||e.cacheLoadId===t.cacheLoadId){var i;let{cellId:n,messages:l}=t;a.debug("Updating cache state for cell",{cellId:n});let s=null==(i=e.notebookState)?void 0:i.getCellById(n);if(null==s||"neverRun"!==s.result.status.cellRunStatus)return void a.error("Cell is already updated before the cache result, so ignoring the cache result");if("pending"===e.cacheStatus||"loaded"===e.cacheStatus){let i=o.updateCellResult(n,{message:l});if(null!=t.cellCacheMetadata&&(a.debug("Cell has cellCacheMetadata",{cellId:n,cellCacheMetadata:t.cellCacheMetadata}),i=i.updateCellResult(n,{selfContentHash:t.cellCacheMetadata.selfContentHash,fullContentHash:t.cellCacheMetadata.fullContentHash,runId:t.cellCacheMetadata.runId,parentExecutionId:t.cellCacheMetadata.parentExecutionId,executionId:t.cellCacheMetadata.executionId,tempSelfContentHash:void 0,tempFullContentHash:void 0,tempRunId:void 0,tempParentExecutionId:void 0,tempExecutionId:void 0})),t.queryId){let o=t.messages.some(e=>(0,r.G)(e));e.notebookState=i.updateCellStatus(n,{cellRunStatus:o?"error":"success"})}else e.notebookState=i.updateCellStatus(n,{cellRunStatus:"idle"});a.debug("Updated cache state for cell",{cellId:n})}else a.reportError("active_batch_without_pending_cache_status","Running a cache load batch with the cacheStatus in a non-pending state",{cacheStatus:e.cacheStatus,cellId:n,cacheLoadId:t.cacheLoadId})}}}},638021:function(e,t,n){n.d(t,{W:()=>p});var o=n(184168),r=n(499924),a=n(778098),i=n(865386),l=n(67158),s=n(164090),u=n(934188),d=n(94705),c=n(247174),E=n(432532),f=n(523692);let p=r.memo(({hideLayer:e,sourceFullNotebookIdentifier:t,urlData:n,sessionSettings:p})=>{var S;let{formatMessage:g}=(0,a.Z)(),{sourceNotebookDetails:_,duplicate:h,readyForDuplication:m}=(0,u.b)({sourceNotebookId:t,sessionSettings:p}),{pageMode:I}=(0,d.T2)(),T=(0,r.useCallback)(e=>{i.k.navigate({region:n.region,org:n.org,entityIdStr:(0,l.m)(e)})},[n.org,n.region]),R=(0,r.useCallback)(e=>{let t=(0,f.V)(e);return(0,c.t)(t,g)},[g]),v=(0,r.useMemo)(()=>({notebookRuntime:(0,E.e)((null==p?void 0:p.runtimeName)||(null==_?void 0:_.runtimeName)),pageMode:I}),[null==_?void 0:_.runtimeName,null==p?void 0:p.runtimeName,I]);return(0,o.jsx)(s.j,{hideLayer:e,sourceEntityIdentifier:t,sourceEntityTitle:null!=(S=null==_?void 0:_.name)?S:"",dialogTitle:g({id:"Duplicate Notebook"}),openNewEntityButtonText:g({id:"Open notebook"}),readyForDuplication:m,duplicate:h,navigateToNewEntity:T,validateName:R,additionalTelemetryParams:v})});p.displayName="DuplicateNotebookDialog"},893538:function(e,t,n){n.d(t,{z:()=>_});var o=n(184168),r=n(77822),a=n(155382),i=n(236689),l=n(145753),s=n(239243),u=n(233174),d=n(367746),c=n(499924),E=n(665007),f=n(320241),p=n(998269),S=n(783844),g=n(3291);let _=({hide:e,fullNotebookIdentifier:t})=>{var n,d;let _=(0,c.useRef)(null),m=(0,f.fo)(),I=m.useGetSkippableNoThrow(t,p.Y.describe),T=(null==I||null==(d=I.result)||null==(n=d.columns[0])?void 0:n.externalAccessIntegrations)||[],[R,v]=m.useHydratedListNoThrow(S.M.EXTERNAL_ACCESS_INTEGRATION,p.Y.show,void 0);if(null==R||(0,g.M)(v)||(0,g.M)(I))return(0,o.jsx)(h,{});let C={};for(let e of R)C[e.name]=e;let y=T.filter(e=>{var t;return!(null==(t=C[e])?void 0:t.enabled)});return(0,o.jsxs)(r.Vq,{manuallyShown:!0,onHide:e,causalElement:_,children:[(0,o.jsx)(r.fK,{children:(0,o.jsx)(E.Z,{id:"Can't start Notebook"})}),(0,o.jsxs)(r.a7,{children:[(0,o.jsx)(a.n,{marginBottom:24,children:(0,o.jsx)(i.x,{color:l.Q2.secondaryTextColor,children:(0,o.jsx)(E.Z,{id:"There was a problem attaching one or more external access integrations to this notebook:"})})}),(0,o.jsx)("ul",{children:y.map(e=>(0,o.jsx)("li",{children:e},e))})]}),(0,o.jsx)(r.cN,{children:(0,o.jsxs)(s.g,{children:[(0,o.jsx)(u.zx,{onClick:e,children:(0,o.jsx)(E.Z,{id:"Close"})}),(0,o.jsx)(u.zx,{use:"primary",onClick:async function(){await m.alter(t,{externalAccessIntegrations:T.filter(e=>!y.includes(e))}),e()},marginLeft:8,children:(0,o.jsx)(E.Z,{id:"Remove unavailable integrations"})})]})})]})};function h(){let e=(0,c.useRef)(null);return(0,o.jsxs)(r.Vq,{manuallyShown:!0,causalElement:e,children:[(0,o.jsx)(r.fK,{}),(0,o.jsx)(r.a7,{display:"flex",justifyContent:"center",alignItems:"center",children:(0,o.jsx)(d.T,{})}),(0,o.jsx)(r.cN,{})]})}_.displayName="NotebookExternalAccessIntegrationErrorDialog",h.displayName="LoadingDialog"},367092:function(e,t,n){n.d(t,{T:()=>l,b:()=>i});var o=n(184168),r=n(499924);let a=(0,r.createContext)({triggerDialog:()=>{}}),i=()=>(0,r.useContext)(a);function l({children:e,triggerDialog:t}){let n=(0,r.useMemo)(()=>({triggerDialog:t}),[t]);return(0,o.jsx)(a.Provider,{value:n,children:e})}l.displayName="NotebookPaneShowDialogProvider"},827513:function(e,t,n){n.d(t,{Q:()=>a,h:()=>r});var o=n(888890);let r=(e,t)=>{let n={primaryRole:e};if(t===o.Bq||""===t)n.allSelected=!0;else if(t===o.sM)n.noneSelected=!0;else if(t){let e=t.split(",").map(e=>e.trim()).filter(e=>!!e);e.length>0&&(n.selected={role:e})}return n},a=e=>{var t;return e.allSelected?o.Bq:e.noneSelected?o.sM:(null==(t=e.selected)?void 0:t.role)?e.selected.role.join(","):""}},255379:function(e,t,n){n.d(t,{k:()=>d});var o=n(499924),r=n(242051),a=n(735736),i=n(243181),l=n(320241),s=n(254759),u=n(177674);let d=()=>{let{dataDiscoverRole:e,secondaryRoles:t}=(0,r.j)(),n=(0,l.fo)(e,{secondaryRoles:t}),{user:d}=(0,s.m)(["user"]),c=(0,a.U)();return(0,o.useCallback)(async({notebookId:o,sessionSettings:r,pageMode:a})=>{var l;let s=await c(o,e,t),E=d.api.query((0,i.HS)({notebookUrlId:s.urlId,sessionSettingsData:JSON.stringify(r)}),{role:e,secondaryRoles:t,isInternal:!0,desc:"save-notebook-session-settings"}),f="ownerMode"===a?{queryWarehouse:r.queryWarehouse&&r.queryWarehouse!==s.queryWarehouse?r.queryWarehouse:void 0,warehouse:r.codeWarehouse&&r.codeWarehouse!==s.codeWarehouse?r.codeWarehouse:void 0,runtimeName:r.runtimeName&&r.runtimeName!==s.runtimeName?r.runtimeName:void 0,computePool:r.computePool&&r.computePool!==s.computePool?r.computePool:void 0,runtimeEnvironmentVersion:r.runtimeEnvironmentVersion&&r.runtimeEnvironmentVersion.toLowerCase()!==(null==(l=s.runtimeEnvironmentVersion)?void 0:l.toLowerCase())?r.runtimeEnvironmentVersion:void 0,idleAutoShutdownTimeSeconds:r.idleAutoShutdownTimeSeconds&&r.idleAutoShutdownTimeSeconds!==s.idleAutoShutdownTimeSeconds?r.idleAutoShutdownTimeSeconds:void 0,externalAccessIntegrations:r.externalAccessIntegrations&&!(0,u.W)(r.externalAccessIntegrations||[],s.externalAccessIntegrations||[])?r.externalAccessIntegrations:void 0}:{},p=Object.keys(f).some(e=>!!f[e])?n.alter(o,f):Promise.resolve();await Promise.all([E,p])},[e,t,d,c,n])}},998082:function(e,t,n){n.d(t,{S:()=>l});var o=n(184168),r=n(77822),a=n(233174),i=n(665007);let l=({hide:e,restart:t})=>(0,o.jsxs)(r.Vq,{manuallyShown:!0,causalElement:{current:null},children:[(0,o.jsx)(r.fK,{children:(0,o.jsx)(i.Z,{id:"Restart required"})}),(0,o.jsx)(r.a7,{children:(0,o.jsx)(i.Z,{id:"Due to a conflict with updated packages, a session restart is required. This will reset any variables you might have created."})}),(0,o.jsxs)(r.cN,{children:[(0,o.jsx)(a.zx,{onClick:e,children:(0,o.jsx)(i.Z,{id:"Not now"})}),(0,o.jsx)(a.zx,{use:"primary",marginLeft:8,onClick:()=>{try{t()}finally{e()}},children:(0,o.jsx)(i.Z,{id:"Restart session"})})]})]});l.displayName="PackageUpdateAlertDialog"},452997:function(e,t,n){n.d(t,{c:()=>a});var o=n(184168),r=n(665007);let a=()=>(0,o.jsx)(r.Z,{id:"Cant start container notebooks using the ACCOUNTADMIN, SECURITYADMIN, or ORGADMIN roles. Switch your role by clicking your profile icon in the left navigation menu, and then try again."})},692775:function(e,t,n){n.d(t,{J:()=>a});var o=n(184168),r=n(665007);function a(e){switch(e){case"valid":return null;case"empty":return(0,o.jsx)(r.Z,{id:"Missing"});case"tooLong":return(0,o.jsx)(r.Z,{id:"Couldnt start notebook. Notebook name exceeds maximum length of 255 characters"});case"invalidCharacters":return(0,o.jsx)(r.Z,{id:"Couldnt start notebook. Notebook name can only include letters, numbers, spaces, underscores, -, $, and :"})}}},600745:function(e,t,n){n.d(t,{n:()=>a});var o=n(184168),r=n(665007);let a=()=>(0,o.jsx)(r.Z,{id:"Kernel restarted. Your notebook is ready to run."})},327879:function(e,t,n){n.d(t,{e:()=>a});var o=n(888890),r=n(438635);function a(e){let t=(0,r.h)(e),n=e===o.GF,a=e===o.rJ;return t||n||a}},730434:function(e,t,n){n.d(t,{E:()=>d,U:()=>u});var o=n(184168),r=n(237257),a=n(499924);let[i,l]=(0,r.Z)(function(){let[e,t]=(0,a.useState)(null),n=(0,a.useCallback)(e=>{t(e)},[]),o=(0,a.useCallback)(()=>{t(null)},[]);return(0,a.useMemo)(()=>({openDialog:n,dialog:e,hideDialog:o}),[n,e,o])});function s(){let{dialog:e}=l();return(0,o.jsx)(o.Fragment,{children:e})}function u({children:e}){return(0,o.jsxs)(i,{children:[(0,o.jsx)(s,{}),e]})}function d(){let{openDialog:e,hideDialog:t}=l();return{openDialog:e,hideDialog:t}}s.displayName="Dialog",u.displayName="NotebookDialogProvider"},34589:function(e,t,n){n.d(t,{$:()=>o});let o=4},139545:function(e,t,n){n.d(t,{K7:()=>a,Q8:()=>r,hj:()=>o});let o=604800,r=15,a=3600},116952:function(e,t,n){n.d(t,{L:()=>S});var o=n(630455),r=n(609737),a=n(778098),i=n(369859),l=n(735736),s=n(114613),u=n(731694),d=n(750671),c=n(67158),E=n(708990),f=n(98047);let p=()=>{let e=(0,E.KP)(),t=(0,f.N)();return(0,o.z)(async n=>{try{return await e(n)}catch(e){if(e.message.match(/failed paddingTrim/iu))return console.error(e),t.logError({notebookIdentifier:(0,c.m)(n.id),error:"failed paddingTrim"}),Promise.resolve("");throw e}})},S=()=>{let e=(0,l.U)(),t=(0,s.h)(),n=(0,u.iA)(),c=p(),{formatMessage:E}=(0,a.Z)(),f=r.flags.UI_ENABLE_NOTEBOOK_FEATURE_0();return(0,o.z)(async(o,r,a)=>{let l=await e(o,r,a),{mainFile:s}=l,{rootLocation:u,kind:p,isLive:S}=(0,i.R)(l);if("checkouts"===p)return await t({id:o,role:r,secondaryRoles:a}),c({id:o,rootLocation:u,mainFile:s,throwRawError:f});if("versioned"===p){if(S)return c({id:o,rootLocation:u,mainFile:s,throwRawError:f});let e=await n({id:o,role:r,secondaryRoles:a});return c({id:o,rootLocation:(0,d.h)(e.liveVersionLocationUri,E({id:"Live version could not be created."})),mainFile:s,throwRawError:f})}throw Error(E({id:"Could not fetch notebook. Invalid or unsupported notebook location."}))})}},882682:function(e,t,n){n.d(t,{l:()=>c});var o=n(609737),r=n(499924),a=n(242051),i=n(527565),l=n(254759),s=n(327879),u=n(708792),d=n(994106);let c=()=>{let{dataDiscoverRole:e,secondaryRoles:t}=(0,a.j)(),n=(0,l.m)([]).untracked.user,c=o.flags.UI_ENABLE_NOTEBOOK_DISABLED_SPCS_EXPERIENCE_FOR_ADMINS(),E=(0,u.U)();return(0,r.useCallback)(async r=>{let a=await E(r,e,t),l=!a.runtimeName||a.runtimeName===i.U,u=(0,s.e)(e);if(c&&!l&&u)return{additionalProtoParams:[],activeInstanceJobId:null,activeNotebookInstancesNum:0,additionalMetadata:{}};let f=(await (0,d.jX)({userStore:n,fullNotebookIdentifier:r,role:e,secondaryRoles:t})).filter(e=>e.isInteractive&&(!e.serviceType||l&&"WAREHOUSE_INSTANCE_TYPE"===e.serviceType||!l&&"SERVICE_INSTANCE_TYPE"===e.serviceType)),p=f.length,S={additionalProtoParams:[],activeInstanceJobId:p>0?f[0].serviceId:null,activeNotebookInstancesNum:p,additionalMetadata:{}};return p>0&&(!l||o.flags._DP_UI_NOTEBOOK_GET_STREAMLIT_VERSION_FOR_WH_ACTIVE_INSTANCE())&&(S.additionalMetadata.streamlitVersionOfAlreadyRunningInstance=f[0].streamlitVersion),l&&(S.additionalProtoParams.push("reconnectEnabled"),p>0&&S.additionalProtoParams.push(`reconnect-job-${f[0].serviceId}`)),S},[e,t,n,E,c])}},219247:function(e,t,n){n.d(t,{M:()=>s});var o=n(609737),r=n(499924),a=n(254759),i=n(603531),l=n(98047);function s(){let{user:e}=(0,a.m)(["user"]),t=(0,l.N)(),n=o.flags.UI_ENABLE_NOTEBOOK_FEATURE_44();return(0,r.useCallback)(async({id:o,role:r,secondaryRoles:a})=>await (0,i.n)({deleteAllRunningNotebookInstances:n,userStore:e,id:o,role:r,secondaryRoles:a,logNotebookEvent:t.logNotebookEvent}),[n,e,t.logNotebookEvent])}},934188:function(e,t,n){n.d(t,{b:()=>d});var o=n(609737),r=n(499924),a=n(613159),i=n(461376),l=n(527565),s=n(410183),u=n(979325);let d=({sourceNotebookId:e,sessionSettings:t})=>{let n=o.flags.UI_ENABLE_NOTEBOOKS_WH_PYTHON_ENVIRONMENT(),d=!!(0,u.C)(e),c=(0,r.useCallback)(e=>{var o,r,a,s;let u=(null!=(o=null==t?void 0:t.runtimeName)?o:e.runtimeName)||l.U;return{runtimeName:u,queryWarehouse:(null!=(r=null==t?void 0:t.queryWarehouse)?r:e.queryWarehouse)||void 0,warehouse:(null!=(a=null==t?void 0:t.codeWarehouse)?a:e.codeWarehouse)||void 0,...(0,i.V)(n&&!d&&(!!e.runtimeEnvironmentVersion||!!(null==t?void 0:t.runtimeEnvironmentVersion)),{runtimeEnvironmentVersion:(null==t?void 0:t.runtimeEnvironmentVersion)||e.runtimeEnvironmentVersion||void 0}),computePool:u===l.U?void 0:(null!=(s=null==t?void 0:t.computePool)?s:e.computePool)||void 0}},[n,d,t]),{sourceEntityDetails:E,duplicate:f,readyForDuplication:p}=(0,a.z)(e),S=(0,r.useCallback)(async e=>{var t,n;let o=null!=(n=null==e?void 0:e.newEntityName)?n:`Copy of ${null!=(t=null==E?void 0:E.name)?t:""}`,r=(0,s._t)(o);return await f({newEntityName:r,getAdditionalProps:c})},[f,null==E?void 0:E.name,c]);return{sourceNotebookDetails:E,duplicate:S,readyForDuplication:p}}},838783:function(e,t,n){n.d(t,{P:()=>i});var o=n(499924),r=n(243181),a=n(254759);let i=()=>{let{user:e}=(0,a.m)(["user"]);return(0,o.useCallback)(async({id:t,queryId:n,role:o,secondaryRoles:a,isHistoryQueryResultEnabled:i})=>(await e.api.query((0,r.Zl)({fullNotebookIdentifier:t,queryId:i?n:void 0}),{isInternal:!0,role:o,secondaryRoles:a,desc:"generate-notebook-token"})).rows[0][0],[e.api])}},862399:function(e,t,n){n.d(t,{W:()=>i});var o=n(499924),r=n(243181),a=n(254759);let i=()=>{let{user:e}=(0,a.m)(["user"]);return(0,o.useCallback)(async({id:t,role:n,secondaryRoles:o,isPrivatelink:a,isNotebookPrivateLinkEnabled:i})=>{let l=await e.api.query((0,r.eO)({fullNotebookIdentifier:t,isAccountUsingPrivateLink:a,isPrivatelinkEnabled:i}),(0,r.wZ)(n,o));return(0,r.Te)(l.rows[0][0])},[e.api])}},681671:function(e,t,n){n.d(t,{X:()=>l,n:()=>s});var o=n(499924),r=n(783844),a=n(371743);let i=o.createContext(""),l=i.Provider,s=e=>{let t=(0,o.useContext)(i);return(0,o.useMemo)(()=>(0,a.J)(e||t,r.M.NOTEBOOK),[e,t])}},979325:function(e,t,n){n.d(t,{C:()=>d});var o=n(609737),r=n(427674),a=n(320241),i=n(527565),l=n(998269),s=n(3291),u=n(337211);function d(e){var t,n,d,c,E;let f=(0,a.fo)(),p=o.flags.UI_ENABLE_NOTEBOOK_FEATURE_40(),S=(0,r.$)(),{editorState:g}=(0,u.P)();if(S)return!1;if(!p){let t=f.get(e,l.Y.describe);if((0,s.M)(t))return null;let n=null==t||null==(E=t.result)?void 0:E.columns[0];return!!(null==n?void 0:n.runtimeName)&&n.runtimeName!==i.U}return(null==g?void 0:g.notebookRuntime)==="spcs"||!!(null==g||null==(n=g.notebookSessionSettingsState)||null==(t=n.settings)?void 0:t.runtimeName)&&(null==g||null==(c=g.notebookSessionSettingsState)||null==(d=c.settings)?void 0:d.runtimeName)!=="SYSTEM$WAREHOUSE_RUNTIME"}},983339:function(e,t,n){n.d(t,{w:()=>r});var o=n(609737);function r(){return o.flags.UI_ENABLE_NOTEBOOK_SINGLE_IFRAME()}},337211:function(e,t,n){n.d(t,{P:()=>u});var o=n(499924),r=n(242051),a=n(681131),i=n(655266),l=n(681671),s=n(94705);function u(){var e,t;let{dataDiscoverRole:n,secondaryRoles:u}=(0,r.j)(),d=(0,l.n)(),{pageMode:c,pageModeDetails:E}=(0,s.T2)(),{getNotebookEditorState:f,dispatchNotebookEditorStatesMap:p,connectToWebSocket:S,disconnectWebsocket:g,subscribe:_,setHeartbeatPollEndTimeUpdateCallback:h,getWebsocketConnection:m}=(0,i.PW)(),{childFrame:I}=(0,a.KE)()||{},T=(0,o.useCallback)(e=>{var t,o;(null==I||null==(t=I.snowbooks)?void 0:t.dispatchNotebookEditorState)?I.snowbooks.dispatchNotebookEditorState(e):p({id:d,role:n,secondaryRoles:u,queryId:null==E||null==(o=E.historyQueryData)?void 0:o.queryId,pageMode:c,...e})},[p,null==E||null==(e=E.historyQueryData)?void 0:e.queryId,d,n,u,I,c]);return{editorState:f(d,n,u),dispatchNotebookEditorState:T,disconnectWebsocket:(0,o.useCallback)(e=>g(d,n,u,e),[g,d,n,u]),connectToWebSocket:(0,o.useCallback)(e=>{var t;return S({id:d,role:n,secondaryRoles:u,pageMode:c,urlInfo:e,queryId:null==E||null==(t=E.historyQueryData)?void 0:t.queryId})},[S,null==E||null==(t=E.historyQueryData)?void 0:t.queryId,d,n,u,c]),subscribe:_,setHeartbeatPollEndTimeUpdateCallback:h,getWebsocketConnection:(0,o.useCallback)(()=>m(d,n,u),[m,d,n,u])}}},743532:function(e,t,n){n.d(t,{U:()=>s});var o=n(499924),r=n(242051),a=n(755388),i=n(243181),l=n(902417);function s(){let e="get-notebook-history-file-url",{dataDiscoverRole:t,secondaryRoles:n}=(0,r.j)(),{executeQuery:s}=(0,l.U)(t,n,""),{fetchId:u}=(0,a.m)(e);return(0,o.useCallback)(async({notebookId:t,historyQueryId:n})=>{var o,r;let a=(0,i.zd)({fullNotebookIdentifier:t,queryId:n}),{tableData:l}=await s(a,e,u,!0);if(null==(r=l.rows)||null==(o=r[0])?void 0:o[0]){let e=JSON.parse(l.rows[0][0]);if(e.content)return e.content}return""},[e,s,u])}},94705:function(e,t,n){n.d(t,{T2:()=>i,rB:()=>a});var o=n(499924);let r=(0,o.createContext)({pageMode:null,pageModeDetails:null,ownerRole:""}),a=r.Provider,i=()=>(0,o.useContext)(r)},677674:function(e,t,n){n.d(t,{q:()=>h});var o=n(630455),r=n(567410),a=n(609737),i=n(499924),l=n(993914),s=n(254759),u=n(708792),d=n(848270),c=n(559159),E=n(73875),f=n(541344),p=n(911955),S=n(231455);let g=()=>{let e=(0,E.U)(),t=(0,c.L)(),n=a.flags.UI_ENABLE_APEX_FEATURE_32(),i=a.flags.FEATURE_UI_ENABLE_NOTEBOOKS_SCHEDULING(),l=a.flags.UI_ENABLE_NOTEBOOK_FEATURE_10();return(0,o.z)(async(o,a)=>{let{id:s,role:u,secondaryRoles:d,queryId:c,pageMode:E}=o;try{let o=c?await e({notebookId:s,historyQueryId:c}):await t(s,u,d);c&&!o&&(o=await t(s,u,d)),a({type:"LOAD_SUCCEEDED",id:s,role:u,secondaryRoles:d,pageMode:E,error:null,result:o,enforceUUIDAsCellId:n,enableSafeCellIdGeneration:i,isCellNameAndVariableConflictDetectionEnabled:l})}catch(e){(0,r.w)({content:e.message,type:"alert",autoDismiss:!1}),a({type:"LOAD_FAILED",id:s,role:u,secondaryRoles:d,error:e,pageMode:E})}})},_=()=>{let e=(0,f.N)(),t=(0,d._)(),n=(0,u.U)(),{localTimeToServerTime:i}=(0,S.h)(),c=a.flags.UI_ENABLE_NOTEBOOK_FEATURE_24(),E=a.flags.UI_ENABLE_NOTEBOOK_FEATURE_0(),g=(0,p.d)(),_=(0,s.m)(["user"]);return(0,o.z)(async(o,a)=>{var s,u,d,f,p,S,h,m,I;let T,R,{id:v,role:C,secondaryRoles:y,content:N,lastEditStatus:A,isSourceCodeChange:b,lastestNotebookLoadTime:O,currentNotebookViewId:L,pageMode:k}=o,M=N,w="",D="canSave";try{if(c){let{urlId:e}=await n(v,C,y);w=e;let{checkStatus:t,lastEditStatusRetrieved:o}=await g({id:v,urlId:e,currentNotebookViewId:L,lastEditStatusInMemory:A,lastestNotebookLoadTime:O});D=t,R=null!=o?o:void 0,T=null!=(s=null!=o?o:A)?s:void 0}if("canSave"!==D){if(!b)return void a({type:"SAVE_SUCCEEDED",id:v,role:C,secondaryRoles:y,error:null,editStatusToUpdate:R,saveDone:!1,isSourceCodeChange:b,pageMode:k});a({type:"SAVE_FAILED",id:v,role:C,secondaryRoles:y,error:null,editStatusToUpdate:R,isSourceCodeChange:b,saveEligibilityCheckStatus:D,editingUserId:null!=(u=null==T?void 0:T.authorId)?u:"",editingUserName:null!=(d=null==T?void 0:T.authorName)?d:"",editingUserEmail:null==T?void 0:T.authorEmail,lastEditTime:null==T?void 0:T.lastEditTime,pageMode:k});return}if(c&&b){let e=Date.now(),t=i(e);R={notebookId:w,authorId:null!=(S=_.user.currentUserId)?S:"",authorName:null!=(h=null==(f=_.user.currentUser)?void 0:f.username)?h:"",authorEmail:null==(p=_.user.currentUser)?void 0:p.email,sessionId:L,lastEditTime:t};let n=JSON.parse(N);n.metadata.lastEditStatus=R,M=JSON.stringify(n,null,1),T=R}await e(v,C,y,M,!0),a({type:"SAVE_SUCCEEDED",id:v,role:C,secondaryRoles:y,error:null,editStatusToUpdate:R,saveDone:!0,isSourceCodeChange:b,pageMode:k}),await t(v,C,y)}catch(e){if(E&&(0,l.e)(e))return void a({type:"NETWORK_CONDITION_CHANGED",id:v,role:C,secondaryRoles:y,onlineToSnowflakeServer:!1,pageMode:k});if(c&&!b)return void a({type:"SAVE_SUCCEEDED",id:v,role:C,secondaryRoles:y,error:null,editStatusToUpdate:R,saveDone:!1,isSourceCodeChange:b,pageMode:k});(0,r.w)({content:e.message,type:"alert"}),a({type:"SAVE_FAILED",id:v,role:C,secondaryRoles:y,error:e,editStatusToUpdate:R,editingUserId:null!=(m=null==T?void 0:T.authorId)?m:"",editingUserName:null!=(I=null==T?void 0:T.authorName)?I:"",editingUserEmail:null==T?void 0:T.authorEmail,lastEditTime:null==T?void 0:T.lastEditTime,isSourceCodeChange:b,pageMode:k})}})},h=()=>{let e=g(),t=_();return(0,i.useMemo)(()=>({readFromStage:e,writeToStage:t}),[e,t])}},98047:function(e,t,n){n.d(t,{N:()=>m});var o=n(51723),r=n(499924),a=n(67158),i=n(362779),l=n(307134),s=n(979991),u=n(551276),d=n(674337),c=n(3535),E=n(7042),f=n(983339);let p="ui_response_success",S="ui_response_error",g="ui_click",_="ui_visit",h=new Set([d.AzE,d.K5H,d.Uzq,d.RSw,d.y10,d.ua8,d.MSS,d.ImF,d.lWk,d.zrf,d.d0B,d.Mhg,d.zGh,d.iJ8,d.UcJ,d.xAk,d.Ht5,d.vwS,d.wi4,d.dJY,d.MKg,d._KU,d.Hn4,d.YeT,d.foX,d.aDE,d.QuQ,d.z_f,d.yzn,d.F1$,d.AK5,d.Ari,d.ZOT,d.$aC,d.DsD,d.mBO,d.FXf,d.w08,d.G0u,d.ru7,d.kDJ,d.NJ3,d.rxA,d.G8S,d.$V2,d.hPp,d.nJK]);function m(){let{logEventToSnowflakeAndDatadog:e,markEventStart:t,measureEventDuration:n,markE2EEventStart:m,isMarkerSet:I,_getDurationsFromMarker:T}=(0,s.z)(),{logEvent:R}=(0,o.useTelemetry)(),v=(0,u.d)(),C=(0,f.w)(),y=(0,r.useCallback)(t=>{t.data={...t.data,isPrivateLink:v(),isSingleFrame:C},h.has(t.event)&&i.A.isDisallowedDatadogEvent(t)?e(t):R(t)},[v,e,R,C]),N=(0,r.useCallback)(e=>{var t;y({event:d.ImF,type:"ui_performance",data:{...e,notebookRuntime:null!=(t=e.notebookRuntime)?t:"unknown"}})},[y]),A=(0,r.useCallback)((e,t)=>{var n,o;let r=t?T(t):{};y({event:d.lWk,type:p,data:{...e,...r,notebookRuntime:null!=(n=e.notebookRuntime)?n:"unknown",sourceType:null!=(o=e.sourceType)?o:"unknown"}})},[y,T]),b=(0,r.useCallback)((e,t)=>{var n,o;let r=t?T(t):{};y({event:d.zrf,type:S,data:{...e,...r,notebookRuntime:null!=(n=e.notebookRuntime)?n:"unknown",sourceType:null!=(o=e.sourceType)?o:"unknown"}})},[y,T]),O=(0,r.useCallback)((e,t)=>{var n;let o=t?T(t):{};y({event:d.ua8,type:p,data:{...e,...o,notebookRuntime:null!=(n=e.notebookRuntime)?n:"unknown"}})},[y,T]),L=(0,r.useCallback)((e,t)=>{var n;let o=t?T(t):{};y({event:d.MSS,type:S,data:{...e,...o,notebookRuntime:null!=(n=e.notebookRuntime)?n:"unknown"}})},[y,T]),k=(0,r.useCallback)((e,t)=>{var n;let o=t?T(t):{};y({event:d.AzE,type:_,data:{...e,...o,notebookRuntime:null!=(n=e.notebookRuntime)?n:"unknown"}})},[y,T]),M=(0,r.useCallback)(e=>{y({event:d.G$y,type:S,data:e})},[y]),w=(0,r.useCallback)((e,t,n,o)=>{let r=o?T(o):{};y({event:t,type:g,data:{...n,...r,notebookIdentifier:(0,a.m)(e)}})},[y,T]),D=(0,r.useCallback)((e,t,n,o,r)=>{let i=r?T(r):{};t===d.Hn4&&(i.e2eDurationMs=(r?T({...r,event:c.QX,isUserE2E:!0}):{}).e2eDurationMs),y({event:t,type:o?"ui_response_success":"ui_response_error",data:{...n,...i,notebookIdentifier:(0,a.m)(e)}})},[y,T]),U=(0,r.useCallback)((e,t,n)=>{let o=n?T(n):{};y({event:d.Mhg,type:p,data:{...t,...o,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[y,T]),P=(0,r.useCallback)((e,t)=>{y({event:d.zGh,type:p,data:{...t,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[y]),x=(0,r.useCallback)((e,t)=>{y({event:d.QtC,type:p,data:{...t,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[y]),B=(0,r.useCallback)((e,t,n)=>{let o=n?T(n):{},r=(0,E.ne)(t.reason);y({event:r?d.YeT:d.iJ8,type:r?S:p,data:{...t,...o,error:t.error?t.error:r?t.reason:void 0,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[y,T]),F=(0,r.useCallback)((e,t,n)=>{let o=n?T(n):{},r={...t,...o,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)};y({event:d.d0B,type:_,data:r}),t.isReconnect&&y({event:d.foX,type:_,data:r})},[y,T]),G=(0,r.useCallback)((e,t,n)=>{let o=n?T(n):{};y({event:d.xAk,type:_,data:{...t,...o,notebookIdentifier:(0,a.m)(e)}})},[T,y]),V=(0,r.useCallback)((e,t,n)=>{let o=n?T(n):{};y({event:d.Ht5,type:_,data:{...t,...o,notebookIdentifier:(0,a.m)(e)}})},[T,y]),K=(0,r.useCallback)((e,t,n)=>{let o=n?T(n):{};y({event:d.vwS,type:_,data:{...t,...o,notebookIdentifier:(0,a.m)(e)}})},[T,y]),W=(0,r.useCallback)((e,t,n)=>{let o=n?T(n):{};y({event:d.UcJ,type:S,data:{...t,...o,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e),isReconnect:!!t.isReconnect}}),t.isReconnect&&y({event:d.YeT,type:S,data:{...t,...o,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[y,T]),H=(0,r.useCallback)((e,t)=>{var n;let o=T({event:c.Sc,markers:[(0,a.m)(e),null!=(n=t.connectionId)?n:""]})||{};y({event:d.K5H,type:g,data:{...t,...o,notebookRuntime:t.notebookRuntime,notebookIdentifier:(0,a.m)(e)}})},[T,y]),$=(0,r.useCallback)((e,n)=>{t(c.Ti,(0,a.m)(e),n.connectionId||""),y({event:d.Uzq,type:g,data:{...n,notebookRuntime:n.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[y,t]),Q=(0,r.useCallback)((e,t)=>{var n;let o=T({event:c.Ti,markers:[(0,a.m)(e),null!=(n=t.connectionId)?n:""]})||{};y({event:d.y10,type:p,data:{...t,...o,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[T,y]),j=(0,r.useCallback)((e,t)=>{var n;let o=T({event:c.Ti,markers:[(0,a.m)(e),null!=(n=t.connectionId)?n:""]})||{};y({event:d.RSw,type:S,data:{...t,...o,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[T,y]),Y=(0,r.useCallback)((e,t)=>{y({event:d.b0z,type:S,data:{...t,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[y]),z=(0,r.useCallback)((e,t)=>{var n;let o=T({event:c.Ff,markers:[(0,a.m)(e),null!=(n=t.connectionId)?n:""]})||{};y({event:t.error?d.YeT:d.aDE,type:t.error?S:p,data:{...t,...o,reconnectDurationMs:o.durationMs,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}}),(null==o?void 0:o.durationMs)&&l.v.addDurationVital(d.qyZ,{startTime:Date.now()-o.durationMs,duration:o.durationMs})},[y,T]),q=(0,r.useCallback)((e,t,n,o)=>{let r=o?T(o):{};y({event:d.wi4,type:null!=n?n:p,data:{...t,...r,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[y,T]),Z=(0,r.useCallback)((e,t,n,o)=>{let r=o?T(o):{};y({event:d.wi4,type:null!=n?n:S,data:{...t,...r,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[y,T]),J=(0,r.useCallback)((e,t,n,o,r)=>{let i=r?T(r):{};y({event:t,type:o?p:S,data:{...n,...i,notebookRuntime:n.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[y,T]),X=(0,r.useCallback)((e,t,n,o,r)=>{let i=r?T(r):{};y({event:t,type:null!=o?o:p,data:{...n,...i,notebookRuntime:n.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[y,T]),ee=(0,r.useCallback)(({notebookId:e,event:t,eventData:n,eventType:o,markerInfo:r,pageMode:i})=>{let l=r?T(r):{};y({event:t,type:o,data:{...n,...l,notebookRuntime:n.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e),pageMode:i}})},[y,T]),et=(0,r.useCallback)((e,t,n,o,r)=>{let i=r?T(r):{};y({event:t,type:null!=o?o:p,data:{...n,...i,notebookRuntime:n.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[y,T]),en=(0,r.useCallback)((e,n,o)=>{t(c.nL,(0,a.m)(e),n.connectionId||"");let r={...n,notebookRuntime:n.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)};y({event:d.QuQ,type:g,data:r})},[y,t]),eo=(0,r.useCallback)((e,t)=>{var n;let o=T({event:c.nL,markers:[(0,a.m)(e),null!=(n=t.connectionId)?n:""]})||{};y({event:t.error?d.yzn:d.z_f,type:t.error?S:p,data:{...t,...o,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[T,y]),er=(0,r.useCallback)((e,t)=>{var n;let o=T({event:c.Ff,markers:[(0,a.m)(e),null!=(n=t.connectionId)?n:""]})||{};y({event:d.FXf,type:t.error?S:p,data:{...t,...o,reconnectDurationMs:o.durationMs,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[T,y]),ea=(0,r.useCallback)((e,t)=>{y({event:d.Nr9,type:"ui_impression",data:{...t,notebookRuntime:t.notebookRuntime||"unknown",notebookIdentifier:(0,a.m)(e)}})},[y]),ei=(0,r.useCallback)(e=>{var t;y({event:d.rxA,type:p,data:{...e,notebookRuntime:null!=(t=e.notebookRuntime)?t:"unknown"}})},[y]),el=(0,r.useCallback)((e,t)=>{var n;let o=t?T(t):{};y({event:d.G8S,type:e.error?S:p,data:{...e,...o,notebookRuntime:null!=(n=e.notebookRuntime)?n:"unknown"}})},[y,T]),es=(0,r.useCallback)(e=>{var t;y({event:d.$V2,type:p,data:{...e,notebookRuntime:null!=(t=e.notebookRuntime)?t:"unknown"}})},[y]),eu=(0,r.useCallback)((e,t)=>{var n;let o=t?T(t):{};y({event:e.error?d.hPp:d.nJK,type:e.error?S:p,data:{...e,...o,notebookRuntime:null!=(n=e.notebookRuntime)?n:"unknown"}})},[y,T]);return(0,r.useMemo)(()=>({logCreateStarted:N,logCreateSuccess:A,logCreateFailed:b,logRenameSuccess:O,logRenameFailed:L,logNotebookEditEvent:et,logOpenDetailPage:k,logError:M,logCellUITelemetry:w,logCellRunTelemetry:D,logWebsocketConnected:U,logWebsocketDisconnected:B,logWebsocketControlMessage:P,logWebsocketStartConnecting:F,logWebsocketHeartbeat:G,logWebsocketHeartbeatStart:V,logWebsocketHeartbeatEnd:K,logWebsocketConnectError:W,logWebsocketConnectionStateChange:x,logSessionReconnectCompleted:z,logSessionEnd:H,logSessionStarting:$,logSessionStartSuccess:Q,logSessionStartFailed:j,logSessionErrorMessage:Y,logKernelRestartBegin:en,logKernelRestartEnd:eo,logRunRequested:q,logRunRequestedError:Z,logRunEvent:J,logIPYNBEvent:X,markEventStart:t,markE2EEventStart:m,measureEvent:n,isMarkerSet:I,logNotebookEvent:ee,logSessionReconnectDetails:er,logNotebookPackageUpdateAlert:ea,logSharePageLoadStarted:ei,logSharePageLoadCompleted:el,logShareStarted:es,logShareCompleted:eu}),[D,w,N,b,et,A,M,X,k,L,O,J,q,Z,W,U,P,F,B,x,G,V,K,z,H,$,Q,j,Y,en,eo,t,m,n,I,ee,er,ea,ei,el,es,eu])}},810054:function(e,t,n){n.d(t,{d:()=>r});var o=n(499924);let r=({observerEnabled:e,visibleCallback:t})=>{(0,o.useEffect)(()=>{let n=()=>{e&&"visible"===document.visibilityState&&t&&t()};return document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",n)}},[e,t])}},759331:function(e,t,n){n.d(t,{J0:()=>g,ZN:()=>p});var o=n(184168),r=n(436081),a=n(77822),i=n(236689),l=n(145753),s=n(233174),u=n(499924),d=n(778098),c=n(475085),E=n(337211);let f=[],p=e=>{f.push(e)},S=({reconnect:e})=>{var t;let{formatMessage:n}=(0,d.Z)(),p=n({id:"Cancel"}),S=n({id:"Restart session"}),g=n({id:"OK"}),_=null==(t=u.useContext(r.iL).current)?void 0:t.hideLayer,{editorState:h}=(0,E.P)(),m=(null==h?void 0:h.udfConnectionStatus)===c.Q.NotConnected,I=u.useCallback(()=>{null==_||_()},[_]),T=u.useCallback(()=>{null==_||_(),f.forEach(e=>{e.hide()}),f.length=0},[_]),R=u.useCallback(()=>{e(),f.forEach(e=>{e.hide()}),f.length=0,null==_||_()},[_,e]);return(0,o.jsxs)(a.Pb,{width:500,children:[(0,o.jsx)(a.fK,{children:n({id:"Session ended"})}),(0,o.jsx)(a.a7,{children:(0,o.jsx)(i.x,{color:l.Q2.secondaryTextColor,paddingLeft:8,paddingRight:8,children:n(m?{id:"There was an unexpected problem with the container, and your session ended. Do you want to restart your session?"}:{id:"There was an unexpected problem with the container, and your session ended. A new container will be in use after the session restarts."})})}),(0,o.jsx)(a.cN,{children:m?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.zx,{onClick:I,label:p,marginRight:8,children:p}),(0,o.jsx)(s.zx,{onClick:R,label:S,use:"primary",children:S})]}):(0,o.jsx)(s.zx,{onClick:T,label:g,use:"primary",children:g})})]})};S.displayName="RestartContainerDialog";let g=e=>{let[t,{showLayer:n}]=(0,a.Rh)((0,o.jsx)(S,{reconnect:e}));return u.useLayoutEffect(()=>()=>{},[n]),t}},514248:function(e,t,n){n.d(t,{H:()=>a});var o=n(437239);let r={debug:10,info:20,error:30,reportError:40},a={cacheFiller:new class{constructor(e,t){this.debug=(e,t)=>{if(this.logLevel<=r.debug){let n=null!=t?JSON.stringify(t):"";console.debug(this.category+e,n)}},this.error=(e,t)=>{if(this.logLevel<=r.error){let n=null!=t?JSON.stringify(t):"";console.error(this.category+e,n)}},this.info=(e,t)=>{if(this.logLevel<=r.info){let n=null!=t?JSON.stringify(t):"";console.info(this.category+e,n)}},this.reportError=(e,t,n)=>{this.logLevel<=r.reportError&&(0,o.k)(t,{domain:"notebooks",loggingCategory:this.rawCategory,type:e,...n})},this.assertOrReport=(e,t,n,o)=>{e||this.reportError(t,n,o)},this.logLevel=null!=t?t:r.reportError,this.rawCategory=null!=e?e:"NOTEBOOK",this.category="["+this.rawCategory+"] "}}("CACHE_FILLER",r.error)}},681131:function(e,t,n){n.d(t,{KE:()=>l,QI:()=>i,r9:()=>a});var o=n(184168),r=n(499924);let a=(0,r.createContext)(null),i=({children:e,...t})=>{let[n,i]=(0,r.useState)(null),[l,s]=(0,r.useState)(null),[u,d]=(0,r.useState)(t.methods||null),[c,E]=(0,r.useState)(t.iframeSrcProps||null),f=(0,r.useMemo)(()=>({methods:u,childFrame:n,childIframeEl:l,iframeSrcProps:c,setMethods:d,setChildFrame:i,setChildIframeEl:s,setIframeSrcProps:E}),[u,n,l,c]);return(0,o.jsx)(a.Provider,{value:f,children:e})};i.displayName="NotebookIframeProvider";let l=()=>{let e=(0,r.useContext)(a);return e||null}},557078:function(e,t,n){n.d(t,{JM:()=>s,VN:()=>l,ZF:()=>u,k$:()=>d});var o=n(750129),r=n(237257),a=n(522295),i=n(499924);let[l,s,u,d]=(0,r.Z)(function({parentOrigin:e}){let t=(0,i.useRef)(null),n=(0,i.useRef)(null),[r,l]=(0,i.useState)(null),[s,u]=(0,i.useState)(void 0),[d,c]=(0,i.useState)(null);return(0,i.useEffect)(()=>{n.current=d},[d]),(0,i.useEffect)(()=>{null===t.current&&(t.current=(0,a.y1)({parentOrigin:e,methods:{snowbooks:{syncState:e=>{u({...e})},dispatchNotebookEditorState:e=>{var t;null==(t=n.current)||t.call(n,e)}}},debug:!1}),t.current.promise.then(e=>{l(e)}).catch(e=>{o.log.error("[Snowbooks] Error connecting to parent:",e)}))},[e]),(0,i.useEffect)(()=>()=>{var e;null==(e=t.current)||e.destroy(),l(null)},[]),{snowbooksParent:r,snowbooksState:s,setDispatchNotebookEditorState:c}},e=>e.snowbooksParent,e=>e.snowbooksState,e=>e.setDispatchNotebookEditorState)},708792:function(e,t,n){n.d(t,{U:()=>l});var o=n(735736),r=n(557078),a=n(242574);function i(){let e=(0,r.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.describeFileBasedEntity}function l(){return(0,a.U)(o.U,i)()}},699395:function(e,t,n){n.d(t,{C:()=>l});var o=n(979325),r=n(557078),a=n(242574);function i(){var e;let t=(0,r.ZF)();return!!(null==t||null==(e=t.notebookMetadata)?void 0:e.isContainerRuntime)}function l(e){return(0,a.U)(o.C,i)(e)}},848270:function(e,t,n){n.d(t,{_:()=>l});var o=n(787679),r=n(557078),a=n(242574);function i(){let e=(0,r.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.refreshLastUpdatedInfo}function l(){return(0,a.U)(o._,i)()}},559159:function(e,t,n){n.d(t,{L:()=>l});var o=n(116952),r=n(557078),a=n(242574);function i(){let e=(0,r.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.checkoutOrAddVersionAndRead}function l(){return(0,a.U)(o.L,i)()}},413941:function(e,t,n){n.d(t,{l:()=>l});var o=n(882682),r=n(557078),a=n(242574);function i(){let e=(0,r.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.createWebsocketProtoParams}function l(){return(0,a.U)(o.l,i)()}},410471:function(e,t,n){n.d(t,{M:()=>l});var o=n(219247),r=n(557078),a=n(242574);function i(){let e=(0,r.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.deleteNotebookInstances}function l(){return(0,a.U)(o.M,i)()}},48538:function(e,t,n){n.d(t,{P:()=>l});var o=n(838783),r=n(557078),a=n(242574);function i(){let e=(0,r.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.fetchNotebookAuthToken}function l(){return(0,a.U)(o.P,i)()}},558586:function(e,t,n){n.d(t,{W:()=>l});var o=n(862399),r=n(557078),a=n(242574);function i(){let e=(0,r.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.fetchNotebookUrlInfo}function l(){return(0,a.U)(o.W,i)()}},73875:function(e,t,n){n.d(t,{U:()=>l});var o=n(743532),r=n(557078),a=n(242574);function i(){let e=(0,r.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.getNotebookHistoryFile}function l(){return(0,a.U)(o.U,i)()}},683722:function(e,t,n){n.d(t,{k:()=>l});var o=n(255379),r=n(557078),a=n(242574);function i(){let e=(0,r.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.saveNotebookUserSessionSettings}function l(){return(0,a.U)(o.k,i)()}},430852:function(e,t,n){n.d(t,{a:()=>l});var o=n(557078),r=n(242574);function a(){let e=(0,o.JM)();return(null==e?void 0:e.snowbooks)?t=>{var n;if(!t.notebookState)return;let o={...t,notebookState:null==(n=t.notebookState)?void 0:n.toJson()};e.snowbooks.reifyNotebookEditorState(o)}:()=>{}}function i(){return()=>{}}let l=()=>(0,r.U)(i,a)()},541344:function(e,t,n){n.d(t,{N:()=>l});var o=n(708990),r=n(557078),a=n(242574);function i(){let e=(0,r.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.writeToStageByObject}function l(){return(0,a.U)(o.Nk,i)()}},954612:function(e,t,n){n.d(t,{Z:()=>l});var o=n(181670),r=n(557078),a=n(242574);function i(){let e=(0,r.JM)();if(!e)throw Error("Parent frame connection not available");return e.snowbooks.fetchSystemDate}function l(){return(0,a.U)(o.Z,i)()}},148211:function(e,t,n){n.d(t,{HE:()=>i,LU:()=>a});var o=n(750129),r=n(164214);class a{send(e){if(this.readyState===WebSocket.CONNECTING)return void this.messageQueue.push(e.toString());if(this.readyState!==WebSocket.OPEN)throw Error("WebSocket is not open");window.parent.postMessage({type:"NOTEBOOK_IFRAME_WEBSOCKET_SEND",connectionId:this.connectionId,payload:e},this.origin)}close(e,t){this.readyState!==WebSocket.CLOSED&&(this.readyState=WebSocket.CLOSING,window.parent.postMessage({type:"NOTEBOOK_IFRAME_WEBSOCKET_CLOSE",connectionId:this.connectionId,payload:{code:e,reason:t}},this.origin))}destroy(){window.removeEventListener("message",this.handleParentMessage)}constructor(e,t){this.messageQueue=[],this.readyState=WebSocket.CONNECTING,this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.CONNECTING=WebSocket.CONNECTING,this.OPEN=WebSocket.OPEN,this.CLOSING=WebSocket.CLOSING,this.CLOSED=WebSocket.CLOSED,this.binaryType="blob",this.protocol="",this.url="",this.bufferedAmount=0,this.extensions="",this.handleParentMessage=e=>{var t,n,o,r;if(e.origin!==window.__SNOWSIGHT_NOTEBOOK_PARENT_ORIGIN||e.source!==window.parent)return;let{type:a,connectionId:i,payload:l}=e.data;if(i===this.connectionId)switch(a){case"NOTEBOOK_PARENT_WEBSOCKET_OPEN":this.readyState=WebSocket.OPEN,null==(t=this.onopen)||t.call(this,new Event("open")),this.messageQueue.forEach(e=>this.send(e)),this.messageQueue=[];break;case"NOTEBOOK_PARENT_WEBSOCKET_MESSAGE":null==(n=this.onmessage)||n.call(this,new MessageEvent("message",{data:l}));break;case"NOTEBOOK_PARENT_WEBSOCKET_ERROR":null==(o=this.onerror)||o.call(this,new Event("error"));break;case"NOTEBOOK_PARENT_WEBSOCKET_CLOSE":this.readyState=WebSocket.CLOSED,null==(r=this.onclose)||r.call(this,new CloseEvent("close",l))}},this.url=e,this.protocol=Array.isArray(t)?t[0]:t||"",this.origin=window.__SNOWSIGHT_NOTEBOOK_PARENT_ORIGIN||"null",this.connectionId=(0,r.Z)(),window.addEventListener("message",this.handleParentMessage),window.parent.postMessage({type:"NOTEBOOK_IFRAME_WEBSOCKET_CREATE",connectionId:this.connectionId,payload:{url:e,protocols:t}},this.origin)}}a.CONNECTING=0,a.OPEN=1,a.CLOSING=2,a.CLOSED=3;class i{createWebSocket(e,t,n){if(!this.supportedUrls.includes(t))return void o.log.error("Unsupported URL");let r=new WebSocket(t,n);r.binaryType="arraybuffer";let a={websocket:r,childWindow:this.childWindow,origin:this.origin};this.connections.set(e,a),r.onopen=()=>{this.childWindow.postMessage({type:"NOTEBOOK_PARENT_WEBSOCKET_OPEN",connectionId:e},this.origin)},r.onmessage=t=>{this.childWindow.postMessage({type:"NOTEBOOK_PARENT_WEBSOCKET_MESSAGE",connectionId:e,payload:t.data},this.origin)},r.onerror=()=>{this.childWindow.postMessage({type:"NOTEBOOK_PARENT_WEBSOCKET_ERROR",connectionId:e},this.origin)},r.onclose=t=>{this.childWindow.postMessage({type:"NOTEBOOK_PARENT_WEBSOCKET_CLOSE",connectionId:e,payload:{code:t.code,reason:t.reason,wasClean:t.wasClean}},this.origin),this.connections.delete(e)}}destroy(){for(let[e,t]of(window.removeEventListener("message",this.handleChildMessage),this.connections))t.websocket.close(),this.connections.delete(e)}constructor(e,t,n){this.connections=new Map,this.handleChildMessage=e=>{let t;if(e.origin!==this.origin||e.source!==this.childWindow)return;let{type:n,connectionId:o,payload:r}=e.data;switch(n){case"NOTEBOOK_IFRAME_WEBSOCKET_CREATE":this.createWebSocket(o,r.url,r.protocols);break;case"NOTEBOOK_IFRAME_WEBSOCKET_SEND":var a;null==(a=this.connections.get(o))||a.websocket.send(r);break;case"NOTEBOOK_IFRAME_WEBSOCKET_CLOSE":(t=this.connections.get(o))&&(t.websocket.close(r.code,r.reason),this.connections.delete(o))}},this.childWindow=e,this.origin=t,this.supportedUrls=n,window.addEventListener("message",this.handleChildMessage)}}},242574:function(e,t,n){n.d(t,{U:()=>a});var o=n(499924),r=n(983339);function a(e,t){let n=(0,o.useRef)(e),a=(0,o.useRef)(!1),i=(0,r.w)();return window.__SNOWSIGHT_NOTEBOOK_PARENT_ORIGIN&&i&&!a.current&&(a.current=!0,n.current=t),n.current}},607856:function(e,t,n){n.d(t,{D:()=>T});var o=n(467131),r=n(499269),a=n(771661),i=n(436978),l=n(271165),s=n(208961),u=n(564914),d=n(406037),c=n(393703),E=n(421922),f=n(701724),p=n(893018),S=n(657308),g=n(450044),_=n(129642),h=n(749341),m=n(243242);let I={START_LOADING:s.Av,LOAD_SUCCEEDED:s.pT,LOAD_FAILED:s.vh,START_SAVING:E.v,SAVE_SUCCEEDED:s.JQ,SAVE_FAILED:s.h1,UPDATE_NOTEBOOK_RUNTIME:p.O,SET_URL_ID_AND_RESULT_HEIGHT_MAP:s._9,FETCH_RESOURCE_USAGE:s.$R,SET_BOTTOM_BAR_STATE:s.U3,UPDATE_EDIT_STATUS:f.V,SET_NOTEBOOK_URL_INFO:c.u,ADD_CELL:s.i6,MODIFIED_CELL:s.dG,ADD_AND_MODIFY_CELL:s.p9,CELL_LANGUAGE:s.S4,CELL_CONTENT_STATE:s.xM,CELL_RESULT_HEIGHT:s.eQ,REMOVE_CELL:s.rZ,INSERT_BEFORE_CELL:s.B8,MOVE_CELL_UP:s.aF,MOVE_CELL_DOWN:s.Vd,ADVANCE_CELL:s.e7,UPDATE_SELECTED_CELL:s.n5,UNSELECT_CELL:s.X0,RENAME_CELL:s.em,UPDATE_MARKDOWN_CELL_RESULT:s.ch,RECEIVE_MESSAGE:s.QM,RECEIVE_CONTROL_MESSAGE:s.E7,RUN_NOTEBOOK:s.mW,CLEAR_CODE_RESULTS:s.Gl,RUN_NOTEBOOK_FAILED:s.EY,CANCEL_EXECUTION:s.qg,SHUTDOWN_NOTEBOOK:s.ov,START_NOTEBOOK:s.rM,RECONNECT_NOTEBOOK:s.iD,RESTART_NOTEBOOK:s.g3,RESTART_KERNEL:S.n,CLEAR_DISCONNECT_REASON:s.Ru,UPDATE_NOTEBOOK_SESSION_SETTINGS:_.w,SET_EXECUTION_CONFIGURATIONS:g.a,WEBSOCKET_UNMOUNTED:s.B_,WEBSOCKET_START_CONNECTING:s.rr,WEBSOCKET_CONNECTED:s.BX,WEBSOCKET_DISCONNECTED:s.Rx,WEBSOCKET_CONNECTION_ERROR:s.WS,NETWORK_CONDITION_CHANGED:h.n,UPDATE_PACKAGE:s.$y,UPDATE_PACKAGE_FAILED:s.kB,UPDATE_PACKAGE_DONE:s.y9,START_FETCHING_CACHED_RESULTS:s.v2,START_FETCHING_CACHE_RESULT:s.Xt,FETCHING_CACHE_TIMED_OUT:s.Qy,SET_NON_INTERACTIVE_MODE:s.ke,RESET_STATE:d.o,REPLACE_STATE:u.l,...a.j},T=(e,t,n)=>(a,s,u)=>{u(()=>(function(e,t){for(let n of t)try{n(e)}catch(e){o.cM.error(e,{message:"An error occurred in the notebook event listener"})}})(s,e));let d=(0,r.ZP)(a,e=>{let{type:t,id:n,role:o,secondaryRoles:r,pageMode:a}=s,d=(0,i.E)(n,o,r);if(e[d]||(e[d]=(0,m.a)({})),(0,l.X)(s)){var c;e[d].sessionLifecycleState={...null!=(c=e[d].sessionLifecycleState)?c:{},latestUserInteractionTime:Date.now()},u({type:"triggerUserInteractionKeepalive",id:n,role:o,secondaryRoles:r,pageMode:a})}let E=I[t];void 0!==E&&E(e[d],s,u)});if(n&&t){let{id:e,role:t,secondaryRoles:n,pageMode:o}=s;u({type:"syncNotebookEditorState",notebookEditorState:d[(0,i.E)(e,t,n)],id:e,role:t,secondaryRoles:n,pageMode:o})}return d}},655266:function(e,t,n){n.d(t,{Hx:()=>ei,PW:()=>eo,QE:()=>er});var o=n(184168),r=n(630455),a=n(567410),i=n(467131),l=n(237257),s=n(269782),u=n.n(s),d=n(499924),c=n(778098),E=n(657321),f=n(164214),p=n(67158),S=n(962689),g=n(254759),_=n(551276),h=n(243100),m=n(708792),I=n(307134),T=n(609737),R=n(896426),v=n(459510),C=n(562940),y=n(936057),N=n(638021),A=n(893538),b=n(367092),O=n(827513),L=n(998082),k=n(730434),M=n(139545),w=n(983339),D=n(677674),U=n(98047),P=n(413941),x=n(410471),B=n(48538),F=n(558586),G=n(683722),V=n(430852),K=n(148211),W=n(3535),H=n(475085),$=n(443104),Q=n(972590),j=n(436978),Y=n(607856),z=n(64472),q=n(909569),Z=n(854069),J=n(686258),X=n(920597),ee=n(501617);let[et,en]=(0,l.Z)(()=>(function(){let{formatMessage:e}=(0,c.Z)(),t=(0,m.U)(),{openDialog:n,hideDialog:l}=(0,k.E)(),{triggerDialog:s}=(0,b.b)(),et=(0,U.N)(),en=T.flags.UI_ENABLE_NOTEBOOK_LARGE_MESSAGE_CACHE(),eo=T.flags.FEATURE_UI_ENABLE_NOTEBOOKS_SCHEDULING(),er=T.flags.NOTEBOOK_ENABLE_IDLE_HEARTBEAT(),ea=T.flags.NOTEBOOK_IDLE_HEARTBEAT_TIMEOUT_SECONDS(),ei=T.flags.NOTEBOOK_CACHE_FETCHING_TIMEOUT_SECONDS(),el=T.flags.UI_ENABLE_NOTEBOOK_FEATURE_1(),es=T.flags.UI_ENABLE_NOTEBOOK_FEATURE_21(),eu=T.flags.UI_ENABLE_NOTEBOOK_FEATURE_22(),ed=(0,w.w)(),ec=void 0!==window.__SNOWSIGHT_NOTEBOOK_PARENT_ORIGIN,eE=(0,C.J)(),ef=T.flags.NOTEBOOK_UPDATE_PACKAGE_TIMEOUT_SECONDS()||300,ep=T.flags.UI_ENABLE_NOTEBOOK_JUPYTER_VARIABLE_SEMANTICS(),eS=T.flags.UI_ENABLE_NOTEBOOK_FEATURE_25(),eg=T.flags.UI_ENABLE_NOTEBOOK_FEATURE_30(),e_=T.flags.UI_ENABLE_NOTEBOOK_FEATURE_40(),eh=(0,d.useRef)({}),em=T.flags.UI_ENABLE_NOTEBOOK_FEATURE_29(),eI=T.flags.STREAMLIT_WEBSOCKET_IDLE_TIMEOUT(),eT=T.flags.UI_ENABLE_NOTEBOOK_FEATURE_45()||ed,eR=(0,d.useRef)(null),{organization:ev}=(0,g.m)(["organization"]),{region:eC,org:ey}=ev.currentRegionAndOrgInfoFromOrganization,{readFromStage:eN,writeToStage:eA}=(0,D.q)(),eb=(0,G.k)(),eO=(0,d.useCallback)((e,t,n)=>void eN(t,n),[eN]),eL=(0,d.useCallback)((e,t,n)=>{let{id:o}=t;et.markEventStart(W.gr,(0,p.m)(o)),eA(t,n)},[eA,et]),ek=(0,d.useMemo)(()=>u()(eL,3e3,{trailing:!0}),[eL]),eM=(0,_.d)(),ew=(0,P.l)(),eD=(0,x.M)(),eU=(0,F.W)(),eP=(0,B.P)(),ex=(0,r.z)(async({id:e,role:t,secondaryRoles:n,urlInfo:o,queryId:r,connectExistingSession:a=!0,loadCachedResultsAfterConnection:i=!1,pageMode:l})=>{var s,u,d;let c=(0,j.E)(e,t,n),E=eh.current;(null==(s=E[c])?void 0:s.connection.isConnected())&&(null==(d=E[c])||d.connection.disconnect("NOTEBOOK_RECONNECT"));let S=f.Z(),g=tm[c],_=null==g?void 0:g.notebookRuntime,m=!!r,R=a&&!m,{ConnectionManager:C,webSocketProtoParams:y,urlInfo:N}=await (0,ee._)({isParallelFetchEnabled:T.flags.UI_ENABLE_NOTEBOOK_FEATURE_54(),urlInfo:o,getNotebookUrlInfo:()=>eU({id:e,role:t,secondaryRoles:n,isPrivatelink:eM(),isNotebookPrivateLinkEnabled:!!em}),getWebsocketProtoParams:()=>R?ew(e):Promise.resolve({additionalProtoParams:[],activeInstanceJobId:null,activeNotebookInstancesNum:void 0,additionalMetadata:void 0})});tI({type:"SET_NOTEBOOK_URL_INFO",id:e,role:t,secondaryRoles:n,urlInfo:N,pageMode:l});let{additionalProtoParams:A,activeInstanceJobId:b,activeNotebookInstancesNum:O,additionalMetadata:L}=y,k=[(0,p.m)(e),S];et.markEventStart(W.x5,...k),et.markEventStart(W.wT,S||"UNKNOWN"),O&&et.markEventStart(W.Ff,(0,p.m)(e),S),et.logWebsocketStartConnecting(e,{connectionId:S,notebookViewId:null==g||null==(u=g.sessionLifecycleState)?void 0:u.notebookViewId,notebookRuntime:_,pageMode:l,isReconnect:!!O,reconnectInstanceId:null!=b?b:void 0,skipPingEnabled:eT}),tI({type:"WEBSOCKET_START_CONNECTING",id:e,role:t,secondaryRoles:n,pageMode:l,numOfActiveSessions:O});let M=!!(O&&g&&"notStarted"!==g.runStatus&&!m),w=[],D=e=>{w.includes(e)||w.push(e)},U=e=>{let t=w.indexOf(e);t>=0&&w.splice(t,1)},P=e=>{let t=!0;for(let n of w)if(!(t=n.onMessage(e)))break;return t},x=e=>{let t=!0;for(let n of w)if(!(t=n.onSendMessage(e)))break;return t},B=e=>{let t=!0;for(let n of w)if(!(t=n.onControlMessage(e)))break;return t},F=(e,t,n)=>{let o=[];for(let r of w)r.onConnectionChange(e,t,n)||o.push(r);for(let e of o)U(e)},G=Date.now();return new Promise((o,a)=>{E[c]={registerHandler:D,unregisterHandler:U,sendMessage:e=>{if(x(e)){var t;null==(t=E[c])||t.connection.sendMessage(e)}},connection:new C({connectionId:S,additionalProtocolParams:A,skipPingEnabled:eT,onMessage:o=>{var r;S===(null==(r=E[c])?void 0:r.connectionId)&&(eE?P(o)&&tI({type:"RECEIVE_MESSAGE",id:e,role:t,secondaryRoles:n,message:o,pageMode:l}):tI({type:"RECEIVE_MESSAGE",id:e,role:t,secondaryRoles:n,message:o,pageMode:l}))},onControlMessage:o=>{var r,a;S===(null==(r=E[c])?void 0:r.connectionId)&&(eE?B(o)&&tI({type:"RECEIVE_CONTROL_MESSAGE",id:e,role:t,secondaryRoles:n,message:o,isNotebookRestartKernelEnabled:eg,pageMode:l,updatePackageTimeoutId:tr.current}):tI({type:"RECEIVE_CONTROL_MESSAGE",id:e,role:t,secondaryRoles:n,message:o,isNotebookRestartKernelEnabled:eg,updatePackageTimeoutId:tr.current,pageMode:l}),et.logWebsocketControlMessage(e,{connectionId:S,notebookViewId:null==g||null==(a=g.sessionLifecycleState)?void 0:a.notebookViewId,notebookRuntime:_,messageJson:o.toJSON(),pageMode:l}))},onConnectionError:o=>{var r,i;if(S!==(null==(r=E[c])?void 0:r.connectionId))return;let s="string"==typeof o?o:"Unknown error";et.logWebsocketConnectError(e,{connectionId:S,notebookViewId:null==g||null==(i=g.sessionLifecycleState)?void 0:i.notebookViewId,notebookRuntime:_,error:s,pageMode:l,isReconnect:!!O,reconnectInstanceId:null!=b?b:void 0},{event:W.x5,markers:k}),tI({type:"WEBSOCKET_CONNECTION_ERROR",id:e,role:t,secondaryRoles:n,error:s,pageMode:l}),a()},connectionStateChanged:(r,s,u)=>{var d,f,p,h,m,T,R;if(S===(null==(d=E[c])?void 0:d.connectionId))switch(F(r,s,u),r){case v.e.CONNECTED:tI({type:"WEBSOCKET_CONNECTED",id:e,role:t,secondaryRoles:n,idOfAlreadyRunningInstance:null!=b?b:void 0,pageMode:l,streamlitVersionOfAlreadyRunningInstance:null==L?void 0:L.streamlitVersionOfAlreadyRunningInstance}),M&&tI({type:"START_NOTEBOOK",id:e,role:t,secondaryRoles:n,userTriggered:!1,pageMode:l,isReplayingMessagesAfterReconnect:!0}),i&&tI({type:"START_FETCHING_CACHED_RESULTS",id:e,role:t,secondaryRoles:n,pageMode:l}),et.logWebsocketConnected(e,{connectionId:S,notebookViewId:null==g||null==(f=g.sessionLifecycleState)?void 0:f.notebookViewId,notebookRuntime:_,connectionState:"CONNECTED",reason:u,error:s,isReconnect:!!O,reconnectInstanceId:null!=b?b:void 0,pageMode:l},{event:W.x5,markers:k}),I.v.addDurationVital(W.P7,{startTime:G,duration:Date.now()-G,context:{isReconnect:!!O,reconnectInstanceId:null!=b?b:void 0,skipPingEnabled:eT}}),o();break;case v.e.DISCONNECTED_FOREVER:tI({type:"WEBSOCKET_DISCONNECTED",id:e,role:t,secondaryRoles:n,pageMode:l,reason:u}),null==(p=e2.current)||p.stop(),e2.current=null,eu&&eX(-1),et.logWebsocketDisconnected(e,{connectionId:S,notebookViewId:null==g||null==(h=g.sessionLifecycleState)?void 0:h.notebookViewId,notebookRuntime:_,connectionState:r,reason:u,error:s,isReconnect:!!O,reconnectInstanceId:null!=b?b:void 0,pageMode:l},{event:W.x5,markers:k}),u===H.w.NOTEBOOK_IDLE_TIMEOUT&&et.logSessionEnd(e,{connectionId:S,notebookViewId:null==g||null==(m=g.sessionLifecycleState)?void 0:m.notebookViewId,sessionStartId:null==g||null==(T=g.sessionLifecycleState)?void 0:T.sessionStartId,notebookRuntime:_,connectionState:r,reason:u,error:s,isReconnectEnabled:!0,pageMode:l}),a();break;default:et.logWebsocketConnectionStateChange(e,{connectionId:S,notebookViewId:null==g||null==(R=g.sessionLifecycleState)?void 0:R.notebookViewId,notebookRuntime:_,connectionState:r,reason:u,error:s,isReconnect:!!O,reconnectInstanceId:null!=b?b:void 0,pageMode:l})}},claimHostAuthToken:async()=>await eP({id:e,role:t,secondaryRoles:n,queryId:r,isHistoryQueryResultEnabled:eo}),resetHostAuthToken:h.EI,setAllowedOriginsResp:h.EI,baseUriParts:N.baseUriParts,isHttps:N.isHttps,isLargeMessageCacheEnabled:en,createWebSocket:(e,t)=>ed&&ec?new K.LU(e,t):new WebSocket(e,t)}),urlInfo:N,connectionId:S}})}),eB=(0,r.z)((e,t,n,o)=>{var r;let a=(0,j.E)(e,t,n),i=null==(r=eh.current[a])?void 0:r.connection;i&&(null==i||i.disconnect(o),eh.current[a]=void 0)}),eF=(0,r.z)(async(t,n)=>{var o,r,i;let{id:l,role:s,secondaryRoles:u,cellRunType:d,runCellId:c,cells:E,clientState:f,eventType:S,notebookRuntime:g,pageMode:_}=t,h=(0,j.E)(l,s,u);(1===d||7===d)&&et.markEventStart(W.bZ,(0,p.m)(l)),E.forEach(e=>{var t,n;et.markEventStart(W.QX,null!=(t=e.id)?t:""),et.markE2EEventStart(W.QX,null!=(n=e.id)?n:"")});let m=tT(l,s,u),I=eh.current[h];if(void 0===I||I.connection.isDisconnected()){try{await ex({id:l,role:s,secondaryRoles:u,pageMode:_}),I=eh.current[h]}catch(e){}if(e_&&I){let{settingsUpdateTime:e,settings:t}=null!=(o=null==m?void 0:m.notebookSessionSettingsState)?o:{};e&&t&&I.connection.sendControlMessage({clientControlRequest:{executeConfigurationUpdateRequest:{runtime:t.runtimeName,queryWarehouse:t.queryWarehouse,codeWarehouse:t.codeWarehouse,computePool:t.computePool,externalIntegrations:t.externalAccessIntegrations,roleSelection:(0,O.h)(t.role,t.secondaryRoles),idleShutdownSecs:t.idleAutoShutdownTimeSeconds,...t.mainFilePath?{mainFile:t.mainFilePath}:{}}}})}}else try{await I.connection.waitForConnection()}catch(e){}if(void 0!==I&&I.connection.isConnected()){let e={cellRunType:d,cellUpdateSemantics:1,cellInteractionSemantics:+!ep,runCellId:c};eS&&(e={...e,userErrorHandlingSemantics:0}),eE?I.sendMessage({runCells:{...e,cells:E,clientState:f}}):I.connection.sendMessage({runCells:{...e,cells:E,clientState:f}}),et.logRunRequested(l,{...e,connectionId:I.connectionId,notebookViewId:null==m||null==(i=m.sessionLifecycleState)?void 0:i.notebookViewId,notebookRuntime:g,runId:c,pageMode:_},null!=S?S:"ui_click")}else(0,a.w)({content:e({id:"Connection is not ready yet"}),type:"alert",autoDismiss:!1}),et.logRunRequestedError(l,{error:"Connection is not ready yet",connectionId:(null==I?void 0:I.connectionId)||"",notebookViewId:null==m||null==(r=m.sessionLifecycleState)?void 0:r.notebookViewId,notebookRuntime:g,pageMode:_,runId:c},null!=S?S:"ui_response_error"),n({type:"RUN_NOTEBOOK_FAILED",id:l,role:s,secondaryRoles:u,pageMode:_})}),eG=(0,X.q)(eh.current,e=>{e.connection.isConnected()&&(eE?e.sendMessage({controlRequest:{cancelExecution:{cancelType:0}}}):e.connection.sendMessage({controlRequest:{cancelExecution:{cancelType:0}}}))}),eV=(0,X.q)(eh.current,e=>{el&&e.connection.isConnected()&&(eE?e.sendMessage({controlRequest:{resourceUtilization:{resourceTypes:[0,1]}}}):e.connection.sendMessage({controlRequest:{resourceUtilization:{resourceTypes:[0,1]}}}))}),eK=(0,X.q)(eh.current,(e,t,n)=>{var o,r,a;let{id:i,role:l,secondaryRoles:s,pageMode:u}=t,d=null==(o=tT(i,l,s))?void 0:o.notebookState,c=null==d||null==(a=d.data)||null==(r=a.cells)?void 0:r.filter(e=>"markdown"!==e.cell_type).map(e=>({cellId:e.id}));if(et.markEventStart(W.bZ,(0,p.m)(i)),null==c||c.forEach(e=>{et.markEventStart(W.QX,e.cellId)}),e.connection.isConnected()&&c&&c.length>0){let t=f.Z();n({type:"START_FETCHING_CACHE_RESULT",id:i,role:l,secondaryRoles:s,pageMode:u,cacheLoadId:t}),eE?e.sendMessage({previousResults:{warmStart:!1,cellIds:c}}):e.connection.sendMessage({previousResults:{warmStart:!1,cellIds:c}}),setTimeout(()=>{n({type:"FETCHING_CACHE_TIMED_OUT",id:i,role:l,secondaryRoles:s,pageMode:u,cacheLoadId:t})},1e3*ei)}}),eW=(0,d.useCallback)((e,t,n)=>{eF(t,n)},[eF]),eH=(0,d.useCallback)((t,n)=>{var o;n.silent||(0,a.w)({content:(0,$.h)(e,(0,Q.F)(n.error)),type:"alert",autoDismiss:!1}),(null==(o=n.logError)||o)&&(et.logError({notebookIdentifier:(0,p.m)(n.id),error:n.error,pageMode:n.pageMode}),i.cM.error(n.error))},[e,et]),e$=(0,d.useCallback)((e,t)=>{ed?s({type:"externalAccessIntegrationError",fullNotebookIdentifier:t.id}):n((0,o.jsx)(A.z,{fullNotebookIdentifier:t.id,hide:l})),et.logError({notebookIdentifier:(0,p.m)(t.id),error:t.error,pageMode:t.pageMode}),i.cM.warn(t.error)},[ed,et,s,n,l]),eQ=(0,r.z)(e=>{n((0,o.jsx)(N.W,{urlData:{region:eC,org:ey},sourceFullNotebookIdentifier:e,hideLayer:l}))}),ej=(0,r.z)((e,t)=>{var r,a;let{id:i,role:u,secondaryRoles:d,saveEligibilityCheckStatus:c,editingUserName:E,editingUserEmail:f}=t,p=tT(i,u,d);ed?s({type:"concurrentEditAlert",saveEligibilityCheckStatus:c,editingUserName:E,editingUserEmail:f,notebookViewId:null==p||null==(r=p.sessionLifecycleState)?void 0:r.notebookViewId,fullNotebookIdentifier:i,role:u,region:eC,org:ey}):n((0,o.jsx)(z.n,{hide:l,role:u,saveEligibilityCheckStatus:c,editingUserName:E,editingUserEmail:f,fullNotebookIdentifier:i,onDuplicateNotebook:eQ,notebookViewId:null==p||null==(a=p.sessionLifecycleState)?void 0:a.notebookViewId}))}),eY=(0,X.q)(eh.current,(e,t)=>{var n;if(!eg)return;e.connection.sendMessage({controlRequest:{restartKernelRequest:{restartKernel:!0}}});let{id:o,role:r,secondaryRoles:a,pageMode:i}=t,l=tT(o,r,a);et.logKernelRestartBegin(o,{connectionId:e.connectionId,notebookViewId:null==l||null==(n=l.sessionLifecycleState)?void 0:n.notebookViewId,notebookRuntime:null==l?void 0:l.notebookRuntime,pageMode:i})}),ez=(0,r.z)((e,t)=>{var n,o;let{id:r,role:a,secondaryRoles:i}=t,l=(0,j.E)(r,a,i),s=eh.current[l],u=null==s?void 0:s.connection,d=(null==u?void 0:u.getConnectionId())||"UNKNOWN",c=tT(r,a,i),E=null==c||null==(n=c.sessionLifecycleState)?void 0:n.latestUserInteractionTime;if(et.logWebsocketHeartbeat(r,{connectionId:d,notebookViewId:null==c||null==(o=c.sessionLifecycleState)?void 0:o.notebookViewId,isConnected:(null==u?void 0:u.isConnected())||!1,isEnableIdleHeartbeat:er,idleHeartbeatTimeoutSeconds:ea,isNotebookRunning:(null==c?void 0:c.runStatus)==="running"},{event:W.wT,markers:[d]}),!(null==u?void 0:u.isConnected()))return!1;let f=Date.now();return eE?null==s||s.sendMessage({heartbeatRequest:{browserState:E&&f-E<=6e4?1:0}}):u.sendMessage({heartbeatRequest:{browserState:E&&f-E<=6e4?1:0}}),console.debug("[Notebook] Heartbeat sent with browser state: ",E&&f-E<=6e4?"ACTIVE":"IDLE"),!0}),eq=(0,d.useMemo)(()=>u()(ez,eI/5||6e4,{leading:!0}),[eI,ez]),eZ=(0,d.useRef)(-1),eJ=(0,d.useRef)(null),eX=(0,d.useCallback)(e=>{var t;eZ.current=e,null==(t=eJ.current)||t.call(eJ,e)},[]),e0=(0,d.useCallback)(async e=>{let{id:n,role:o,secondaryRoles:r}=e,a=await t(n,o,r);return(null==a?void 0:a.idleAutoShutdownTimeSeconds)||ea||eI/1e3||M.K7},[t,ea,eI]),e9=(0,d.useCallback)(async e=>{let{unsetNull:t,effect:n}=e;if(null==eZ.current&&!t)return;let o=await e0(n);es?eX(new Date().getTime()+1e3*o):eX(new Date().getTime()+Math.max(1e3*o-(eI||0),0))},[e0,es,eX,eI]),e1=(0,r.z)((e,t)=>{er?e9({effect:t}):eq(e,t)}),e4=(0,d.useCallback)(()=>{eX(null)},[eX]),e2=(0,d.useRef)(null),e6=(0,r.z)((e,t)=>{var n,o,r;if(er&&(e4(),e2.current))return void e2.current.restart();let{id:a,role:i,secondaryRoles:l}=t,s=(0,j.E)(a,i,l),u=tT(a,i,l),d=null==(n=eh.current[s])?void 0:n.connection.getConnectionId();e2.current&&(et.logWebsocketHeartbeatEnd(a,{connectionId:d,notebookViewId:null==u||null==(r=u.sessionLifecycleState)?void 0:r.notebookViewId,isEnableIdleHeartbeat:er,idleHeartbeatTimeoutSeconds:ea},{event:W.wT,markers:[d||"UNKNOWN"]}),e2.current.stop()),et.logWebsocketHeartbeatStart(a,{connectionId:d,notebookViewId:null==u||null==(o=u.sessionLifecycleState)?void 0:o.notebookViewId,isEnableIdleHeartbeat:er,idleHeartbeatTimeoutSeconds:ea});let c=(0,S.zp)(()=>{let n=!0;console.debug("Running heartbeater loop ",eZ.current),console.debug("Sending heartbeat"),console.debug("Received response from heartbeat: ",n=ez(e,{...t})),n||(es?console.debug("No heartbeat sent but continuing to keep the heartbeat active."):(console.debug("Stopping heartbeater because no heartbeat was sent ",{heartbeatPollEndTimeMs:null==eZ?void 0:eZ.current}),c.stop()))},{pollingIntervalInSec:60,shouldPauseOnInactive:!1});e2.current=c,c.start()}),e7=(0,d.useCallback)((e,t)=>{var n,o;let{id:r,role:a,secondaryRoles:i}=t,l=(0,j.E)(r,a,i),s=null==(n=eh.current[l])?void 0:n.connection.getConnectionId();er?e9({unsetNull:!0,effect:t}):(et.logWebsocketHeartbeatEnd(r,{connectionId:s,isEnableIdleHeartbeat:er,idleHeartbeatTimeoutSeconds:ea},{event:W.wT,markers:[s||"UNKNOWN"]}),null==(o=e2.current)||o.stop())},[er,ea,et,e9]),e3=(0,J.Y)({websocketMapRef:eh}),e5=(0,r.z)(async e=>{var t,n,o;let{id:r,role:a,secondaryRoles:i,isContainerRuntime:l,reason:s,pageMode:u}=e,d=(0,j.E)(r,a,i),c=tT(r,a,i),E=null==(t=eh.current[d])?void 0:t.connection,f=(null==E?void 0:E.getConnectionId())||"";(0,R.H$)(W.Sc,(0,p.m)(r),f),eB(r,a,i,"USER_NOTEBOOK_SHUTDOWN"),await eD({id:r,role:a,secondaryRoles:i}),et.logSessionEnd(r,{connectionId:f,notebookViewId:null==c||null==(n=c.sessionLifecycleState)?void 0:n.notebookViewId,sessionStartId:null==c||null==(o=c.sessionLifecycleState)?void 0:o.sessionStartId,reason:s,notebookRuntime:l?"spcs":"wh",isReconnectEnabled:!0,pageMode:u})}),e8=(0,r.z)((e,t)=>{e5({...t,reason:"USER_NOTEBOOK_SESSION_SHUTDOWN"})}),te=(0,r.z)(async(e,t)=>{let{id:n,role:o,secondaryRoles:r,isContainerRuntime:a,pageMode:i}=e;await e5({...e,type:"shutdownNotebook",isContainerRuntime:a,reason:"NOTEBOOK_SESSION_RESTART"}),t({id:n,role:o,secondaryRoles:r,type:"START_NOTEBOOK",userTriggered:!0,isReplayingMessagesAfterReconnect:!1,pageMode:i})}),tt=(0,r.z)((e,t,n)=>{te(t,n)}),tn=(0,d.useCallback)((e,t)=>{let{notificationProps:n,notificationRefCallback:o}=t;if(n.content){let e=(0,a.w)(n);null==o||o(e)}},[]),to=(0,d.useRef)(""),tr=(0,d.useRef)(),ta=(0,X.q)(eh.current,(e,t,n)=>{if(!e.connection.isConnected())return;let{id:o,role:r,secondaryRoles:a,data:i,isContainerRuntime:l,imports:s,pageMode:u}=t;if(i&&e.connection.sendControlMessage({clientControlRequest:{updateCondaEnvironment:{packageSpec:i.dependencies}}}),l&&void 0!==s){let t=f.Z();to.current=t,eE?e.sendMessage({controlRequest:{installPackage:{importUrls:s},requestId:t}}):e.connection.sendMessage({controlRequest:{installPackage:{importUrls:s},requestId:t}})}clearTimeout(tr.current),tr.current=setTimeout(()=>{n({type:"UPDATE_PACKAGE_FAILED",id:o,role:r,secondaryRoles:a,pageMode:u})},1e3*ef)}),ti=(0,X.q)(eh.current,(e,t,n)=>{if(!e.connection.isConnected())return;let{id:o,role:r,secondaryRoles:a,executionConfiguration:i}=t,l=tT(o,r,a),{mainFilePath:s}=i;(null==l?void 0:l.udfConnectionStatus)!==H.Q.Connected?e.connection.sendControlMessage({clientControlRequest:{executeConfigurationUpdateRequest:{runtime:i.runtimeName,queryWarehouse:i.queryWarehouse,codeWarehouse:i.codeWarehouse,computePool:i.computePool,externalIntegrations:i.externalAccessIntegrations,roleSelection:(0,O.h)(i.role,i.secondaryRoles),idleShutdownSecs:i.idleAutoShutdownTimeSeconds,...s?{mainFile:s}:{}}}}):e.connection.sendControlMessage({clientControlRequest:{updateSessionSettingsRequest:{sessionSettings:{queryWarehouse:i.queryWarehouse,role:(0,O.h)(i.role,i.secondaryRoles),idleTimeoutSecs:i.idleAutoShutdownTimeSeconds}}}})}),tl=(0,X.q)(eh.current,(e,t,n)=>{if(!e_||!e.connection.isConnected())return;let{id:o,role:r,secondaryRoles:a}=t,i=tT(o,r,a);(null==i?void 0:i.udfConnectionStatus)===H.Q.Connected&&e.connection.sendControlMessage({clientControlRequest:{getSessionSettingsRequest:{}}})}),ts=(0,r.z)((e,t,n)=>{let{id:o,role:r,secondaryRoles:a,requestId:l,status:s,pageMode:u}=t,d=to.current;to.current="",""!==d&&d===l&&(0===s?n({type:"UPDATE_PACKAGE_DONE",id:o,role:r,secondaryRoles:a,pageMode:u}):1===s?n({type:"UPDATE_PACKAGE_FAILED",id:o,role:r,secondaryRoles:a,pageMode:u}):i.cM.warn(`Unknown status response for package import update: ${s}`))}),tu=(0,d.useCallback)((e,t,n)=>{let{id:o,role:r,secondaryRoles:a,queryId:i,pageMode:l}=t,s=(0,j.E)(o,r,a),u=eh.current[s];(null==u?void 0:u.connection.isConnected())?n({type:"START_NOTEBOOK",id:o,role:r,secondaryRoles:a,userTriggered:!1,isReplayingMessagesAfterReconnect:!0,pageMode:l}):ex({id:o,role:r,secondaryRoles:a,urlInfo:void 0,queryId:i,pageMode:l})},[ex]),td=(0,d.useCallback)((e,t,n)=>{let{id:o,role:r,secondaryRoles:a,queryId:i,connectExistingSession:l,loadCachedResultsAfterConnection:s,pageMode:u}=t,d=(0,j.E)(o,r,a),c=eh.current[d];(null==c?void 0:c.connection.isConnected())||ex({id:o,role:r,secondaryRoles:a,queryId:i,urlInfo:void 0,connectExistingSession:l,loadCachedResultsAfterConnection:s,pageMode:u})},[ex]),tc=(0,r.z)((e,t)=>{let{id:n,sessionSettings:o,pageMode:r}=t;eb({notebookId:n,sessionSettings:o,pageMode:r})}),tE=(0,d.useCallback)((t,n,o)=>{let{id:r,role:i,secondaryRoles:l,queryId:s,onlineToSnowflakeServer:u,pageMode:d}=n,c=(0,j.E)(r,i,l);if(u){var E;null==(E=eR.current)||E.hide(),eR.current=null;let e=eh.current[c];(null==e?void 0:e.connection.isConnected())||ex({id:r,role:i,secondaryRoles:l,urlInfo:null==e?void 0:e.urlInfo,queryId:s,pageMode:d});return}eR.current||(eR.current=(0,a.w)({content:e({id:"Notebook connection lost. Check your internet or wifi connection."}),type:"alert",autoDismiss:!1,onDismiss:()=>{eR.current=null}}),eB(r,i,l,"NETWORK_DOWN"))},[eB,e,ex]),tf=(0,d.useRef)([]),tp=(0,d.useCallback)(e=>(tf.current.push(e),function(){let t=tf.current.indexOf(e);t<0||tf.current.splice(t,1)}),[]),tS=(0,y.S)(eh.current,10*ei),tg=(0,V.a)(),t_=(0,r.z)((e,t)=>{tg(t.notebookEditorState)}),th=(0,r.z)((e,t,r)=>{ed?s({type:"packageUpdateAlert"}):n((0,o.jsx)(L.S,{hide:l,restart:()=>r({type:"RESTART_NOTEBOOK",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,isContainerRuntime:!1,pageMode:t.pageMode})}))}),[tm,tI]=(0,E.M)((0,Y.D)(tf.current,ec,ed),(0,q.G)(),{readFromStage:eO,writeToStage:eL,writeToStageThrottled:ek,runCells:eW,onNotebookError:eH,fetchCachedResults:eK,saveResultHeight:Z.z,triggerUserInteractionKeepalive:e1,startRunningNotebookHeartbeat:e6,stopRunningNotebookHeartbeat:e7,shutdownNotebook:e8,restartNotebook:tt,cancelExecution:eG,fetchResourceUsage:eV,restartNotebookKernel:eY,pushNotification:tn,updatePackage:ta,controlResponseStatus:ts,onExternalAccessIntegrationError:e$,onNotebookConcurrentEditAlert:ej,reconnectSession:tu,connectWebsocket:td,networkConditionChanged:tE,syncNotebookEditorState:t_,saveNotebookSessionSettings:tc,updateExecuteConfiguration:ti,openPackageUpdateAlert:th,fetchLatestNotebookSessionSettings:tl,...tS,...e3}),tT=(0,d.useCallback)((e,t,n)=>tm[(0,j.E)(e,t,n)],[tm]),tR=(0,d.useCallback)(e=>{eJ.current=e},[]),tv=(0,d.useCallback)((e,t,n)=>{let o=(0,j.E)(e,t,n);return eh.current[o]},[]);return(0,d.useMemo)(()=>({getNotebookEditorState:tT,dispatchNotebookEditorStatesMap:tI,connectToWebSocket:ex,disconnectWebsocket:eB,subscribe:tp,setHeartbeatPollEndTimeUpdateCallback:tR,getWebsocketConnection:tv}),[ex,eB,tI,tT,tp,tR,tv])})()),eo=en,er=function({children:e}){return(0,o.jsx)(k.U,{children:(0,o.jsx)(et,{children:e})})};er.displayName="NotebookEditorGlobalProvider";let ea=()=>({cellRunStatus:"neverRun",pushdownQueries:[],startedAt:void 0,endAt:void 0,cellRunStatusBeforeExecution:"neverRun"}),ei=()=>({status:ea(),message:[]})},512257:function(e,t,n){n.d(t,{K:()=>d});var o=n(437239),r=n(827513),a=n(475085),i=n(274438),l=n(689500),s=n(399696);let u={UPDATE_RESULT:(e,t)=>{let n=t.cellId,r=e.notebookState;if(!r)return;let a=r.getCellResult(n);if(!a)return;let l=r,u=a.runId,d=a.tempRunId;if(!d||d!==u)if("running"===a.status.cellRunStatus)l=l.updateCellResult(n,{message:[t.result]});else{let e=a.message;l=l.updateCellResult(n,{message:[...e,t.result]})}let c=a.status.cellRunStatus;(0,i.be)(c)?(0,o.k)("Received forward message for a cell already done",{cellId:n}):l=l.updateCellStatus(n,{cellRunStatus:(0,s.G)(t.result)?"unfinishedError":"populatingResults"}),e.notebookState=l},CELL_RUN_STARTED:(e,t)=>{var n,o,r,a,i,l;let s=t.cellRunInfo.cellId,u=e.notebookState;u&&s&&(e.notebookState=u.updateCellResult(s,{tempSelfContentHash:null!=(o=t.cellRunInfo.selfContentHash)?o:void 0,tempFullContentHash:null!=(r=t.cellRunInfo.fullContentHash)?r:void 0,tempRunId:null!=(a=t.cellRunInfo.runId)?a:void 0,tempParentExecutionId:null!=(i=t.cellRunInfo.parentExecutionId)?i:void 0,tempExecutionId:null!=(l=t.cellRunInfo.executionId)?l:void 0}).updateCellStatus(s,{cellRunStatus:"running",startedAt:t.cellRunInfo.startedAt?"number"==typeof t.cellRunInfo.startedAt?t.cellRunInfo.startedAt:null==(n=t.cellRunInfo.startedAt)?void 0:n.toNumber():void 0,endAt:void 0,pushdownQueries:[]}))},CELL_RUN_FINISHED:(e,t)=>{let{cellId:n}=t,o=e.notebookState;if(!o)return;let r=o.getCellResult(n);if(!r)return;let a=o;"error"!==t.state&&(a=(a=a.updateCellResult(n,{selfContentHash:r.tempSelfContentHash,fullContentHash:r.tempFullContentHash,runId:r.tempRunId,parentExecutionId:r.tempParentExecutionId,executionId:r.tempExecutionId,tempSelfContentHash:void 0,tempFullContentHash:void 0,tempRunId:void 0,tempParentExecutionId:void 0,tempExecutionId:void 0})).updatePredictExecutionId(n)),"running"===r.status.cellRunStatus&&(a=a.updateCellResult(n,{message:[]})),a="unfinishedError"===r.status.cellRunStatus?a.updateCellStatus(n,{cellRunStatus:"idle"===t.state?"idle":"error"}):a.updateCellStatus(n,{cellRunStatus:"errorStopRunning"===t.state?"error":t.state}),0!==t.timestamp&&(a=a.updateCellStatus(n,{endAt:t.timestamp})),e.notebookState=a},NOTEBOOK_RUN_FINISHED:(e,t)=>{let n=e.notebookState;if(!n)return;let o=n;for(let e of n.data.cells)("running"===e.result.status.cellRunStatus||"populatingResults"===e.result.status.cellRunStatus)&&(o=o.updateCellStatus(e.id,{cellRunStatus:"error"})),"waiting"===e.result.status.cellRunStatus&&(3===t.state||4===t.state)&&(o=o.updateCellStatus(e.id,{cellRunStatus:e.result.status.cellRunStatusBeforeExecution}));e.notebookState=o,e.runStatus="idle"},NOTEBOOK_RUN_STARTED:(e,t)=>{e.runStatus="running",e.cacheStatus="loaded";let n=e.notebookState;if(!n)return;let o=n;for(let e of t.cellIdsToRun){var r,i;o=o.updateCellStatus(e,{cellRunStatus:"waiting",cellRunStatusBeforeExecution:null!=(i=null==(r=o.getCellById(e))?void 0:r.result.status.cellRunStatus)?i:"neverRun"})}e.notebookState=o,e.udfConnectionStatus!==a.Q.Connected&&(e.udfConnectionStatus=a.Q.Connected,e.sessionLifecycleState={...e.sessionLifecycleState,sessionEndReason:void 0}),e.bottomBarState=void 0},NOTEBOOK_CACHE_STARTED:e=>{e.cacheStatus="fetching"},NOTEBOOK_CACHE_DONE:e=>{e.cacheStatus="loaded"},NOTEBOOK_CELL_STATUS:(e,t)=>{let n=e.notebookState;if(!n)return;let o=t.cellStatus.cellId,r=n.getCellById(o);if(r){if((0,l.ro)(r))e.notebookState=n.updateCellStatus(t.cellStatus.cellId,{pushdownQueries:[]});else if((0,l.XN)(r)){var a,i;e.notebookState=n.updateCellStatus(t.cellStatus.cellId,{pushdownQueries:null!=(i=null==(a=t.cellStatus.sqlCellStatus)?void 0:a.pushdownQueries)?i:[]})}}},NOTEBOOK_UPDATE_RESOURCE_USAGE:(e,t)=>{var n;e.resourceStats=null==(n=t.resourceUtilization)?void 0:n.resourceStats},NOTEBOOK_SESSION_SETTINGS_UPDATED:(e,t,n)=>{let{id:o,role:a,secondaryRoles:i,sessionSettings:l,pageMode:s}=t,{queryWarehouse:u,role:d}=l,c={...e.notebookSessionSettingsState.settings};u&&(c.queryWarehouse=u),d&&(c.role=d.primaryRole||c.role,c.secondaryRoles=(0,r.Q)(d)||c.secondaryRoles),e.notebookSessionSettingsState.settings=c,e.notebookSessionSettingsState.settingsUpdateSource="RuntimeCodes",e.notebookSessionSettingsState.settingsUpdateTime=Date.now(),e.notebookSessionSettingsState.settingsCheckResponse={status:"success"},n({type:"saveNotebookSessionSettings",id:o,role:a,secondaryRoles:i,sessionSettings:c,pageMode:s})}},d=(e,t,n)=>{let o=u[t.type];void 0!==o&&o(e,t,n)}},69477:function(e,t,n){n.d(t,{v:()=>f});var o=n(467131),r=n(499269),a=n(313554),i=n(689500),l=n(493685),s=n(469081),u=n(670840),d=n(748563),c=n(59338),E=n(655266);class f{swapCell(e,t){return new f((0,r.ZP)(this.data,n=>{let o=n.cells;return e>=0&&e<o.length&&t>=0&&t<o.length&&([o[e],o[t]]=[o[t],o[e]]),n}),this.options)}static fromJson(e,t){let{enforceUUIDAsCellId:n=!1,enableConvertRawToMarkdown:o=!1,enableSafeCellIdGeneration:r=!1,convertRawToMarkdown:a=!1,isCellNameAndVariableConflictDetectionEnabled:i=!1}=t||{};try{let l=JSON.parse(e),u=(0,c.J)(l,{enforceUUIDAsCellId:n,enableConvertRawToMarkdown:o,enableSafeCellIdGeneration:r,convertRawToMarkdown:a});for(let e of u.cells)e.result=(0,E.Hx)();let d=!1;return i&&s.bW.pythonModule&&(u.globalVariableDefiningCellsCount=f.analyzeGlobalVars(u.cells),d=!0),new f(u,{...null!=t?t:{},globalVariablesAnalyzed:d})}catch(e){if(e instanceof c.m)throw e;throw Error(`Failed to parse nbformat string. ${null==e?void 0:e.message}`)}}toJson(){let e=[];for(let t of this.data.cells){let{result:n,...o}=t;e.push(o)}return JSON.stringify({metadata:this.data.metadata,nbformat_minor:this.data.nbformat_minor,nbformat:this.data.nbformat,cells:e},null,1)}static analyzeGlobalVars(e){let t={};for(let n of e)(0,i.ro)(n)&&(0,s.a_)((0,d.V)(n)).forEach(e=>{t[e]=(t[e]||0)+1});return t}checkAndAnalyzeGlobalVars(e){s.bW.pythonModule&&!this.options.globalVariablesAnalyzed&&(e.globalVariableDefiningCellsCount=f.analyzeGlobalVars(e.cells),this.options.globalVariablesAnalyzed=!0)}addCell(e,t){return new f((0,r.ZP)(this.data,n=>{if(this.options.isCellNameAndVariableConflictDetectionEnabled&&this.checkAndAnalyzeGlobalVars(n),n.cells.splice(e,0,t),this.options.isCellNameAndVariableConflictDetectionEnabled&&(0,i.ro)(t)){let e=(0,s.a_)((0,d.V)(t));n.globalVariableDefiningCellsCount||(n.globalVariableDefiningCellsCount={}),e.forEach(e=>{n.globalVariableDefiningCellsCount[e]=(n.globalVariableDefiningCellsCount[e]||0)+1})}}),this.options)}removeCell(e){return new f((0,r.ZP)(this.data,t=>{this.options.isCellNameAndVariableConflictDetectionEnabled&&this.checkAndAnalyzeGlobalVars(t);let n=t.cells[e];if(t.cells.splice(e,1),this.options.isCellNameAndVariableConflictDetectionEnabled&&(0,i.ro)(n)){let e=(0,s.a_)((0,d.V)(n));t.globalVariableDefiningCellsCount||(t.globalVariableDefiningCellsCount={}),e.forEach(e=>{t.globalVariableDefiningCellsCount[e]&&(t.globalVariableDefiningCellsCount[e]-=1)})}}),this.options)}insertBefore(e,t){return new f((0,r.ZP)(this.data,n=>{if(e<0||e>=n.cells.length||t<0||t>=n.cells.length)return;let[o]=n.cells.splice(e,1);n.cells.splice(t,0,o)}),this.options)}moveCellUp(e){return this.swapCell(e,e-1)}moveCellDown(e){return this.swapCell(e,e+1)}modifyCell(e,t){return new f((0,r.ZP)(this.data,n=>{this.options.isCellNameAndVariableConflictDetectionEnabled&&this.checkAndAnalyzeGlobalVars(n);let o=(0,d.V)(n.cells[e]);if(n.cells[e].source=t,this.options.isCellNameAndVariableConflictDetectionEnabled&&(0,i.ro)(n.cells[e])){let e=(0,s.a_)(t),r=(0,s.a_)(o),a=[...e].filter(e=>!r.has(e)),i=[...r].filter(t=>!e.has(t));n.globalVariableDefiningCellsCount||(n.globalVariableDefiningCellsCount={}),a.forEach(e=>{n.globalVariableDefiningCellsCount[e]=(n.globalVariableDefiningCellsCount[e]||0)+1}),i.forEach(e=>{n.globalVariableDefiningCellsCount[e]&&(n.globalVariableDefiningCellsCount[e]-=1)})}}),this.options)}updateCellResult(e,t){let n=this.cellIndexById[e];if(void 0===n)return o.cM.warn("can not find cell corresponding to the cellId"),this;let a={...this.data.cells[n].result,...t};return new f((0,r.ZP)(this.data,e=>{e.cells[n].result=a}),this.options)}updateCellStatus(e,t){let n=this.cellIndexById[e];if(void 0===n)return o.cM.warn("can not find cell corresponding to the cellId"),this;let a={...this.data.cells[n].result.status,...t};return new f((0,r.ZP)(this.data,e=>{e.cells[n].result.status=a}),this.options)}updatePredictExecutionId(e){let t=this.cellIndexById[e];return void 0===t?(o.cM.warn("can not find cell corresponding to the cellId"),this):new f((0,r.ZP)(this.data,e=>{var n;let o=null!=(n=(0,r.Js)(e.cells))?n:[],a=t>0?o[t-1].result.executionId:void 0;for(let n=t;n<o.length;n++){let t=(0,u.b)(a,e.cells[n].result.selfContentHash,e.cells[n].result.runId);e.cells[n].result.predictedExecutionId=t,a=t}}),this.options)}setLanguage(e,t){return new f((0,r.ZP)(this.data,n=>{let o=n.cells[e],r=(0,i.ro)(o);if(this.options.isCellNameAndVariableConflictDetectionEnabled&&this.checkAndAnalyzeGlobalVars(n),(0,i.NT)(o)&&"markdown"!==t?n.cells[e]=(0,l.f)(o,t):(0,i.M1)(o)&&"markdown"===t?n.cells[e]=(0,l.W)(o):(0,i.M1)(o)&&"markdown"!==t&&(o.metadata.language=t),n.globalVariableDefiningCellsCount||(n.globalVariableDefiningCellsCount={}),r||"python"!==t){if(r&&"python"!==t){let t=(0,d.V)(n.cells[e]);(0,s.a_)(t).forEach(e=>{n.globalVariableDefiningCellsCount[e]&&(n.globalVariableDefiningCellsCount[e]-=1)})}}else{let t=(0,d.V)(n.cells[e]);(0,s.a_)(t).forEach(e=>{n.globalVariableDefiningCellsCount[e]=(n.globalVariableDefiningCellsCount[e]||0)+1})}}),this.options)}setWarehouse(e,t){return new f((0,r.ZP)(this.data,n=>{let o=n.cells[e];if(!(0,i.XN)(o))throw Error("setting warehouse on non-SQL cell not yet supported");o.metadata.EXECUTION_WAREHOUSE=t}),this.options)}setContentState(e,t){return new f((0,r.ZP)(this.data,n=>{if(void 0!==e){let o=n.cells[e];void 0!==t.collapsed&&(o.metadata.collapsed=t.collapsed),(0,i.M1)(o)&&void 0!==t.codeCollapsed&&(o.metadata.codeCollapsed=t.codeCollapsed)}else{let e=this.data.cells;for(let o=0;o<e.length;o++){let e=n.cells[o];void 0!==t.collapsed&&(e.metadata.collapsed=t.collapsed),(0,i.M1)(e)&&void 0!==t.codeCollapsed&&(e.metadata.codeCollapsed=t.codeCollapsed)}}}),this.options)}updateLastEditStatus(e){return new f((0,r.ZP)(this.data,t=>{t.metadata.lastEditStatus=e}),this.options)}renameCell(e,t){return new f((0,r.ZP)(this.data,n=>{n.cells[e].metadata.name=t}),this.options)}getCellsProto(){let e=[];for(let n of this.data.cells){var t;let{id:o,metadata:r,cell_type:a,source:i}=n,l={};for(let e in r)("string"==typeof r[e]||r[e]instanceof String)&&(l[e]=r[e]);e.push({id:o,name:null!=(t=r.name)?t:"",metadata:l,type:"code"===a?r.language:a,code:"string"==typeof i?i:i.join(""),outputFormat:r.outputFormat})}return e}getCellIndexById(e){return this.cellIndexById[e]}getCellById(e){return this.data.cells[this.cellIndexById[e]]}getCellResult(e){var t;return null==(t=this.getCellById(e))?void 0:t.result}getCellResultSize(e){var t;return(0,a.Q)(null==(t=this.getCellResult(e))?void 0:t.message)}getCellResultQueryId(e){var t,n,o;let r=null==(t=this.getCellResult(e))?void 0:t.status,[a]=null!=(n=null==r?void 0:r.pushdownQueries)?n:[];return null!=(o=null==a?void 0:a.queryId)?o:void 0}getLastEditStatus(){var e,t;return null==(t=this.data)||null==(e=t.metadata)?void 0:e.lastEditStatus}getGlobalVariables(){var e;return null!=(e=this.data.globalVariableDefiningCellsCount)?e:{}}clearAllResults(){let e=this.data.cells;return new f((0,r.ZP)(this.data,t=>{for(let n=0;n<e.length;n++)t.cells[n].result=(0,E.Hx)()}),this.options)}clearAllExecutionStates(){let e=this.data.cells;return new f((0,r.ZP)(this.data,t=>{for(let n=0;n<e.length;n++)"neverRun"!==t.cells[n].result.status.cellRunStatus&&(t.cells[n].result.status.cellRunStatus="idle")}),this.options)}isAllCellsExpanded(){let e=!0;return this.data.cells.forEach(t=>{(0,i.M1)(t)&&t.metadata.codeCollapsed&&t.metadata.collapsed&&(e=!1),(0,i.NT)(t)&&t.metadata.collapsed&&(e=!1)}),e}isCellResultCollapsed(e){var t;let n=this.cellIndexById[e];return!!(null==(t=this.data.cells[n])?void 0:t.metadata.collapsed)}constructor(e,t={}){this.data=e,this.options=t,this.cellIndexById={};for(let t=0;t<e.cells.length;t++){let n=e.cells[t];this.cellIndexById[n.id]=t}}}},291397:function(e,t,n){n.d(t,{Q:()=>r});var o=n(900352);function r(e,t,n){let{id:r,role:a,secondaryRoles:i,cacheLoadId:l,pageMode:s}=t;l===e.cacheLoadId&&(0,o.P)(e.cacheStatus)&&(e.cacheStatus="error",n({type:"onNotebookError",id:r,role:a,secondaryRoles:i,error:"Some cell results could not be loaded.",silent:!0,pageMode:s}))}},284233:function(e,t,n){n.d(t,{X:()=>o});function o(e,t){let{cacheLoadId:n}=t;e.cacheStatus="pending",e.cacheLoadId=n}},391670:function(e,t,n){n.d(t,{v:()=>i});var o=n(896426),r=n(67158),a=n(3535);function i(e,t,n){var i;let{id:l,role:s,secondaryRoles:u,pageMode:d}=t;(0,o.OY)(a.bZ,(0,r.m)(l)),null==(i=e.notebookState)||i.getCellsProto().forEach(e=>{var t;(0,o.OY)(a.QX,null!=(t=e.id)?t:"")}),n({type:"fetchCachedResults",id:l,role:s,secondaryRoles:u,pageMode:d})}},180870:function(e,t,n){n.d(t,{p:()=>s});var o=n(674337),r=n(952624),a=n(408195),i=n(744468),l=n(917024);function s(e,t,n){var s,u,d,c,E;if(!(0,i.o)(t.pageMode))return;let f=e.notebookState;if(!f)return;let p=e.selectedCell,S=f.data.cells.findIndex(e=>e.id===p),g=-1===S?f.data.cells.length:S+1,_=null==(s=e.notebookState)?void 0:s.data.cells,h=(0,a.i)(null!=_?_:[]),m=(0,r.B)(t.cellType,h,t.content),I=f.addCell(g,m);e.notebookState=I,e.selectedCell=m.id,n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:I.toJson(),currentNotebookViewId:null!=(d=null==(u=e.sessionLifecycleState)?void 0:u.notebookViewId)?d:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!=(c=e.lastestNotebookLoadTime)?c:0,lastEditStatus:null!=(E=e.notebookState.getLastEditStatus())?E:null,pageMode:t.pageMode}),n({type:"logNotebookCellUITelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:o.JW3,data:{cellId:m.id,cellIndex:g,cellType:t.cellType},pageMode:t.pageMode}),t.runCellAfterCreation&&(0,l.m)(e,{...t,type:"RUN_NOTEBOOK",runCellId:m.id,cellRunType:0,userTriggered:!0},n)}},657967:function(e,t,n){n.d(t,{i:()=>l});var o=n(674337),r=n(952624),a=n(408195),i=n(744468);function l(e,t,n){var l,s,u,d,c;if(!(0,i.o)(t.pageMode))return;let E=e.notebookState;if(!E)return;let f=null==(l=e.notebookState)?void 0:l.data.cells,p=(0,a.i)(null!=f?f:[]),S=(0,r.B)(t.cellType,p),g=E.addCell(t.index,S);return e.notebookState=g,e.selectedCell=S.id,n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:g.toJson(),currentNotebookViewId:null!=(u=null==(s=e.sessionLifecycleState)?void 0:s.notebookViewId)?u:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!=(d=e.lastestNotebookLoadTime)?d:0,lastEditStatus:null!=(c=e.notebookState.getLastEditStatus())?c:null,pageMode:t.pageMode}),n({type:"logNotebookCellUITelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:o.JW3,data:{cellId:S.id,cellIndex:t.index,cellType:t.cellType},pageMode:t.pageMode}),g}},660516:function(e,t,n){n.d(t,{e:()=>a});var o=n(689500),r=n(657967);function a(e,t,n){let a=e.notebookState;if(!a)return;let i=a.data.cells,l=a.getCellById(t.runCellId),s=a.getCellIndexById(t.runCellId);if(l&&void 0!==s)if(s+1>=i.length){let a=(0,o.M1)(l)?l.metadata.language:"markdown";(0,r.i)(e,{type:"ADD_CELL",cellType:a,index:s+1,role:t.role,secondaryRoles:t.secondaryRoles,id:t.id,pageMode:t.pageMode},n)}else e.selectedCell=i[s+1].id||void 0}},857594:function(e,t,n){n.d(t,{x:()=>r});var o=n(744468);let r=(e,t)=>{if(!(0,o.o)(t.pageMode))return;let n=e.notebookState;n&&(e.notebookState=n.setContentState(t.index,t.contentState))}},234522:function(e,t,n){n.d(t,{S:()=>r});var o=n(744468);let r=(e,t,n)=>{var r,a,i,l;if(!(0,o.o)(t.pageMode))return;let s=e.notebookState;if(!s)return;let u=s.setLanguage(t.index,t.language);e.notebookState=u,n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:u.toJson(),currentNotebookViewId:null!=(a=null==(r=e.sessionLifecycleState)?void 0:r.notebookViewId)?a:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!=(i=e.lastestNotebookLoadTime)?i:0,lastEditStatus:null!=(l=e.notebookState.getLastEditStatus())?l:null,pageMode:t.pageMode})}},895288:function(e,t,n){n.d(t,{e:()=>o});let o=(e,t,n)=>{e.resultHeightMap[t.cellId]=t.resultHeight,t.shouldSave&&n({type:"saveResultHeight",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,urlId:e.urlId,cellId:t.cellId,resultHeight:t.resultHeight,pageMode:t.pageMode})}},611249:function(e,t,n){n.d(t,{B:()=>a});var o=n(674337),r=n(744468);let a=(e,t,n)=>{var a,i,l,s;if(!(0,r.o)(t.pageMode))return;let u=e.notebookState;if(!u)return;e.selectedCell=u.data.cells[t.from].id;let d=u.insertBefore(t.from,t.to);e.notebookState=d,n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:d.toJson(),currentNotebookViewId:null!=(i=null==(a=e.sessionLifecycleState)?void 0:a.notebookViewId)?i:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!=(l=e.lastestNotebookLoadTime)?l:0,lastEditStatus:null!=(s=e.notebookState.getLastEditStatus())?s:null,pageMode:t.pageMode}),n({type:"logNotebookCellUITelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:o.jSd,pageMode:t.pageMode})}},117603:function(e,t,n){n.d(t,{d:()=>r});var o=n(744468);function r(e,t,n){if(!(0,o.o)(t.pageMode))return;let r=t.writeToStage,a=e.notebookState;if(!a)return;let i=a.modifyCell(t.index,t.content);if(t.language&&(i=i.setLanguage(t.index,t.language)),t.isProgrammaticContentUpdate){e.cellContentMetadata||(e.cellContentMetadata={});let n=i.data.cells[t.index].id;e.cellContentMetadata[n]||(e.cellContentMetadata[n]={}),e.cellContentMetadata[n].lastProgrammaticUpdateTime=Date.now()}if(e.notebookState=i,r){var l,s,u,d;n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:i.toJson(),currentNotebookViewId:null!=(s=null==(l=e.sessionLifecycleState)?void 0:l.notebookViewId)?s:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!=(u=e.lastestNotebookLoadTime)?u:0,lastEditStatus:null!=(d=e.notebookState.getLastEditStatus())?d:null,pageMode:t.pageMode})}return i}},377409:function(e,t,n){n.d(t,{V:()=>l,a:()=>i});var o=n(674337),r=n(689500),a=n(744468);let i=(e,t,n)=>{var i,l,s,u;if(!(0,a.o)(t.pageMode))return;let d=e.notebookState;if(!d)return;let c=d.data.cells[t.index],E=c.id,f=(0,r.DA)(c),p=d.moveCellUp(t.index);e.notebookState=p;let S=d.getCellResult(E);n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:p.toJson(),currentNotebookViewId:null!=(l=null==(i=e.sessionLifecycleState)?void 0:i.notebookViewId)?l:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!=(s=e.lastestNotebookLoadTime)?s:0,lastEditStatus:null!=(u=e.notebookState.getLastEditStatus())?u:null,pageMode:t.pageMode}),n({type:"logNotebookCellUITelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:o.ETJ,data:{cellId:E,cellIndex:t.index,cellType:f,runId:null==S?void 0:S.runId},pageMode:t.pageMode})},l=(e,t,n)=>{var i,l,s,u;if(!(0,a.o)(t.pageMode))return;let d=e.notebookState;if(!d)return;let c=d.data.cells[t.index],E=c.id,f=(0,r.DA)(c),p=d.moveCellDown(t.index);e.notebookState=p;let S=d.getCellResult(E);n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:p.toJson(),currentNotebookViewId:null!=(l=null==(i=e.sessionLifecycleState)?void 0:i.notebookViewId)?l:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!=(s=e.lastestNotebookLoadTime)?s:0,lastEditStatus:null!=(u=e.notebookState.getLastEditStatus())?u:null,pageMode:t.pageMode}),n({type:"logNotebookCellUITelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:o.G1R,data:{cellId:E,cellIndex:t.index,cellType:f,runId:null==S?void 0:S.runId},pageMode:t.pageMode})}},373693:function(e,t,n){n.d(t,{r:()=>i});var o=n(674337),r=n(689500),a=n(744468);let i=(e,t,n)=>{var i,l,s,u;if(!(0,a.o)(t.pageMode))return;let d=e.notebookState;if(!d)return;let c=d.data.cells[t.index],E=c.id,f=(0,r.DA)(c),p=d.removeCell(t.index);e.notebookState=p;let S=Math.min(p.data.cells.length-1,t.index);e.selectedCell=S>=0?p.data.cells[S].id:void 0,n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:p.toJson(),currentNotebookViewId:null!=(l=null==(i=e.sessionLifecycleState)?void 0:i.notebookViewId)?l:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!=(s=e.lastestNotebookLoadTime)?s:0,lastEditStatus:null!=(u=e.notebookState.getLastEditStatus())?u:null,pageMode:t.pageMode}),n({type:"logNotebookCellUITelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:o.Q_$,data:{cellId:E,cellIndex:t.index,cellType:f},pageMode:t.pageMode})}},701561:function(e,t,n){n.d(t,{e:()=>a});var o=n(744468),r=n(79517);function a(e,t,n){if(!(0,o.o)(t.pageMode))return;let a=e.notebookState;if(!a)return;let{newCellName:i,index:l,id:s,role:u,secondaryRoles:d}=t;e.runStatus="idle";let{isValid:c}=(0,r.Ke)(i,a.getGlobalVariables()),E=(0,r.ae)(a.data.cells,i,l);if(c&&E){var f,p,S,g;let o=a.renameCell(l,i);n({type:"writeToStage",id:s,role:u,secondaryRoles:d,content:o.toJson(),currentNotebookViewId:null!=(p=null==(f=e.sessionLifecycleState)?void 0:f.notebookViewId)?p:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!=(S=e.lastestNotebookLoadTime)?S:0,lastEditStatus:null!=(g=o.getLastEditStatus())?g:null,pageMode:t.pageMode}),e.notebookState=o}E||n({type:"onNotebookError",id:s,role:u,secondaryRoles:d,error:r._y.DUPLICATE,logError:!1,pageMode:t.pageMode})}},654426:function(e,t,n){n.d(t,{n:()=>o});function o(e,t){e.selectedCell=t.cellId}},850022:function(e,t,n){n.d(t,{X:()=>o});function o(e){e.selectedCell=void 0}},925822:function(e,t,n){n.d(t,{c:()=>o});function o(e,t){let n=e.notebookState;if(!n)return void console.error("Cannot update markdown result as Notebook state is not initialized yet");let{cellId:o,message:r}=t;e.notebookState=n.updateCellResult(o,{message:[r]}).updateCellStatus(o,{cellRunStatus:"idle"})}},631944:function(e,t,n){n.d(t,{q:()=>o});function o(e,t,n){let{id:o,role:r,secondaryRoles:a}=t;"running"===e.runStatus&&(e.runStatus="cancelling",n({type:"cancelExecution",id:o,role:r,secondaryRoles:a,pageMode:t.pageMode}))}},363198:function(e,t,n){n.d(t,{G:()=>r});var o=n(917024);let r=(e,t,n)=>{(0,o.m)(e,{...t,type:"RUN_NOTEBOOK",cellRunType:1,runCellId:"",clearCodeResults:!0,userTriggered:!0},n)}},8731:function(e,t,n){n.d(t,{E:()=>o});let o=e=>{e.runStatus="idle"}},917024:function(e,t,n){n.d(t,{m:()=>d});var o=n(609737),r=n(164214),a=n(452997),i=n(692775),l=n(327879),s=n(475085),u=n(523692);function d(e,t,n){var d,c,E;let f=e.notebookState,p=e.udfConnectionStatus,S="spcs"===e.notebookRuntime,g=o.flags.UI_ENABLE_NOTEBOOK_DISABLED_SPCS_EXPERIENCE_FOR_ADMINS(),_=(0,l.e)(t.role)&&g&&S;if(!f)return void console.debug("Notebook state is not yet loaded");if(_)return void n({type:"pushNotification",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,notificationProps:{type:"alert",content:(0,a.c)(),autoDismiss:!1}});if(S){let e=(0,u.V)(t.id.name),o=(0,i.J)(e);if(o)return void n({type:"pushNotification",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,notificationProps:{type:"alert",content:o,autoDismiss:!1}})}if((null==(d=e.sessionLifecycleState)?void 0:d.isReplayingMessagesAfterReconnect)||p!==s.Q.Connecting&&p!==s.Q.Reconnecting)p===s.Q.NotConnected&&(e.udfConnectionStatus=s.Q.Connecting,e.sessionLifecycleState={...null!=(E=e.sessionLifecycleState)?E:{},sessionStartTimeMs:Date.now(),sessionEndTimeMs:void 0,sessionEndReason:void 0,sessionStartId:r.Z()},n({type:"logNotebookStartingSessionTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode}));else{(null==(c=e.sessionLifecycleState)?void 0:c.sessionEndReason)&&(e.sessionLifecycleState.sessionEndReason=void 0);return}"running"!==e.runStatus&&(e.runStatus="waiting");let h=f.getCellsProto().filter(e=>"markdown"!==e.type);t.clearCodeResults&&(h=h.map(e=>({...e,code:""}))),n({id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,type:"runCells",cellRunType:t.cellRunType,runCellId:t.runCellId,clientState:t.clientState,cells:h,eventType:t.eventType,notebookRuntime:e.notebookRuntime,pageMode:t.pageMode})}},208961:function(e,t,n){n.d(t,{$R:()=>C.$,$y:()=>U.$,Av:()=>M.A,B8:()=>E.B,BX:()=>W.B,B_:()=>j.B,E7:()=>w.E,EY:()=>R.E,Gl:()=>T.G,JQ:()=>b.J,QM:()=>D.Q,Qy:()=>o.Q,Ru:()=>B.R,Rx:()=>$.R,S4:()=>d.S,U3:()=>O.U,Vd:()=>p.V,WS:()=>H.W,X0:()=>h.X,Xt:()=>r.X,_9:()=>k._,aF:()=>p.a,ch:()=>m.c,dG:()=>f.d,e7:()=>s.e,eQ:()=>c.e,em:()=>g.e,g3:()=>G.g,h1:()=>A.h,i6:()=>l.i,iD:()=>F.i,kB:()=>x.k,ke:()=>L.k,mW:()=>v.m,n5:()=>_.n,ov:()=>V.o,p9:()=>i.p,pT:()=>N.p,qg:()=>I.q,rM:()=>K.r,rZ:()=>S.r,rr:()=>Q.r,v2:()=>a.v,vh:()=>y.v,xM:()=>u.x,y9:()=>P.y});var o=n(291397),r=n(284233),a=n(391670),i=n(180870),l=n(657967),s=n(660516),u=n(857594),d=n(234522),c=n(895288),E=n(611249),f=n(117603),p=n(377409),S=n(373693),g=n(701561),_=n(654426),h=n(850022),m=n(925822),I=n(631944),T=n(363198),R=n(8731),v=n(917024),C=n(431985),y=n(906161),N=n(758482),A=n(968381),b=n(939392),O=n(24151),L=n(971600),k=n(152478),M=n(19601),w=n(925560),D=n(759278),U=n(238628),P=n(169290),x=n(2975),B=n(464944),F=n(301399),G=n(908070),V=n(872919),K=n(584280),W=n(303945),H=n(866790),$=n(375256),Q=n(508582),j=n(396300)},431985:function(e,t,n){n.d(t,{$:()=>r});var o=n(475085);function r(e,t,n){let{id:r,role:a,secondaryRoles:i}=t;e.udfConnectionStatus===o.Q.Connected&&n({type:"fetchResourceUsage",id:r,role:a,secondaryRoles:i,pageMode:t.pageMode})}},906161:function(e,t,n){n.d(t,{v:()=>r});var o=n(674337);let r=(e,t,n)=>{var r;e.error=t.error,e.loadStatus="error",n({type:"logNotebookIPYNBTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,event:o.vJg,eventType:"ui_response_error",data:{error:null==(r=t.error)?void 0:r.message}})}},758482:function(e,t,n){n.d(t,{p:()=>a});var o=n(674337),r=n(69477);let a=(e,t,n)=>{try{var a,i;e.notebookState=r.v.fromJson(t.result,{enforceUUIDAsCellId:null!=(a=t.enforceUUIDAsCellId)&&a,enableSafeCellIdGeneration:null!=(i=t.enableSafeCellIdGeneration)&&i,isCellNameAndVariableConflictDetectionEnabled:t.isCellNameAndVariableConflictDetectionEnabled}),e.loadStatus="loaded",e.lastestNotebookLoadTime=Date.now(),n({type:"logNotebookIPYNBTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,event:o.j4e,eventType:"ui_response_success"})}catch(r){e.error=r,e.loadStatus="error",n({type:"logNotebookIPYNBTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,event:o.vJg,eventType:"ui_response_error",data:{error:null==r?void 0:r.message}})}}},564914:function(e,t,n){n.d(t,{l:()=>o});function o(e,t){Object.assign(e,{},t.state)}},406037:function(e,t,n){n.d(t,{o:()=>r});var o=n(243242);function r(e){var t;let n=(0,o.a)({notebookViewId:null==(t=e.sessionLifecycleState)?void 0:t.notebookViewId,notebookUrlInfo:e.notebookUrlInfo});Object.assign(e,{},n)}},968381:function(e,t,n){n.d(t,{h:()=>r});var o=n(674337);function r(e,t,n){var r;e.error=t.error;let{editStatusToUpdate:a,saveEligibilityCheckStatus:i,editingUserId:l,editingUserName:s,editingUserEmail:u,lastEditTime:d,isSourceCodeChange:c}=t;(null==e?void 0:e.notebookState)&&a&&(e.notebookState=e.notebookState.updateLastEditStatus(a)),i&&"canSave"!==i&&n({type:"onNotebookConcurrentEditAlert",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,saveEligibilityCheckStatus:i,editingUserName:null!=s?s:"",editingUserEmail:u}),n({type:"logNotebookEditTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,event:o.Ari,eventType:"ui_response_error",error:i&&"canSave"!==i?i:String(null!=(r=t.error)?r:""),data:{currentEditingUser:l,lastEditTime:d,saveEligibilityCheckStatus:i,isSourceCodeChange:c}})}},939392:function(e,t,n){n.d(t,{J:()=>r});var o=n(674337);function r(e,t,n){let{editStatusToUpdate:r,saveDone:a,isSourceCodeChange:i}=t;a&&(e.lastestNotebookLoadTime=Date.now()),(null==e?void 0:e.notebookState)&&r&&(e.notebookState=e.notebookState.updateLastEditStatus(r)),n({type:"logNotebookEditTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,event:o.ZOT,eventType:"ui_response_success",data:{currentEditingUser:null==r?void 0:r.authorId,lastEditTime:null==r?void 0:r.lastEditTime,saveEligibilityCheckStatus:"canSave",saveDone:a,isSourceCodeChange:i}})}},24151:function(e,t,n){n.d(t,{U:()=>o});function o(e,t){var n;t.expectedPrevType&&(null==(n=e.bottomBarState)?void 0:n.type)!==t.expectedPrevType||(e.bottomBarState=t.bottomBarState)}},971600:function(e,t,n){n.d(t,{k:()=>o});function o(e){var t;e.sessionLifecycleState={...null!=(t=e.sessionLifecycleState)?t:{},isNonInteractiveSession:!0}}},393703:function(e,t,n){n.d(t,{u:()=>o});function o(e,t){let{urlInfo:n}=t;e.notebookUrlInfo=n}},152478:function(e,t,n){n.d(t,{_:()=>o});function o(e,t){e.urlId=t.urlId,e.resultHeightMap=t.resultHeightMap}},19601:function(e,t,n){n.d(t,{A:()=>r});var o=n(674337);let r=(e,t,n)=>{n({type:"readFromStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,queryId:t.queryId,pageMode:t.pageMode}),e.loadStatus="loading",n({type:"logNotebookIPYNBTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,event:o.weH,eventType:"ui_visit",pageMode:t.pageMode})}},421922:function(e,t,n){n.d(t,{v:()=>o});let o=(e,t,n)=>{var o,r,a,i;let l=e.notebookState;"loaded"===e.loadStatus&&l&&n({type:"writeToStage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,content:l.toJson(),currentNotebookViewId:null!=(r=null==(o=e.sessionLifecycleState)?void 0:o.notebookViewId)?r:"",isSourceCodeChange:!0,lastestNotebookLoadTime:null!=(a=e.lastestNotebookLoadTime)?a:0,lastEditStatus:null!=(i=l.getLastEditStatus())?i:null,pageMode:t.pageMode})}},701724:function(e,t,n){n.d(t,{V:()=>o});function o(e,t){let{editStatusToUpdate:n}=t;(null==e?void 0:e.notebookState)&&n&&(e.notebookState=e.notebookState.updateLastEditStatus(n))}},893018:function(e,t,n){n.d(t,{O:()=>o});function o(e,t){e.notebookRuntime=t.notebookRuntime}},925560:function(e,t,n){n.d(t,{E:()=>c});var o=n(609737),r=n(888890),a=n(750671),i=n(783844),l=n(481354),s=n(600745),u=n(759331),d=n(475085);let c=(e,t,n)=>{var c,E,f,p,S,g,_,h,m,I,T,R,v,C,y;let{message:N,updatePackageTimeoutId:A,isNotebookRestartKernelEnabled:b}=t,O=e.notebookState,L=o.flags._DP_UI_NOTEBOOK_PACKAGE_UPDATE_ALERT(),k=t=>{(0,a.h)(0===t.level),e.bottomBarState={type:"ReceivedStreamlitLifecycleMsg",data:{level:0,topic:t.topic,payload:t.payload}}};switch(N.type){case"lifecycleMsg":{let r=(0,a.h)(N.lifecycleMsg);switch(r.level){case 0:switch(r.topic){case 2:{let t=r.payload?JSON.parse(r.payload):void 0;(null==t?void 0:t.serviceStatus)==="RUNNING"&&(e.serviceStatusInfo=t),k(r);break}case 3:case 4:b&&e.udfConnectionStatus===d.Q.RestartingKernel&&(e.notebookState=O.clearAllExecutionStates(),e.runStatus="notStarted"),k(r);break;case 5:b&&e.udfConnectionStatus===d.Q.RestartingKernel&&(e.udfConnectionStatus=d.Q.Connected,n({type:"pushNotification",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,notificationProps:{type:"success",content:(0,s.n)(),autoDismiss:!0},pageMode:t.pageMode}),n({type:"logNotebookKernelRestartEnd",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode})),k(r);break;case 1:case 8:k(r)}break;case 1:{let a=7===r.topic&&(null==(c=r.payload)?void 0:c.startsWith("UNAVAILABLE")),s=null==(E=(0,l.xe)(r,i.M.NOTEBOOK))?void 0:E(),f=`${r.topic}. ${r.payload}`;o.flags.ENABLE_NOTEBOOK_UNIFIED_LIFECYCLE_ERROR_MSG()&&n({type:"logUnifiedLifecycleErrorTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,data:{error:f,udfConnectionStatus:e.udfConnectionStatus,errorReason:r.errorReason,errorCode:r.errorCode,isUserError:r.isUserError}}),e.udfConnectionStatus===d.Q.Connecting?(e.udfConnectionStatus=d.Q.NotConnected,n({type:"logNotebookSessionTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,data:{isSuccess:!1,error:f}})):e.udfConnectionStatus===d.Q.Reconnecting?(e.udfConnectionStatus=d.Q.NotConnected,e.sessionLifecycleState&&(e.sessionLifecycleState.reconnectResultInfo={error:f}),n({type:"logSessionReconnectCompleted",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,data:{error:f}}),n({type:"logSessionReconnectDetails",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode})):n(e.udfConnectionStatus===d.Q.RestartingKernel&&b?{type:"logNotebookKernelRestartEnd",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,data:{error:f}}:{type:"logNotebookSessionErrorMessage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,data:{error:f}}),n({type:"pushNotification",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,notificationProps:{type:"alert",content:s,autoDismiss:!1},notificationRefCallback:a?u.ZN:void 0}),n({type:"onNotebookError",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,error:(null==s?void 0:s.props.id)||f,silent:!0})}}break}case"clientControlResponse":{clearTimeout(A);let o=(0,a.h)(N.clientControlResponse);if(o.executeConfigurationUpdateResponse){let r=o.executeConfigurationUpdateResponse,a=!!(null==r||null==(f=r.resolutionErrors)?void 0:f.length);e.notebookSessionSettingsState.settingsCheckResponse={status:a?"error":"success",resolutionErrors:null!=(p=r.resolutionErrors)?p:void 0},a&&"UserActionOnPage"===e.notebookSessionSettingsState.settingsUpdateSource&&n({type:"pushNotification",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,notificationProps:{type:"alert",content:(0,l.XJ)(null!=(S=r.resolutionErrors)?S:void 0),autoDismiss:!1}})}else if(o.updateSessionSettingsResponse){let r=o.updateSessionSettingsResponse;(null==r||null==(g=r.error)?void 0:g.length)&&"UserActionOnPage"===e.notebookSessionSettingsState.settingsUpdateSource&&n({type:"pushNotification",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,notificationProps:{type:"alert",content:(0,l.C$)(null!=(_=r.error)?_:void 0),autoDismiss:!1}})}else if(o.getSessionSettingsResponse){let a=o.getSessionSettingsResponse.sessionSettings;if(!a)return;let i=e.notebookSessionSettingsState.settings,l={...i,queryWarehouse:a.queryWarehouse||i.queryWarehouse,role:(null==(h=a.role)?void 0:h.primaryRole)||i.role,secondaryRoles:(null==(m=a.role)?void 0:m.allSelected)?r.Bq:(null==(I=a.role)?void 0:I.noneSelected)?r.sM:i.secondaryRoles};(l.queryWarehouse!==i.queryWarehouse||l.role!==i.role||l.secondaryRoles!==i.secondaryRoles)&&(e.notebookSessionSettingsState.settings=l,e.notebookSessionSettingsState.settingsUpdateSource="RuntimeCodes",e.notebookSessionSettingsState.settingsUpdateTime=Date.now(),e.notebookSessionSettingsState.settingsCheckResponse={status:"success"},n({type:"saveNotebookSessionSettings",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode,sessionSettings:l}))}else if(L&&o.updateCondaEnvironment&&1===o.updateCondaEnvironment.environmentStatus){let e=o.updateCondaEnvironment.packageUpdates;(null==e?void 0:e.length)&&e.length>0&&(n({type:"openPackageUpdateAlert",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode}),n({type:"logNotebookPackageUpdateAlertTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode}))}else{let r=1===o.status||(null==(T=o.error)?void 0:T.errorMessage);e.runStatus=r?"updatingPackagesFailed":"idle",r||n({type:"pushNotification",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,notificationProps:{type:"success",content:(0,l.Oz)(),autoDismiss:!0},pageMode:t.pageMode})}break}case"notebookUserChannelStarted":{let o=(null==(R=t.message.notebookUserChannelStarted)?void 0:R.whReconnectMode)?({0:"FAST",1:"NEW_JOB"})[null==(v=t.message.notebookUserChannelStarted)?void 0:v.whReconnectMode]:void 0,r=(null==(C=t.message.notebookUserChannelStarted)?void 0:C.whReconnectInstance)?({0:"CONTROL",1:"USER"})[null==(y=t.message.notebookUserChannelStarted)?void 0:y.whReconnectInstance]:void 0;e.sessionLifecycleState&&(e.sessionLifecycleState.userChannelStartedInfo={...t.message.notebookUserChannelStarted,whReconnectMode:o,whReconnectInstance:r}),n({type:"logSessionReconnectDetails",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:t.pageMode})}}}},759278:function(e,t,n){n.d(t,{Q:()=>f});var o=n(750129),r=n(499269),a=n(896426),i=n(674337),l=n(3535),s=n(475085),u=n(689500),d=n(399696),c=n(137757),E=n(512257);let f=(e,t,n)=>{var f,p,S,g,_,h,m,I,T,R,v,C,y,N,A,b,O,L;let{message:k,id:M,role:w,secondaryRoles:D,pageMode:U}=t;if(null==(f=k.notebookStart)?void 0:f.isCache)(0,E.K)(e,{type:"NOTEBOOK_CACHE_STARTED"},n),n({type:"logNotebookRunTelemetry",event:i.F1$,id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U,data:{isCache:!0}});else if(null==(p=k.notebookStart)?void 0:p.cellIdsToRun){let o=e.udfConnectionStatus;(0,E.K)(e,{type:"NOTEBOOK_RUN_STARTED",cellIdsToRun:k.notebookStart.cellIdsToRun},n),o!==e.udfConnectionStatus&&e.udfConnectionStatus===s.Q.Connected&&(o===s.Q.Reconnecting?(e.sessionLifecycleState&&(e.sessionLifecycleState.reconnectResultInfo={}),n({type:"fetchLatestNotebookSessionSettings",id:M,role:w,secondaryRoles:D,pageMode:U}),n({type:"logSessionReconnectCompleted",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U,data:{}}),n({type:"logSessionReconnectDetails",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U})):o===s.Q.Connecting&&n({type:"logNotebookSessionTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U,data:{isSuccess:!0,previousUdfStatus:o}}));let a=(0,r.Js)(e),l=[];for(let e of k.notebookStart.cellIdsToRun){let t=null==a||null==(g=a.notebookState)?void 0:g.getCellById(e);t?l.push((0,u.DA)(t)):l.push("unknown")}n({type:"logNotebookRunTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U,event:i.dJY,data:{cellIdsToRun:k.notebookStart.cellIdsToRun,cellTypes:l}}),n({type:"startRunningNotebookHeartbeat",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U})}else if(k.cellRunInfo&&k.cellRunInfo.cellId&&k.cellRunInfo.runId){let o=(0,r.Js)(e),s=k.cellRunInfo.cellId?null==o||null==(_=o.notebookState)?void 0:_.getCellById(k.cellRunInfo.cellId):void 0;(0,E.K)(e,{type:"CELL_RUN_STARTED",cellRunInfo:k.cellRunInfo},n);let d=k.cellRunInfo.cellId;(0,a.H$)(l.kk,d),n({type:"logNotebookCellRunTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U,event:i._KU,data:{cellId:d,runId:k.cellRunInfo.runId,cellType:s?(0,u.DA)(s):""},markerInfo:{event:l.QX,markers:[d]}})}else if(k.cellRunDone&&k.cellRunDone.cellId){let o=e.cacheStatus,r=1===k.cellRunDone.state,a=k.cellRunDone.cellId,s="success";"fetching"===o?s="idle":r||(s=4===k.cellRunDone.state?"errorStopRunning":"error"),(0,E.K)(e,{type:"CELL_RUN_FINISHED",cellId:a,state:s,timestamp:"number"==typeof k.cellRunDone.timestamp?k.cellRunDone.timestamp:k.cellRunDone.timestamp.toNumber(),role:w,secondaryRoles:D,id:M},n);let d=e.notebookState;if(!d)return;let c=d.getCellResult(a),f=d.getCellById(a),p=f?(0,u.DA)(f):"",S=d.getCellResultSize(a),g=d.getCellResultQueryId(a);n({type:"logNotebookCellRunTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U,event:i.Hn4,data:{cellId:k.cellRunDone.cellId,isSuccess:r,error:r?void 0:null!=(h=k.cellRunDone.errorId)?h:void 0,cause:r?void 0:null!=(m=k.cellRunDone.additionalErrorMessage)?m:void 0,cellType:p,bytesLoaded:S,queryId:g,runId:null==c?void 0:c.runId},markerInfo:{event:l.kk,markers:[k.cellRunDone.cellId]}})}else if(k.cellForwardMsg){let o=null==(I=k.cellForwardMsg)?void 0:I.forwardMsg,r=k.cellForwardMsg.cellId;if(!r&&o&&(0,d.G)(o)){let r=null==o||null==(C=o.delta)||null==(v=C.newElement)||null==(R=v.exception)?void 0:R.message,a=e.udfConnectionStatus===s.Q.Connecting,i=e.udfConnectionStatus===s.Q.Reconnecting;(a||i)&&(e.udfConnectionStatus=s.Q.NotConnected),a?n({type:"logNotebookSessionTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U,data:{isSuccess:!1,error:r}}):i?(e.sessionLifecycleState&&(e.sessionLifecycleState.reconnectResultInfo={error:r}),n({type:"logSessionReconnectCompleted",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U,data:{error:r}}),n({type:"logSessionReconnectDetails",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U})):n({type:"logNotebookSessionErrorMessage",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U,data:{error:r}}),n(r&&(0,c.T)(r)?{type:"onExternalAccessIntegrationError",id:M,role:w,secondaryRoles:D,pageMode:U,error:r}:{type:"onNotebookError",id:M,role:w,secondaryRoles:D,pageMode:U,error:null!=r?r:""}),(0,E.K)(e,{type:"NOTEBOOK_RUN_FINISHED",state:2},n)}if(!r)return;let a=null==(T=e.notebookState)?void 0:T.getCellById(r);if(void 0===a)return;(null==o?void 0:o.delta)&&(0,E.K)(e,{type:"UPDATE_RESULT",cellId:a.id,result:o},n)}else if(null==(S=k.notebookDone)?void 0:S.isCache){(0,E.K)(e,{type:"NOTEBOOK_CACHE_DONE"},n);let o=e.udfConnectionStatus===s.Q.Reconnecting;n({type:"logNotebookRunTelemetry",event:i.AK5,id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U,data:{isCache:!0,isReconnect:o}})}else if(k.controlResponse){if(k.controlResponse.resourceUtilization)(0,E.K)(e,{type:"NOTEBOOK_UPDATE_RESOURCE_USAGE",resourceUtilization:k.controlResponse.resourceUtilization},n);else if(k.controlResponse.requestId){let e=null!=(N=k.controlResponse.requestId)?N:"";o.log.warn(`Received controlResponse with id: ${e}`),n({type:"controlResponseStatus",id:M,role:w,secondaryRoles:D,requestId:k.controlResponse.requestId,status:null!=(A=null==(y=k.controlResponse)?void 0:y.status)?A:void 0,pageMode:U})}}else if(k.notebookDone&&k.notebookDone.state){let o=2===k.notebookDone.state,r=null==(b=e.sessionLifecycleState)?void 0:b.isReplayingMessagesAfterReconnect;e.sessionLifecycleState={...null!=(O=e.sessionLifecycleState)?O:{},isReplayingMessagesAfterReconnect:!1},o&&k.notebookDone.additionalErrorMessage&&n({type:"onNotebookError",id:M,role:w,secondaryRoles:D,error:k.notebookDone.additionalErrorMessage,pageMode:U}),(0,E.K)(e,{type:"NOTEBOOK_RUN_FINISHED",state:k.notebookDone.state},n),n({type:"logNotebookRunTelemetry",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U,event:i.MKg,data:{isSuccess:!o,error:o&&null!=(L=k.notebookDone.additionalErrorMessage)?L:void 0,isReplayingMessagesAfterReconnect:r}}),n({type:"stopRunningNotebookHeartbeat",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,pageMode:U})}else k.cellStatus?(0,E.K)(e,{type:"NOTEBOOK_CELL_STATUS",cellStatus:k.cellStatus},n):k.sessionSettings&&(0,E.K)(e,{type:"NOTEBOOK_SESSION_SETTINGS_UPDATED",id:t.id,role:t.role,secondaryRoles:t.secondaryRoles,sessionSettings:k.sessionSettings,pageMode:U},n)}},238628:function(e,t,n){n.d(t,{$:()=>r});var o=n(475085);let r=(e,t,n)=>{let{id:r,role:a,secondaryRoles:i,isContainerRuntime:l,pageMode:s}=t;if(e.udfConnectionStatus!==o.Q.Connected)return void console.warn(`UPDATE_PACKAGE is only applicable when UDF Connection Status is connected but got ${e.udfConnectionStatus}`);e.runStatus="updatingPackages",n(l?{type:"updatePackage",isContainerRuntime:l,imports:t.imports,id:r,role:a,secondaryRoles:i,pageMode:s}:{type:"updatePackage",data:t.data,isContainerRuntime:l,id:r,role:a,secondaryRoles:i,pageMode:s})}},169290:function(e,t,n){n.d(t,{y:()=>o});let o=e=>{"updatingPackages"===e.runStatus&&(e.runStatus="idle")}},2975:function(e,t,n){n.d(t,{k:()=>o});let o=e=>{"updatingPackages"===e.runStatus&&(e.runStatus="updatingPackagesFailed")}},464944:function(e,t,n){n.d(t,{R:()=>o});function o(e){let t=e.sessionLifecycleState;t&&(t.sessionEndReason=void 0)}},301399:function(e,t,n){n.d(t,{i:()=>o});function o(e,t,n){let{id:o,role:r,secondaryRoles:a,pageMode:i}=t;n({type:"reconnectSession",id:o,role:r,secondaryRoles:a,pageMode:i})}},908070:function(e,t,n){n.d(t,{g:()=>o});function o(e,t,n){let{id:o,role:r,secondaryRoles:a,isContainerRuntime:i,pageMode:l}=t;n({type:"restartNotebook",id:o,role:r,secondaryRoles:a,isContainerRuntime:i,pageMode:l})}},657308:function(e,t,n){n.d(t,{n:()=>r});var o=n(475085);function r(e,t,n){let{id:r,role:a,secondaryRoles:i,pageMode:l}=t;e.udfConnectionStatus=o.Q.RestartingKernel,n({type:"restartNotebookKernel",id:r,role:a,secondaryRoles:i,pageMode:l})}},450044:function(e,t,n){n.d(t,{a:()=>o});let o=(e,t,n)=>{let{id:o,role:r,secondaryRoles:a,executionConfigurations:i,pageMode:l}=t;n({type:"updateExecuteConfiguration",id:o,role:r,secondaryRoles:a,executionConfiguration:i,pageMode:l})}},872919:function(e,t,n){n.d(t,{o:()=>o});let o=(e,t,n)=>{let{id:o,role:r,secondaryRoles:a,isContainerRuntime:i,pageMode:l}=t;n({type:"shutdownNotebook",id:o,role:r,secondaryRoles:a,isContainerRuntime:i,pageMode:l})}},584280:function(e,t,n){n.d(t,{r:()=>a});var o=n(164214),r=n(917024);let a=(e,t,n)=>{var a;if("loaded"!==e.loadStatus)return;let i=o.Z();e.sessionLifecycleState={...null!=(a=e.sessionLifecycleState)?a:{},sessionStartId:i,isReplayingMessagesAfterReconnect:t.isReplayingMessagesAfterReconnect},(0,r.m)(e,{...t,type:"RUN_NOTEBOOK",cellRunType:7,runCellId:"",userTriggered:t.userTriggered},n)}},129642:function(e,t,n){n.d(t,{w:()=>o});let o=(e,t,n)=>{let{id:o,role:r,secondaryRoles:a,sessionSettings:i,updatedBy:l,pageMode:s,bypassDatabasePersist:u}=t,d={...e.notebookSessionSettingsState.settings,...i};e.notebookSessionSettingsState.settings=d,e.notebookSessionSettingsState.settingsUpdateSource=l,e.notebookSessionSettingsState.settingsUpdateTime=Date.now(),e.notebookSessionSettingsState.settingsCheckResponse=void 0,i.runtimeName&&(e.notebookRuntime=i.runtimeName&&"SYSTEM$WAREHOUSE_RUNTIME"!==i.runtimeName?"spcs":"wh"),!0!==u&&n({type:"saveNotebookSessionSettings",id:o,role:r,secondaryRoles:a,sessionSettings:d,pageMode:s})}},749341:function(e,t,n){n.d(t,{n:()=>o});function o(e,t,n){var o;let{id:r,role:a,secondaryRoles:i,onlineToSnowflakeServer:l,pageMode:s}=t,u=null!=(o=e.sessionLifecycleState)?o:{},d=void 0===u.onlineToSnowflakeServer||u.onlineToSnowflakeServer,c=void 0!==l?l:d;e.sessionLifecycleState={...u,onlineToSnowflakeServer:c},c===d&&c||(console.debug("User's network condition changed.",{onlineToSnowflakeServer:c}),n({type:"networkConditionChanged",id:r,role:a,secondaryRoles:i,onlineToSnowflakeServer:c,pageMode:s}))}},303945:function(e,t,n){n.d(t,{B:()=>r});var o=n(475085);function r(e,t){console.log("Websocket connected"),e.websocketStatus.status=o.Q.Connected,e.websocketStatus.idOfAlreadyRunningInstance=t.idOfAlreadyRunningInstance,e.websocketStatus.error=null,e.websocketStatus.streamlitVersionOfAlreadyRunningInstance=t.streamlitVersionOfAlreadyRunningInstance}},866790:function(e,t,n){n.d(t,{W:()=>r});var o=n(475085);function r(e,t,n){let{id:r,role:a,secondaryRoles:i,pageMode:l}=t;e.udfConnectionStatus=o.Q.NotConnected,e.websocketStatus.status=o.Q.NotConnected,e.websocketStatus.idOfAlreadyRunningInstance=void 0,e.websocketStatus.error=t.error,e.bottomBarState=void 0,e.runStatus="updatingPackages"===e.runStatus?"updatingPackagesFailed":"notStarted"===e.runStatus?"notStarted":"idle";let s=e.sessionLifecycleState;s&&(s.sessionEndTimeMs=Date.now()),n({type:"onNotebookError",id:r,role:a,secondaryRoles:i,error:"Unable to establish web socket connection after max attempts"===t.error?"Unable to connect.":"Unable to connect. A firewall or ad blocker might be preventing you from connecting.",pageMode:l})}},375256:function(e,t,n){n.d(t,{R:()=>a});var o=n(475085),r=n(7042);function a(e,t,n){var a,i,l;let{id:s,role:u,secondaryRoles:d,reason:c,pageMode:E}=t;console.log("Websocket disconnected due to reason:",c);let f=e.notebookState;f&&(t.reason&&"string"==typeof t.reason&&(e.sessionLifecycleState={...null!=(i=e.sessionLifecycleState)?i:{},sessionEndReason:t.reason}),e.sessionLifecycleState&&(e.sessionLifecycleState={...e.sessionLifecycleState,reconnectResultInfo:void 0,userChannelStartedInfo:void 0}),!(0,r.vi)({udfConnectionStatus:e.udfConnectionStatus,disconnectReason:c})||(null==e||null==(a=e.sessionLifecycleState)?void 0:a.isNonInteractiveSession)?(e.websocketStatus.status=o.Q.NotConnected,e.runStatus="updatingPackages"===e.runStatus?"updatingPackagesFailed":"idle",e.notebookState=f.clearAllExecutionStates(),e.udfConnectionStatus=o.Q.NotConnected,e.bottomBarState=void 0,e.sessionLifecycleState={...null!=(l=e.sessionLifecycleState)?l:{},sessionEndTimeMs:Date.now()},(0,r.ne)(c)&&"loaded"!==e.cacheStatus&&(console.debug("[Notebook] Reconnect websocket to load cache results after reconnecting existing session failed"),e.cacheStatus="notLoaded",n({type:"connectWebsocket",id:s,role:u,secondaryRoles:d,connectExistingSession:!1,loadCachedResultsAfterConnection:!0,pageMode:E})),c===o.w.USER_NOTEBOOK_SHUTDOWN&&(e.runStatus="notStarted")):(e.websocketStatus.status=o.Q.Reconnecting,e.udfConnectionStatus=o.Q.Reconnecting,n({type:"reconnectSession",id:s,role:u,secondaryRoles:d,pageMode:E})))}},508582:function(e,t,n){n.d(t,{r:()=>r});var o=n(475085);function r(e,t){let{numOfActiveSessions:n}=t;if(e.websocketStatus.status=n?o.Q.Reconnecting:o.Q.Connecting,void 0!==n){var r;n&&(e.udfConnectionStatus=o.Q.Reconnecting),e.sessionLifecycleState={...null!=(r=e.sessionLifecycleState)?r:{},numberOfRunningSessions:n}}}},396300:function(e,t,n){n.d(t,{B:()=>o});function o(e){let t=e.notebookState;t&&(e.runStatus="notStarted",e.cacheStatus="notLoaded",e.notebookState=t.clearAllResults(),e.sessionLifecycleState={})}},64472:function(e,t,n){n.d(t,{n:()=>C});var o=n(184168),r=n(630455),a=n(702679),i=n(155382),l=n(145753),s=n(236689),u=n(173465),d=n(77822),c=n(239243),E=n(233174),f=n(193691),p=n(20170),S=n(912622),g=n(499924),_=n(778098),h=n(665007),m=n(674337),I=n(327879),T=n(609737),R=n(98047),v=n(699395);let C=({hide:e,saveEligibilityCheckStatus:t,editingUserName:n,editingUserEmail:C,fullNotebookIdentifier:y,onDuplicateNotebook:N,notebookViewId:A,role:b,causalElement:O})=>{let L=(0,r.z)(()=>{M(y,m.DsD,{notebookViewId:A,saveEligibilityCheckStatus:t,pageMode:"ownerMode"},"ui_click"),window.location.reload()}),{formatMessage:k}=(0,_.Z)(),{logNotebookEditEvent:M}=(0,R.N)(),w=!!(0,v.C)(y),D=T.flags.UI_ENABLE_NOTEBOOK_DISABLED_SPCS_EXPERIENCE_FOR_ADMINS(),U=(0,g.useMemo)(()=>(0,o.jsxs)(a.s,{width:"100%",rowGap:12,children:[(0,o.jsx)(i.n,{color:l.Q2.primaryTextColor,children:k({id:"{userName}{emailPart} is editing this notebook."},{userName:(0,o.jsx)(s.x,{fontWeight:600,children:n}),emailPart:C?` (${C}) `:""})}),(0,o.jsx)(i.n,{color:l.Q2.primaryTextColor,marginTop:24,children:k({id:"To prevent overwriting each other, wait until {userName} stops editing for 1 minute. You can also duplicate this notebook to make your own copy."},{userName:n})})]}),[n,C,k]),P=(0,g.useMemo)(()=>(0,o.jsxs)(a.s,{width:"100%",rowGap:16,children:[(0,o.jsx)(i.n,{color:l.Q2.primaryTextColor,children:k({id:"{userName}{emailPart} recently edited this notebook. Reload to see their latest changes."},{userName:(0,o.jsx)(s.x,{fontWeight:600,children:n}),emailPart:C?` (${C}) `:""})}),(0,o.jsx)(u.j,{marginTop:16,theme:"yellow",icon:"warning-triangle",title:(0,o.jsx)(s.x,{color:l.Q2.statusWarningColor,fontSize:14,weight:500,children:k({id:"Reloading will discard your unsaved changes."})})})]}),[n,C,k]),x=(0,g.useMemo)(()=>(0,o.jsx)(i.n,{color:l.Q2.primaryTextColor,children:k({id:"You recently edited this notebook in another browser tab. Reload to see your latest changes."})}),[k]),B=(0,g.useCallback)(()=>{e(),N(y),M(y,m.$aC,{notebookViewId:A,saveEligibilityCheckStatus:t,pageMode:"ownerMode"},"ui_click")},[e,N,y,A,t,M]),F=(0,g.useCallback)(()=>{M(y,m.mBO,{notebookViewId:A,saveEligibilityCheckStatus:t,pageMode:"ownerMode"},"ui_click"),e()},[e,y,A,t,M]),G=(0,g.useMemo)(()=>{if("cannotSaveDueToRecentChangeFromSameUser"===t)return(0,o.jsx)(d.cN,{marginTop:8,children:(0,o.jsxs)(c.g,{children:[(0,o.jsx)(E.zx,{onClick:F,children:(0,o.jsx)(h.Z,{id:"Close"})}),(0,o.jsx)(E.zx,{use:"primary",onClick:L,marginLeft:8,children:(0,o.jsx)(h.Z,{id:"Reload notebook"})})]})});let e=w&&(0,I.e)(b)&&D,n=(0,o.jsx)(f.h,{onClick:e?void 0:B,textDecorationLine:"none",color:e?l.Q2.textButtonDisabledColor:l.Q2.textButtonColor,disabled:e,children:k({id:"Duplicate notebook"})});return(0,o.jsxs)(d.cN,{align:"justify",verticalAlign:"middle",marginTop:8,children:[e?(0,o.jsx)(p.u,{text:k({id:"Can't duplicate container notebooks using the ACCOUNTADMIN, SECURITYADMIN, or ORGADMIN roles. Try a different role."}),children:n}):n,(0,o.jsxs)(c.g,{children:[(0,o.jsx)(E.zx,{onClick:F,children:(0,o.jsx)(h.Z,{id:"Close"})}),"cannotSaveDueToRecentChangeFromOtherUser"===t&&(0,o.jsx)(E.zx,{use:"primary",onClick:L,marginLeft:8,children:(0,o.jsx)(h.Z,{id:"Reload notebook"})})]})]})},[t,B,D,L,k,F,w,b]);return(0,o.jsxs)(d.Vq,{manuallyShown:!0,behaviors:[S.O],onHide:e,causalElement:O,width:500,children:[(0,o.jsx)(d.fK,{children:(0,o.jsx)(h.Z,{id:"Can't save changes"})}),(0,o.jsxs)(d.a7,{marginBottom:12,children:["cannotSaveDueToEditLocked"===t&&U,"cannotSaveDueToRecentChangeFromOtherUser"===t&&P,"cannotSaveDueToRecentChangeFromSameUser"===t&&x]}),G]})};C.displayName="NotebookConcurrentEditAlertDialog"},911955:function(e,t,n){n.d(t,{d:()=>c});var o=n(609737),r=n(499924),a=n(242051),i=n(493098),l=n(254759),s=n(810054),u=n(559159),d=n(231455);let c=()=>{let{dataDiscoverRole:e,secondaryRoles:t}=(0,a.j)(),n=(0,l.m)(["user"]),c=o.flags.UI_ENABLE_NOTEBOOK_FEATURE_38(),{localTimeToServerTime:f}=(0,d.h)(),p=(0,u.L)(),S=(0,r.useRef)(!1),g=(0,r.useCallback)(async n=>{var o;return null!=(o=JSON.parse(await p(n,e,t)).metadata.lastEditStatus)?o:null},[p,e,t]),_=(0,r.useCallback)(()=>{S.current=!0},[]);return(0,s.d)({observerEnabled:c,visibleCallback:_}),(0,r.useCallback)(async({id:e,urlId:t,currentNotebookViewId:o,lastEditStatusInMemory:r,lastestNotebookLoadTime:a})=>{let l=!1,s=r;if(!n.user.currentUserId)return{checkStatus:"cannotSaveDueToEditLocked",lastEditStatusRetrieved:null};let u=f();if(!(null==s?void 0:s.lastEditTime)||u-s.lastEditTime>6e4||c&&n.user.currentUserId===s.authorId&&s.sessionId!==o||S.current){if(s=await g(e),(0,i.IG)(i.cf.NOTEBOOK_EDIT_LOCK_CHECK)){var d;(null==r?void 0:r.lastEditTime)?u-(null!=(d=null==s?void 0:s.lastEditTime)?d:0)>6e4?console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Recent check expired, reload latest edit history from file: ",s):n.user.currentUserId===(null==s?void 0:s.authorId)&&s.sessionId!==o?console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Same user switched to a different session: ",s):S.current&&console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Notebook transit to focused state, reload latest edit history from file: ",s):console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] No in memory last edit status, load latest edit history from file: ",s)}l=!0,S.current&&(S.current=!1)}s&&s.notebookId===t||(s={notebookId:t,authorId:"",authorName:"",sessionId:o,lastEditTime:0},l=!0);let p="canSave",_=a?f(a):0;return u=f(),s.authorId===n.user.currentUserId?c&&_&&s.sessionId!==o&&_<s.lastEditTime?((0,i.IG)(i.cf.NOTEBOOK_EDIT_LOCK_CHECK)&&console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Recent edit was from the same user with changes from other sessions. lastEditTime: ",E(s.lastEditTime)," current time: ",E(u)," lastestNotebookLoadServerTime: ",E(_)),p="cannotSaveDueToRecentChangeFromSameUser"):((0,i.IG)(i.cf.NOTEBOOK_EDIT_LOCK_CHECK)&&console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Recent edit was from the same user. lastEditTime: ",E(s.lastEditTime)," current time: ",E(u)," lastestNotebookLoadServerTime: ",E(_)),p="canSave"):u-s.lastEditTime<=6e4?((0,i.IG)(i.cf.NOTEBOOK_EDIT_LOCK_CHECK)&&console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Active lock from different user. lastEditTime: ",E(s.lastEditTime)," current time: ",E(u)),p="cannotSaveDueToEditLocked"):_&&_<s.lastEditTime?((0,i.IG)(i.cf.NOTEBOOK_EDIT_LOCK_CHECK)&&console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Inactive Lock but has recent changes after previous load. lastEditTime: ",E(s.lastEditTime)," lastestNotebookLoadServerTime ",E(_)),p="cannotSaveDueToRecentChangeFromOtherUser"):((0,i.IG)(i.cf.NOTEBOOK_EDIT_LOCK_CHECK)&&console.debug("[\uD83D\uDD10 Notebook Concurrent Editing] Inactive Lock and has no recent changes after previous load. lastEditTime: ",E(s.lastEditTime)," lastestNotebookLoadServerTime ",E(_)),p="canSave"),{checkStatus:p,lastEditStatusRetrieved:l?s:null}},[n.user.currentUserId,g,f,c])},E=e=>new Date(e).toISOString()},181670:function(e,t,n){n.d(t,{Z:()=>i});var o=n(499924),r=n(690908),a=n(254759);let i=()=>{let{user:e}=(0,a.m)(["user"]);return(0,o.useCallback)(async({role:t,secondaryRoles:n})=>{let o=new r.L("SELECT SYSDATE()").toQuery();return new Date((await e.api.query(o,{isInternal:!0,role:t,secondaryRoles:n,desc:"get-system-utc-time"})).rows[0][0])},[e.api])}},231455:function(e,t,n){n.d(t,{h:()=>s});var o=n(609737),r=n(499924),a=n(242051),i=n(254759),l=n(954612);let s=()=>{let{user:e}=(0,i.m)(["user"]),{dataDiscoverRole:t,secondaryRoles:n}=(0,a.j)(),s=(0,l.Z)(),[u,d]=(0,r.useState)(0),c=o.flags.UI_ENABLE_NOTEBOOK_FEATURE_24(),E=!!e.currentUserId;(0,r.useEffect)(()=>{let e=async()=>{let e=await s({role:t,secondaryRoles:n}),o=Date.now();d(e.getTime()-o)};c&&E&&e()},[t,n,E,e.api,c,s]);let f=(0,r.useCallback)(e=>(null!=e?e:Date.now())+u,[u]);return{localToServerTimeOffset:u,localTimeToServerTime:f}}},909569:function(e,t,n){n.d(t,{G:()=>o});function o(){return{}}},243242:function(e,t,n){n.d(t,{a:()=>a});var o=n(164214),r=n(475085);function a({notebookViewId:e,notebookUrlInfo:t}){return{loadStatus:"notLoaded",notebookState:null,runStatus:"notStarted",websocketStatus:{status:r.Q.NotConnected,error:null},selectedCell:void 0,cacheStatus:"notLoaded",cacheLoadId:void 0,udfConnectionStatus:r.Q.NotConnected,sessionLifecycleState:{notebookViewId:null!=e?e:o.Z(),onlineToSnowflakeServer:!0},urlId:"",resultHeightMap:{},cellContentMetadata:{},notebookUrlInfo:t,notebookSessionSettingsState:{settings:{}}}}},854069:function(e,t,n){n.d(t,{z:()=>r});var o=n(601401);function r(e,t){let n=(0,o.mk)(),r=t.urlId,a=n.get(r)||{};a[t.cellId]=t.resultHeight,n.delete(r),n.set(r,a),n.size>=o.Dz&&(n=new Map(Array.from(n.entries()).slice(-o.Dz))),localStorage.setItem(o.Y7,JSON.stringify(Array.from(n.entries())))}},686258:function(e,t,n){n.d(t,{Y:()=>p});var o=n(630455),r=n(51723),a=n(609737),i=n(499924),l=n(67158),s=n(674337),u=n(278928),d=n(98047),c=n(3535),E=n(475085),f=n(436978);let p=({websocketMapRef:e})=>{let{logEvent:t}=(0,r.useTelemetry)(),n=(0,d.N)(),p=(0,o.z)((t,o)=>{var r,a;let{id:i,event:l,data:s={},role:u,secondaryRoles:d,pageMode:E}=o,p=(0,f.E)(i,u,d),S=e.current[p],g=t[p];n.logCellUITelemetry(i,l,{...s,connectionId:null!=(a=null==S?void 0:S.connectionId)?a:"",notebookViewId:null==g||null==(r=g.sessionLifecycleState)?void 0:r.notebookViewId,notebookRuntime:null==g?void 0:g.notebookRuntime,pageMode:E},{event:c.Xv,markers:[`${s.cellIndex}`]})}),S=(0,o.z)((t,o)=>{var r,a;let{id:i,event:l,data:s,role:u,secondaryRoles:d,markerInfo:c,pageMode:E}=o,p=(0,f.E)(i,u,d),S=e.current[p],g=t[p];n.logCellRunTelemetry(i,l,{...s,connectionId:null!=(a=null==S?void 0:S.connectionId)?a:"",notebookViewId:null==g||null==(r=g.sessionLifecycleState)?void 0:r.notebookViewId,notebookRuntime:null==g?void 0:g.notebookRuntime,pageMode:E},s.isSuccess,c)}),g=(0,o.z)((t,o)=>{var r,a,i;let{id:u,event:d,data:E,role:p,secondaryRoles:S,pageMode:g}=o,_=(0,f.E)(u,p,S),h=e.current[_],m=t[_];n.logRunEvent(u,d,{...E,connectionId:null!=(i=null==h?void 0:h.connectionId)?i:"",notebookViewId:null==m||null==(r=m.sessionLifecycleState)?void 0:r.notebookViewId,notebookRuntime:null==m?void 0:m.notebookRuntime,pageMode:g,isReplayingMessage:!!(d===s.MKg&&E&&E.isReplayingMessagesAfterReconnect),reconnectInstanceId:null==m||null==(a=m.websocketStatus)?void 0:a.idOfAlreadyRunningInstance},E?E.isSuccess:void 0,{event:c.bZ,markers:[(0,l.m)(u)],isUserE2E:!0})}),_=(0,o.z)((t,o)=>{var r,a;let{id:i,event:s,eventType:u,role:d,secondaryRoles:E,data:p={},pageMode:S}=o,g=(0,f.E)(i,d,E),_=e.current[g],h=t[g];n.logIPYNBEvent(i,s,{...p,connectionId:null!=(a=null==_?void 0:_.connectionId)?a:"",notebookViewId:null==h||null==(r=h.sessionLifecycleState)?void 0:r.notebookViewId,notebookRuntime:null==h?void 0:h.notebookRuntime,pageMode:S},u,{event:c.sW,markers:[(0,l.m)(i)]})}),h=(0,o.z)((t,o)=>{var r,a;let{id:i,role:l,secondaryRoles:s,pageMode:u}=o,d=(0,f.E)(i,l,s),c=e.current[d],E=t[d];n.logSessionStarting(i,{connectionId:null==c?void 0:c.connectionId,sessionStartId:null==E||null==(r=E.sessionLifecycleState)?void 0:r.sessionStartId,notebookViewId:null==E||null==(a=E.sessionLifecycleState)?void 0:a.notebookViewId,notebookRuntime:null==E?void 0:E.notebookRuntime,pageMode:u})}),m=(0,o.z)((t,o)=>{var r,i,d,p,S,g,_,h,m;let{id:I,role:T,secondaryRoles:R,data:v,pageMode:C}=o,y=(0,f.E)(I,T,R),N=e.current[y],A=t[y],b={connectionId:null==N?void 0:N.connectionId,notebookRuntime:null==A?void 0:A.notebookRuntime,notebookViewId:null==A||null==(r=A.sessionLifecycleState)?void 0:r.notebookViewId,udfConnectionStatus:v.udfConnectionStatus,error:v.error,errorReason:v.errorReason||"",sqlErrorCode:v.errorCode||"",isUserError:!!v.isUserError,isUnifiedLifecycleError:!0};switch(v.udfConnectionStatus){case E.Q.Connecting:n.logNotebookEvent({notebookId:I,event:s.NJ3,eventType:u.gK,eventData:{...b,sessionStartId:null==A||null==(i=A.sessionLifecycleState)?void 0:i.sessionStartId},pageMode:C,markerInfo:{event:c.Ti,markers:[(0,l.m)(I),null!=(d=b.connectionId)?d:""]}});break;case E.Q.Reconnecting:{let e={...b,reconnectInstanceId:null==A||null==(p=A.websocketStatus)?void 0:p.idOfAlreadyRunningInstance},t={event:c.Ff,markers:[(0,l.m)(I),null!=(_=b.connectionId)?_:""]};n.logNotebookEvent({notebookId:I,event:s.ru7,eventType:u.gK,eventData:e,markerInfo:t,pageMode:C});let o=null==(S=A.sessionLifecycleState)?void 0:S.reconnectResultInfo,r=null==(g=A.sessionLifecycleState)?void 0:g.userChannelStartedInfo;o&&r&&n.logNotebookEvent({notebookId:I,event:s.G0u,eventType:u.gK,eventData:{...e,...o,...r},markerInfo:t,pageMode:C})}break;case E.Q.RestartingKernel:a.flags.UI_ENABLE_NOTEBOOK_FEATURE_30()&&n.logNotebookEvent({notebookId:I,event:s.w08,eventType:u.gK,eventData:b,markerInfo:{event:c.nL,markers:[(0,l.m)(I),null!=(h=b.connectionId)?h:""]},pageMode:C});break;default:n.logNotebookEvent({notebookId:I,event:s.kDJ,eventType:u.gK,eventData:{...b,sessionStartId:null==A||null==(m=A.sessionLifecycleState)?void 0:m.sessionStartId},pageMode:C})}}),I=(0,o.z)((t,o)=>{var r,a;let{id:i,role:l,secondaryRoles:s,data:u,pageMode:d}=o,c=(0,f.E)(i,l,s),E=e.current[c],p=t[c],S={connectionId:null==E?void 0:E.connectionId,notebookRuntime:null==p?void 0:p.notebookRuntime,sessionStartId:null==p||null==(r=p.sessionLifecycleState)?void 0:r.sessionStartId,notebookViewId:null==p||null==(a=p.sessionLifecycleState)?void 0:a.notebookViewId,pageMode:d};u.isSuccess?n.logSessionStartSuccess(i,S):n.logSessionStartFailed(i,{...S,error:u.error})}),T=(0,o.z)((t,o)=>{var r,a;let{id:i,role:l,secondaryRoles:s,data:u,pageMode:d}=o,c=(0,f.E)(i,l,s),E=e.current[c],p=t[c];n.logSessionErrorMessage(i,{connectionId:null==E?void 0:E.connectionId,sessionStartId:null==p||null==(r=p.sessionLifecycleState)?void 0:r.sessionStartId,notebookViewId:null==p||null==(a=p.sessionLifecycleState)?void 0:a.notebookViewId,notebookRuntime:null==p?void 0:p.notebookRuntime,error:u.error,pageMode:d})}),R=(0,o.z)((t,o)=>{var r,a;let{id:i,role:l,secondaryRoles:s,data:u,pageMode:d}=o,c=(0,f.E)(i,l,s),E=e.current[c],p=t[c];n.logSessionReconnectCompleted(i,{connectionId:null==E?void 0:E.connectionId,notebookViewId:null==p||null==(r=p.sessionLifecycleState)?void 0:r.notebookViewId,notebookRuntime:null==p?void 0:p.notebookRuntime,error:u.error,reconnectInstanceId:null==p||null==(a=p.websocketStatus)?void 0:a.idOfAlreadyRunningInstance,pageMode:d})}),v=(0,o.z)((t,o)=>{var r,a,i,l;let{id:s,role:u,secondaryRoles:d,pageMode:c}=o,E=(0,f.E)(s,u,d),p=t[E],S=e.current[E],g=null==(r=p.sessionLifecycleState)?void 0:r.reconnectResultInfo,_=null==(a=p.sessionLifecycleState)?void 0:a.userChannelStartedInfo;g&&_&&n.logSessionReconnectDetails(s,{connectionId:null==S?void 0:S.connectionId,notebookViewId:null==p||null==(i=p.sessionLifecycleState)?void 0:i.notebookViewId,notebookRuntime:null==p?void 0:p.notebookRuntime,reconnectInstanceId:null==p||null==(l=p.websocketStatus)?void 0:l.idOfAlreadyRunningInstance,...g,..._,pageMode:c})}),C=(0,o.z)((e,n)=>{var o;let{id:r,role:a,secondaryRoles:i,event:s,eventType:u,data:d={},pageMode:c}=n,E=e[(0,f.E)(r,a,i)];t({data:{notebookIdentifier:(0,l.m)(r),...d,notebookViewId:null==E||null==(o=E.sessionLifecycleState)?void 0:o.notebookViewId,pageMode:c},event:s,type:u})}),y=(0,o.z)((e,t)=>{var o;let{id:r,event:a,eventType:i,role:s,secondaryRoles:u,error:d,data:E={},pageMode:p}=t,S=e[(0,f.E)(r,s,u)];n.logNotebookEditEvent(r,a,{...E,notebookViewId:null==S||null==(o=S.sessionLifecycleState)?void 0:o.notebookViewId,notebookRuntime:null==S?void 0:S.notebookRuntime,error:d,pageMode:p},i,{event:c.gr,markers:[(0,l.m)(r)]})}),N=(0,o.z)((t,o)=>{var r;let{id:a,role:i,secondaryRoles:l,data:s,pageMode:u}=o,d=(0,f.E)(a,i,l),c=e.current[d],E=t[d];n.logKernelRestartEnd(a,{connectionId:null==c?void 0:c.connectionId,notebookViewId:null==E||null==(r=E.sessionLifecycleState)?void 0:r.notebookViewId,notebookRuntime:null==E?void 0:E.notebookRuntime,error:null==s?void 0:s.error,pageMode:u})}),A=(0,o.z)((t,o)=>{var r;let{id:a,role:i,secondaryRoles:l,pageMode:s}=o,u=(0,f.E)(a,i,l),d=e.current[u],c=t[u];n.logNotebookPackageUpdateAlert(a,{connectionId:null==d?void 0:d.connectionId,notebookViewId:null==c||null==(r=c.sessionLifecycleState)?void 0:r.notebookViewId,notebookRuntime:null==c?void 0:c.notebookRuntime,pageMode:s})});return(0,i.useMemo)(()=>({logNotebookTelemetry:C,logNotebookIPYNBTelemetry:_,logNotebookCellUITelemetry:p,logNotebookCellRunTelemetry:S,logNotebookRunTelemetry:g,logNotebookStartingSessionTelemetry:h,logNotebookSessionTelemetry:I,logNotebookSessionErrorMessage:T,logSessionReconnectCompleted:R,logSessionReconnectDetails:v,logNotebookKernelRestartEnd:N,logNotebookEditTelemetry:y,logNotebookPackageUpdateAlertTelemetry:A,logUnifiedLifecycleErrorTelemetry:m}),[C,_,p,S,g,I,T,h,R,v,N,y,A,m])}},920597:function(e,t,n){n.d(t,{q:()=>a});var o=n(499924),r=n(436978);let a=(e,t)=>(0,o.useCallback)((n,o,a)=>{let{id:i,role:l,secondaryRoles:s}=o,u=e[(0,r.E)(i,l,s)];u&&t(u,o,a)},[e,t])},3535:function(e,t,n){n.d(t,{$M:()=>R,FG:()=>r,Ff:()=>f,IM:()=>m,P7:()=>I,QX:()=>u,Sc:()=>S,Ti:()=>p,Xv:()=>l,_n:()=>o,bZ:()=>g,g3:()=>h,gr:()=>i,kk:()=>s,lX:()=>a,nL:()=>_,sW:()=>d,wT:()=>c,x5:()=>E,xT:()=>T});let o="notebook-open-event",r="notebook-create-event",a="notebook-rename-event",i="notebook-edit-event",l="cell-ui-event",s="cell-run-event",u="submit-cell-run-event",d="ipynb-loading",c="mark-ws-heartbeat-start",E="websocket-connection",f="session-reconnect",p="notebook-session-start",S="notebook-session-end",g="notebook-run-event",_="notebook-kernel-restart-event",h="entity-duplicate-start",m="notebook-duration-new-cache-load",I="notebook-websocket-full-connecting-duration",T="notebook-share-page-load",R="notebook-share"},996342:function(e,t,n){n.d(t,{A:()=>o});function o(e){return!(e.length<1)&&!(e.length>64)&&!!/^[a-zA-Z0-9-_]+$/u.test(e)}},475085:function(e,t,n){n.d(t,{Q:()=>a,w:()=>i});var o,r,a=((o={}).NotConnected="notConnected",o.Connected="connected",o.Connecting="connecting",o.Reconnecting="reconnecting",o.RestartingKernel="restartingKernel",o.Error="error",o),i=((r={}).NOTEBOOK_RECONNECT="NOTEBOOK_RECONNECT",r.GS_XP_STREAM_CLOSED="1011: GS/XP stream closed",r.NOTEBOOK_IDLE_TIMEOUT="1011: Idle time reached",r.USER_NOTEBOOK_SHUTDOWN="USER_NOTEBOOK_SHUTDOWN",r.NEW_WEBSOCKET_CONNECTION="1011: New websocket started",r.CLOSE_NOTEBOOK_PAGE="CLOSE_NOTEBOOK_PAGE",r.NETWORK_DOWN="NETWORK_DOWN",r.SERVER_INTERNAL_ERROR="1011: Internal error in [Streamlit server]",r.NOTEBOOK_RECONNECT_FAILED="1008: RECONNECTION_FAILED",r)},936325:function(e,t,n){n.d(t,{CS:()=>i});let o="ce110000-1111-2222-3333-ffffff",r=o+"{:06d}",a=o.length+6;class i{_markIfMatchingPattern(e){let t=null;if(e.length===a&&e.startsWith(o)){if(!Number.isInteger(t=Number(e.slice(o.length))))return null;this._seenIndexes[t]=t}return t}markIfMatchingPattern(e){let t=null;return null!==e&&(t=this._markIfMatchingPattern(e)),t}_doGeneratedId(){let e=r.replace("{:06d}",this._lastGeneratedIndex.toString().padStart(6,"0"));return this._lastGeneratedIndex+=1,e}_generateNextId(){let e=null;for(;null===e;){for(;this._lastGeneratedIndex in this._seenIndexes;)this._lastGeneratedIndex+=1;(e=this._doGeneratedId())in this._seenIds&&(e=null)}return e}generateAndMarkNextId(){let e=this._generateNextId();return this._seenIds[e]=e,e}ensureValidId(e){return null===e||""===e||e in this._seenIds?this.generateAndMarkNextId():(this._seenIds[e]=e,e)}constructor(){this._lastGeneratedIndex=0,this._seenIds={},this._seenIndexes={}}}},177674:function(e,t,n){n.d(t,{W:()=>o});let o=(e,t)=>{if(e.length!==t.length)return!1;let n=new Set(e),o=new Set(t);return n.size===o.size&&Array.from(n).every(e=>o.has(e))}},601401:function(e,t,n){n.d(t,{Dz:()=>r,Y7:()=>o,mk:()=>a});let o="notebooks-result-height-cache",r=50;function a(){let e;try{e=new Map(JSON.parse(localStorage.getItem(o)||"[]"))}catch(t){localStorage.setItem(o,"[]"),e=new Map}return e}},274438:function(e,t,n){function o(e){return"running"===e||"populatingResults"===e}function r(e){return o(e)||"waiting"===e}function a(e){if("code"!==e.cell_type)return!1;let t="string"==typeof e.source?e.source:e.source.join("");return/^(?!\s*#)\s*[!%](?:pip|conda)\s+install/mu.test(t)}function i(e){return"success"===e||"error"===e}n.d(t,{WT:()=>o,YX:()=>r,be:()=>i,rv:()=>a})},689500:function(e,t,n){function o(e){return"python"===e.metadata.language}function r(e){return"sql"===e.metadata.language}function a(e){return!!(o(e)||r(e))}function i(e){return"markdown"===e.cell_type}function l(e){let{metadata:t,cell_type:n}=e;return"markdown"===n?n:t.language}function s(e){return"code"===e.cell_type}n.d(t,{DA:()=>l,M1:()=>a,NT:()=>i,XN:()=>r,fM:()=>s,ro:()=>o})},501617:function(e,t,n){n.d(t,{_:()=>o});async function o({isParallelFetchEnabled:e,urlInfo:t,getNotebookUrlInfo:o,getWebsocketProtoParams:r}){if(t&&!e){let{ConnectionManager:e}=await Promise.all([n.e("94641"),n.e("30136"),n.e("92618"),n.e("63153"),n.e("73213")]).then(n.bind(n,767739));return{ConnectionManager:e,webSocketProtoParams:await r(),urlInfo:t}}let[{ConnectionManager:a},i,l]=await Promise.all([Promise.all([n.e("94641"),n.e("30136"),n.e("92618"),n.e("63153"),n.e("73213")]).then(n.bind(n,767739)),r(),o()]);return{ConnectionManager:a,webSocketProtoParams:i,urlInfo:l}}},443104:function(e,t,n){n.d(t,{h:()=>r});var o=n(79517);function r(e,t){return Object.keys(o._y).includes(t)?(0,o.Ex)(t,e):e({id:"Something went wrong. {message}"},{message:t})}},493685:function(e,t,n){n.d(t,{W:()=>a,f:()=>r});var o=n(952624);function r(e,t){let n=(0,o.B)(t,e.metadata.name);return n.metadata.collapsed=e.metadata.collapsed,n.metadata.codeCollapsed=e.metadata.collapsed,n.source=e.source,n.id=e.id,n}function a(e){let t=(0,o.B)("markdown",e.metadata.name);return t.metadata.collapsed=e.metadata.collapsed&&e.metadata.codeCollapsed,t.source=e.source,t.id=e.id,t}},603531:function(e,t,n){n.d(t,{n:()=>s});var o=n(437239),r=n(674337),a=n(278928),i=n(224195),l=n(994106);async function s({deleteAllRunningNotebookInstances:e,userStore:t,id:n,role:i,secondaryRoles:s,logNotebookEvent:d}){try{let o=await u({userStore:t,id:n,role:i,secondaryRoles:s,logNotebookEvent:d});e||(o=o.slice(0,1)),o.length>0&&(await Promise.all(o.map(e=>(0,l.Dy)(t,{fullNotebookIdentifier:n,role:i,secondaryRoles:s,serviceIdentifier:e}))),d({notebookId:n,event:r.fA1,eventType:a.fs,eventData:{},pageMode:"ownerMode"}))}catch(t){let e=`SPCS Notebooks: Failed to delete notebook instance. ${t}`;(0,o.k)(e,{fullNotebookIdentifier:n}),d({notebookId:n,event:r.XTd,eventType:a.gK,eventData:{error:e},pageMode:"ownerMode"})}}async function u({userStore:e,id:t,role:n,secondaryRoles:l,logNotebookEvent:s}){let u=(await (0,i.C)(e,{fullNotebookIdentifier:t,role:n,secondaryRoles:l})).filter(e=>e.isInteractive&&e.serviceId).map(e=>e.serviceId);return 0===u.length?((0,o.k)("SPCS Notebooks: No running service instance ID found",{fullNotebookIdentifier:t}),s({notebookId:t,event:r.phx,eventType:a.gK,eventData:{},pageMode:null}),[]):(u.length>1&&((0,o.k)("SPCS Notebooks: Found multiple running service instance IDs for interactive notebook.",{fullNotebookIdentifier:t}),s({notebookId:t,event:r.SKU,eventType:a.gK,eventData:{},pageMode:null})),u)}},469081:function(e,t,n){n.d(t,{We:()=>r,a_:()=>a,bW:()=>o});let o={pythonModule:null},r=()=>{Promise.all([n.e("52734"),n.e("19294"),n.e("31505")]).then(n.bind(n,353696)).then(e=>{o.pythonModule=e})};function a(e){if(!o.pythonModule)return new Set;let{parser:t}=o.pythonModule.python().language,n=t.parse(e),r=new Set,a=n.cursor(),i=t=>{if(t.firstChild()){do"VariableName"===t.name?r.add(e.slice(t.from,t.to)):("TupleExpression"===t.name||"ExpressionList"===t.name)&&i(t);while(t.nextSibling());t.parent()}},l=(t,n=0)=>{if(!(n>2))do{let o=t.name;if("FunctionDefinition"!==o&&"ClassDefinition"!==o||n)if(("AssignStatement"===o||"ForStatement"===o||"WhileStatement"===o)&&0===n){if(t.firstChild()){let n=-1,o=0;do"AssignOp"===t.name&&(n=o),o++;while(t.nextSibling());for(;t.prevSibling(););o=0;do(o<n||-1===n)&&("VariableName"===t.name?r.add(e.slice(t.from,t.to)):("TupleExpression"===t.name||"ExpressionList"===t.name)&&i(t)),o++;while(t.nextSibling());t.parent()}t.firstChild()&&(l(t,n),t.parent())}else t.firstChild()&&(l(t,n),t.parent());else t.firstChild()&&t.nextSibling()&&(r.add(e.slice(t.from,t.to)),t.parent()),t.firstChild()&&(l(t,n+1),t.parent())}while(t.nextSibling())};return a.firstChild()&&l(a),r}},224195:function(e,t,n){n.d(t,{C:()=>l});var o=n(690908),r=n(868646);let a=e=>new o.L().add("CALL SYSTEM$LIST_RUNNING_NOTEBOOK_INSTANCES(?)",(0,r.M)(e)).toQuery(),i=e=>{let[[t]]=e.rows;return JSON.parse(t)},l=async(e,t)=>{let{fullNotebookIdentifier:n,role:o,secondaryRoles:r}=t,l=a(n);return i(await e.api.query(l,{role:o,secondaryRoles:r,isInternal:!0,desc:"system-list-running-notebook-instance"}))}},670840:function(e,t,n){n.d(t,{S:()=>a,b:()=>i});var o=n(271754),r=n(689500);function a(e,t){let n=o.sha256.create();if(n.update(e.id),!t){var a;n.update(null!=(a=e.metadata.name)?a:"")}return n.update((0,r.DA)(e).toUpperCase()),n.update("string"==typeof e.source?e.source:e.source.join("")),n.hex()}function i(e,t,n){let r=o.sha256.create();return r.update(null!=e?e:""),r.update(null!=t?t:""),r.update(null!=n?n:""),r.hex()}},952624:function(e,t,n){n.d(t,{B:()=>a});var o=n(164214),r=n(655266);function a(e,t,n){let a;return"markdown"===e?{cell_type:"markdown",id:o.Z(),metadata:{name:t},source:null!=n?n:"",result:(0,r.Hx)()}:{cell_type:"code",id:o.Z(),metadata:{language:e,name:t},outputs:[],source:null!=n?n:"",execution_count:null,result:(0,r.Hx)()}}},748563:function(e,t,n){n.d(t,{V:()=>o});let o=e=>"string"==typeof e.source?e.source:e.source.join("\n")},247174:function(e,t,n){n.d(t,{t:()=>o});function o(e,t){switch(e){case"valid":case"empty":return null;case"tooLong":return t({id:"Exceeds maximum length of 255 characters"});case"invalidCharacters":return t({id:"Name can only include letters, numbers, spaces, underscores, -, $, and :"})}}},408195:function(e,t,n){n.d(t,{i:()=>o});function o(e){let t=new Set(e.map(e=>{var t;return null==(t=e.metadata)?void 0:t.name})),n="";for(let o=1;o<=e.length+1;o++){let e=`cell${o}`;if(!t.has(e)){n=e;break}}return n}},432532:function(e,t,n){n.d(t,{e:()=>r});var o=n(527565);function r(e){return e===o.U?"wh":"spcs"}},900352:function(e,t,n){function o(e){return"pending"===e||"fetching"===e}function r(e){return"loaded"===e||"error"===e}n.d(t,{P:()=>o,f:()=>r})},399696:function(e,t,n){n.d(t,{G:()=>o});function o(e){var t,n;return null!=(n=e.delta)&&null!=(t=n.newElement)&&!!t.exception}},744468:function(e,t,n){n.d(t,{o:()=>o});let o=e=>!e||"ownerMode"===e},137757:function(e,t,n){function o(e){return!!e.match(/integration '.+'/imu)}n.d(t,{T:()=>o,p:()=>a});let r=["`np.float_` was removed in the NumPy 2.0 release. Use `np.float64` instead."];function a(e){return r.some(t=>e.includes(t))}},59338:function(e,t,n){n.d(t,{J:()=>p,m:()=>f});var o=n(467131),r=n(207055),a=n.n(r),i=n(164214),l=n(34589),s=n(996342),u=n(936325),d=n(689500),c=n(408195),E=n(459085);class f extends Error{constructor(...e){super(...e),this.name="RawCellDetectedError",this.message="RawCellDetectedError"}}function p(e,t){let{enforceUUIDAsCellId:n=!1,enableConvertRawToMarkdown:r=!1,enableSafeCellIdGeneration:p=!1,convertRawToMarkdown:g=!1}=t||{},_=a()(e);if(!Array.isArray(_.cells))throw Error("Can not find cell arrays.");let h=new u.CS;for(let e of _.cells){if(!e||!S(e))throw Error("Format of a cell is incorrect.");if(r&&"raw"===e.cell_type){if(!g)throw new f;e.cell_type="markdown"}if("code"!==e.cell_type&&"markdown"!==e.cell_type)throw Error("Cell type is incorrect.");if(p){let t=null==e.id?null:e.id.toString();e.id=h.ensureValidId(t),e.id!==t&&o.cM.info("parseIpynb",`New notebook cell ID is generated: ${e.id}. Original ID: ${t}.`)}else e.id||(e.id=i.Z());if("string"!=typeof e.id||!(0,s.A)(e.id))throw Error("Cell id is not valid.");n&&!(0,E.n)(e.id)&&(e.id=i.Z()),"code"!==e.cell_type||e.outputs||(e.outputs=[]),"code"===e.cell_type&&void 0===e.execution_count&&(e.execution_count=null),e.source||(e.source=""),S(e.metadata)||(e.metadata={}),e.metadata.name||(e.metadata.name=(0,c.i)(_.cells)),(0,d.fM)(e)&&!e.metadata.language&&(e.metadata.language="python")}return e.nbformat!==l.$&&(_.nbformat=l.$),_}function S(e){return"object"==typeof e}},972590:function(e,t,n){n.d(t,{F:()=>o});function o(e){return e.replace(/Stack trace[\s\S]*/iu,"").trim()}},436978:function(e,t,n){n.d(t,{E:()=>r});var o=n(794912);function r(e,t,n){let r=(0,o.P)(e.database),a=(0,o.P)(e.schema),i=(0,o.P)(e.name);return`${t}.${n}.${r}.${a}.${i}`}},7042:function(e,t,n){n.d(t,{ne:()=>l,qq:()=>r,vi:()=>i});var o=n(475085);let r=[o.w.NOTEBOOK_RECONNECT,o.w.NOTEBOOK_IDLE_TIMEOUT,o.w.USER_NOTEBOOK_SHUTDOWN,o.w.NEW_WEBSOCKET_CONNECTION,o.w.CLOSE_NOTEBOOK_PAGE,o.w.GS_XP_STREAM_CLOSED,o.w.NETWORK_DOWN],a=[o.w.NOTEBOOK_RECONNECT_FAILED,o.w.SERVER_INTERNAL_ERROR],i=({udfConnectionStatus:e,disconnectReason:t})=>e===o.Q.Connected&&!r.includes(null!=t?t:"")&&!a.some(e=>null==t?void 0:t.startsWith(e)),l=e=>!!(null==e?void 0:e.startsWith(o.w.NOTEBOOK_RECONNECT_FAILED))},271165:function(e,t,n){n.d(t,{X:()=>r});let o=["SAVE_SUCCEEDED","SAVE_FAILED","START_NOTEBOOK","RUN_NOTEBOOK","CANCEL_EXECUTION","UPDATE_PACKAGE"],r=e=>!!o.includes(e.type)&&("RUN_NOTEBOOK"!==e.type&&"START_NOTEBOOK"!==e.type||!1!==e.userTriggered)},994106:function(e,t,n){n.d(t,{Dy:()=>s,PJ:()=>c,jX:()=>u,k$:()=>d});var o=n(609737),r=n(690908),a=n(67158),i=n(868646),l=n(94587);function s(e,t){let{role:n,secondaryRoles:o,fullNotebookIdentifier:i,serviceIdentifier:s}=t;return e.api.query(new r.L("CALL SYSTEM$DELETE_RUNNING_NOTEBOOK_INSTANCES({}, {})",(0,l.i)((0,a.m)(i)),(0,l.i)(s)).toQuery(),{role:n,secondaryRoles:o,isInternal:!0,desc:"delete-notebook-instances"})}async function u({userStore:e,fullNotebookIdentifier:t,role:n,secondaryRoles:o}){let a=new r.L().add("CALL SYSTEM$LIST_RUNNING_NOTEBOOK_INSTANCES(?)",(0,i.M)(t)).toQuery(),[[l]]=(await e.api.query(a,{role:n,secondaryRoles:o,isInternal:!0,desc:"system-list-running-notebook-instances"})).rows;return JSON.parse(l).filter(e=>e.serviceId.length>0)}async function d({userStore:e,uniqueId:t,role:n,secondaryRoles:o}){let a=new r.L().add("CALL SYSTEM$GENERATE_NOTEBOOK_FQN_FROM_ID(?)",(0,l.i)(t)).toQuery(),[[i]]=(await e.api.query(a,{role:n,secondaryRoles:o,isInternal:!0,desc:"system-get-notebook-full-identifier-from-unique-id"})).rows;return i}async function c({userStore:e,role:t,secondaryRoles:n}){if(!o.flags.ENABLE_UI_FEATURE_NOTEBOOKS_ACTIVE_STATUS())return[];let a=new r.L().add("CALL SYSTEM$LIST_USER_RUNNING_NOTEBOOKS()").toQuery(),i=await e.api.query(a,{role:t,secondaryRoles:n,isInternal:!0,desc:"system-list-user-running-notebooks"});if(!i||0===i.rows.length)return[];let[[l]]=i.rows;return l?JSON.parse(l):[]}},79517:function(e,t,n){n.d(t,{Ex:()=>d,Ke:()=>l,_Z:()=>u,_y:()=>i,ae:()=>s});let o=/^[_a-zA-Z]/u,r=/^[_a-zA-Z][_a-zA-Z0-9]*$/u;var a,i=((a={}).DUPLICATE="DUPLICATE",a.RESERVED_WORDS="RESERVED_WORDS",a.INVALID_START="INVALID_START",a.INVALID_CHAR="INVALID_CHAR",a.VARIABLE_CONFLICT="VARIABLE_CONFLICT",a.NONE="NONE",a);function l(e,t){return new Set(["and","as","assert","break","class","continue","def","del","elif","else","except","false","finally","for","from","global","if","import","in","is","lambda","none","nonlocal","not","or","pass","raise","return","true","try","while","with","yield"]).has(e.toLowerCase())?{isValid:!1,reason:"RESERVED_WORDS"}:o.test(e)?r.test(e)?t[e]?{isValid:!1,reason:"VARIABLE_CONFLICT"}:{isValid:!0,reason:"NONE"}:{isValid:!1,reason:"INVALID_CHAR"}:{isValid:!1,reason:"INVALID_START"}}function s(e,t,n){for(let o=0;o<e.length;o++)if(e[o].metadata.name===t&&o!==n)return!1;return!0}function u(e,t){switch(e){case"RESERVED_WORDS":return t({id:"Reserved word in Python cannot be used as a cell name."});case"INVALID_START":return t({id:"Cell names must start with a letter or an underscore."});case"INVALID_CHAR":return t({id:"Cell names can only contain alphanumeric characters and underscores."});case"DUPLICATE":return t({id:"Cell name must be unique."});case"VARIABLE_CONFLICT":return t({id:"Cant use the same name as a Python variable."});default:return""}}function d(e,t){return t({id:"Failed to rename cell. {message}"},{message:u(e,t)})}},523692:function(e,t,n){n.d(t,{V:()=>r});var o=n(850114);let r=e=>{let t=e.trim();return t?t.length>o.g0?"tooLong":/^[a-zA-Z0-9_$\- :]+$/u.test(t)?"valid":"invalidCharacters":"empty"}},459085:function(e,t,n){n.d(t,{n:()=>o});function o(e){return/^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$/u.test(e)}},986350:function(e,t,n){n.d(t,{K:()=>l});var o=n(499924),r=n(778098),a=n(463462),i=n(782649);function l(){let{read:e}=(0,i.l)(),{formatMessage:t}=(0,r.Z)();return(0,o.useCallback)(async({rootLocation:n,mainFile:o,throwRawError:r})=>{let{stage:i,path:l}=(0,a.T)(n),s=await e(i,l,o);if(!s.success){if(r)throw s.error;throw Error(t({id:"An unexpected error occurred. Try refreshing the page or contact Support if the error persists."}))}return s.content},[t,e])}},198819:function(e,t,n){n.d(t,{E:()=>l});var o=n(499924),r=n(537840),a=n(168333),i=n(336400);function l(e){let t=(0,i.k)();return(0,o.useCallback)(async n=>{await (0,a.J)((0,a.R)(e),(0,r.mJ)(n),t)},[e,t])}},795048:function(e,t,n){n.d(t,{p:()=>i});var o=n(51723),r=n(499924),a=n(674337);function i(){let{logNavigation:e}=(0,o.useTelemetry)();(0,r.useEffect)(()=>{e(a.Hku)},[e])}},268271:function(e,t,n){n.d(t,{N:()=>i});var o=n(51723),r=n(499924),a=n(674337);function i(){let e=(0,r.useRef)(),{logEvent:t}=(0,o.useTelemetry)(),n=(0,r.useCallback)(()=>{if(!e.current)return;let t=Math.round(performance.now()-e.current);return e.current=void 0,t},[]),i=(0,r.useCallback)(n=>{e.current=performance.now(),t({event:a.fmT,type:"ui_performance",component:"useStageFilesUploader",data:{filesCount:n}})},[t]);return{logUploadStarted:i,logUploadSucceeded:(0,r.useCallback)(e=>{t({event:a.rlY,type:"ui_performance",component:"useStageFilesUploader",data:{uploadedFilesCount:e,uploadingTimeInMs:n()}})},[t,n]),logUploadFailed:(0,r.useCallback)(e=>{t({event:a.U3e,type:"ui_response_error",component:"useStageFilesUploader",data:{error:e,uploadingTimeInMs:n()}})},[t,n])}}},256663:function(e,t,n){n.d(t,{N:()=>_});var o=n(730480),r=n(524603),a=n(499924),i=n(778098),l=n(369859),s=n(463462),u=n(731694),d=n(750671),c=n(320241),E=n(646397),f=n(998269),p=n(832072),S=n(782649),g=n(254759);function _(){let{write:e}=(0,S.l)(),t=(0,a.useContext)(c.V1),{formatMessage:n}=(0,i.Z)(),_=(0,u.iA)(),h=(0,g.m)(["globalError"]).untracked;return(0,a.useCallback)(async(a,i,u,c,S)=>{var g,m,I,T;if((null==(m=h.globalError)||null==(g=m.accessError)?void 0:g.code)===o.ox.NetPolicyFailed)throw Error("Unable to save. Check your VPN or network connection and reload the page.");let R=await (0,E.W)(t.get(i,a,f.Y.describe,{secondaryRoles:u}));if((0,p.D)(R))throw Error(n({id:"Could not get details for {type} object. Error: {message}"},{type:a.type.toLowerCase(),message:null==(I=R.error)?void 0:I.message}));if(!R.result)throw Error(n({id:"Could not get details for {type} object."},{type:a.type.toLowerCase()}));let{rootLocation:v,kind:C,isLive:y}=(0,l.R)(R.result.columns[0]),N=v;if("versioned"===C&&!y){let{liveVersionLocationUri:e}=await _({id:a,role:i,secondaryRoles:u});N=(0,d.h)(e,n({id:"Expected a valid live version location"}))}let{stage:A,path:b}=(0,s.T)(N),O=await e(A,r.join(b,r.dirname(R.result.columns[0].mainFile)),r.basename(R.result.columns[0].mainFile),c);if(!O.success){if(S)throw O.error;throw Error(n({id:"Could not save {type} content to stage. Error: {message}"},{type:a.type.toLowerCase(),message:null==(T=O.error)?void 0:T.message}))}},[_,n,t,e,h])}},708990:function(e,t,n){n.d(t,{EX:()=>r.E,KP:()=>o.K,NT:()=>i.N,Nk:()=>l.N,p5:()=>a.p});var o=n(986350),r=n(198819),a=n(795048),i=n(268271),l=n(256663)},994630:function(e,t,n){n.d(t,{B:()=>_,Q:()=>g});var o=n(184168),r=n(499924),a=n(755388),i=n(221009),l=n(446013),s=n(67158),u=n(317075),d=n(40532),c=n(80550),E=n(423882),f=n(97328),p=n(766730);let S=(0,r.createContext)({appStateMachine:{},appPreviewStatus:E.I.loading,setAppPreviewStatus:()=>{},iframeBaseUrl:void 0,iframeRef:(0,r.createRef)(),iframeFetchId:"",reloadApp:()=>{},terminateWebsocketConnection:()=>{},initialResponseCacheState:{stateName:"NONE",reset:()=>{}},loadAppTelemetry:{getLoadAppData:()=>({isReload:!1,retryCount:0,firstLoadStartedAt:0,currentLoadStartedAt:0}),onAppLoadStep:()=>void 0,onShowIframe:()=>void 0,incrementRetryCount:()=>void 0,reset:()=>void 0},websocketTelemetry:{getWebsocketData:()=>({firstConnectedAt:void 0,lastConnectedAt:void 0,lastDisconnectedAt:void 0,attemptingToReconnect:!1}),onConnected:()=>void 0,onDisconnected:()=>void 0,onTerminateWebsocketConnection:()=>void 0,onRestartWebsocketConnection:()=>void 0},interactiveStartedTelemetry:{reset:()=>void 0,onWarehouseSelectedAt:()=>void 0},warehouseState:void 0,shouldShowIframe:!1,isNativeApp:!1,isInEditMode:!1,setIsInEditMode:()=>{}}),g=(0,r.memo)(({fullStreamlitIdentifier:e,bootstrapResult:t,historyQueryData:n,configToml:g,iframeBaseUrl:_,iframeRef:h,appPreviewStatus:m,setAppPreviewStatus:I,initialResponseCacheState:T,loadAppTelemetry:R,websocketTelemetry:v,interactiveStartedTelemetry:C,warehouseState:y,shouldShowIframe:N,isNativeApp:A,isInEditMode:b,setIsInEditMode:O,fatalError:L,clearFatalError:k,terminateWebsocketConnection:M,children:w})=>{let{fetchId:D,updateFetchId:U}=(0,a.m)("streamlit-preview-pane"),P=(0,p.D)(e);(0,r.useEffect)(()=>()=>{P.stop()},[P]),(0,r.useEffect)(()=>{m===E.I.suspended&&P.send("SUSPEND")},[m,P]),(0,r.useEffect)(()=>{t.error&&P.send("FATAL",{error:t.error})},[t.error,P]),(0,r.useEffect)(()=>{L&&P.send("FATAL",{error:L})},[L,P]);let x=(0,c.A)(_),{reloadApp:B}=(0,f.k)({fullStreamlitIdentifier:e,clearFatalError:k,appStateMachine:P,appPreviewStatus:m,setAppPreviewStatus:I,updateIframeFetchId:U,loadAppTelemetry:R,websocketTelemetry:v,interactiveStartedTelemetry:C,initialResponseCacheState:T,iframeRef:h,iframeOrigin:x}),F=(0,r.useMemo)(()=>({fullStreamlitIdentifier:e,appStateMachine:P,appPreviewStatus:m,setAppPreviewStatus:I,iframeBaseUrl:_,iframeRef:h,iframeFetchId:D,reloadApp:B,terminateWebsocketConnection:M,initialResponseCacheState:T,loadAppTelemetry:R,websocketTelemetry:v,interactiveStartedTelemetry:C,shouldShowIframe:N,warehouseState:y,isNativeApp:A,isInEditMode:b,setIsInEditMode:O,fatalError:L}),[e,P,m,I,_,h,D,B,M,T,R,v,C,N,y,A,b,O,L]);return(0,o.jsx)(d.h,{value:(0,s.m)(e),children:(0,o.jsx)(S.Provider,{value:F,children:(0,o.jsx)(l.X,{value:n||null,children:(0,o.jsx)(u.t,{bootstrapResult:t,children:(0,o.jsx)(i.EQ,{configToml:g,children:w})})})})})});g.displayName="StreamlitAppProvider";let _=()=>(0,r.useContext)(S)},523023:function(e,t,n){n.d(t,{h:()=>g});var o=n(51723),r=n(499924),a=n(225532),i=n(979991),l=n(916914),s=n(67158),u=n(362779),d=n(317075),c=n(927514),E=n(263952),f=n(135047),p=n(674337),S=n(994630);let g=()=>{let e=(0,E.Qh)(),{logEvent:t}=(0,o.useTelemetry)(),{logEventToSnowflakeAndDatadog:n}=(0,i.z)(),g=sessionStorage.getItem(a.VE),{debugLog:_}=(0,f.Z)(),{appViewRequestId:h}=(0,d.E)(),{isNativeApp:m,isInEditMode:I}=(0,S.B)();return(0,r.useCallback)(o=>{var r,a,i,d;let E=o.fullStreamlitIdentifier?(0,s.m)(o.fullStreamlitIdentifier):void 0,f=null!=(a=o.appViewRequestId)?a:h,S=null!=(i=o.isNativeApp)?i:m,T=null!=(d=o.isInEditMode)?d:I,R={...o.additionalTelemetryParams,...(0,c.T)({error:o.error,isUserError:(null==(r=o.additionalTelemetryParams)?void 0:r.isUserError)===!0}),windowId:g,appViewRequestId:f,isNativeApp:S,isInEditMode:T,runtimeName:o.runtimeName,runMode:(0,l.Y)(o.runtimeName)};e({fullStreamlitIdentifier:o.fullStreamlitIdentifier,componentName:o.componentName,eventName:o.eventName,additionalParams:R});let v={component:o.componentName,event:o.eventName,type:o.eventType,data:{...R,area:p.Y$F,streamlitIdentifier:E}};u.A.disallowedDatadogEventTypes.includes(v.type)?n({...v,type:v.type}):t(v),_("TELEMETRY",o.eventName,v)},[h,m,I,g,t,e,n,_])}},97328:function(e,t,n){n.d(t,{k:()=>c});var o=n(931534),r=n(292638),a=n(499924),i=n(689398),l=n(423882),s=n(674337),u=n(342141),d=n(523023);let c=({fullStreamlitIdentifier:e,clearFatalError:t,appStateMachine:n,appPreviewStatus:c,setAppPreviewStatus:E,updateIframeFetchId:f,loadAppTelemetry:p,websocketTelemetry:S,interactiveStartedTelemetry:g,initialResponseCacheState:_,iframeRef:h,iframeOrigin:m})=>{let I=(0,i.Yb)(),T=(0,i.EX)(),R=(0,d.h)(),v=(0,r.v)(n,u.pO),C=T?v:c===l.I.suspended;return{reloadApp:(0,a.useCallback)(({isReconnect:r,resetLoadAppTelemetry:a,source:i})=>{if(I&&R({fullStreamlitIdentifier:e,componentName:s.uD0,eventName:s.igR,eventType:"ui_impression",additionalTelemetryParams:{source:i}}),t("fatalErrorPage"===i),C&&!T&&E(l.I.loaded),r&&m){var u,d;T&&n.send("RESTART");let e={stCommVersion:o.h,type:"RESTART_WEBSOCKET_CONNECTION"};null==(d=h.current)||null==(u=d.contentWindow)||u.postMessage(e,m),S.onRestartWebsocketConnection()}else T&&("fatalErrorPage"===i?n.send("FORCE_RESTART"):n.send("RESTART")),f();"retry"===i&&(T&&n.send("FAIL"),p.incrementRetryCount()),a&&(p.reset(),g.reset(),_.reset())},[t,C,m,E,T,n,h,R,e,f,p,S,g,_,I])}}},877932:function(e,t,n){n.d(t,{u:()=>a});var o=n(702153),r=n(767904);let a=(0,o.C)({predictableActionArguments:!0,tsTypes:{},schema:{context:{},events:{}},context:{iframeLoadRetryCount:0},id:"streamlitApp",initial:"loading",on:{FATAL:{target:"#streamlitApp.failed"}},states:{loading:{on:{LOADED:{target:"loaded"},FAIL:[{cond:"canIframeLoadRetry",actions:"incrementIframeLoadRetry",target:"loading"},{target:"failed"}]},after:{DEFAULT_DELAY:{target:"failed"}},description:"The app is currently loading. In this state, the app is initializing and preparing to be displayed."},loaded:{on:{SUSPEND:{target:"suspended"},RESTART:{target:"restarting"}},description:"The app has successfully loaded. In this state, the app is fully operational and ready for user interaction."},failed:{on:{FORCE_RESTART:{target:"restarting"}},description:"The app failed to load after reaching the maximum number of retries, encountered a fatal exception, or timed out while loading."},suspended:{on:{LOADED:{target:"loaded"},RESTART:{target:"restarting"}},description:"The app is suspended. In this state, the app is temporarily inactive and not available for user interaction."},restarting:{always:{target:"loading"},entry:{type:"resetIframeLoadRetryCount"},description:"The app is restarting. In this state, the app is resetting and will transition back to the loading state."}}},{delays:{DEFAULT_DELAY:3e4},actions:{incrementIframeLoadRetry:(0,r.f0)({iframeLoadRetryCount:e=>e.iframeLoadRetryCount++}),resetIframeLoadRetryCount:(0,r.f0)({iframeLoadRetryCount:()=>0})},guards:{canIframeLoadRetry:e=>e.iframeLoadRetryCount<3}})},342141:function(e,t,n){n.d(t,{E2:()=>r,EV:()=>i,fL:()=>a,pO:()=>o});let o=e=>e.matches("suspended"),r=e=>e.matches("loading")||e.matches("restarting"),a=e=>e.matches("loaded")&&!e.matches("suspended"),i=e=>e.matches("failed")},766730:function(e,t,n){n.d(t,{D:()=>d});var o=n(124823),r=n(499924),a=n(164214),i=n(689398),l=n(674337),s=n(523023),u=n(877932);function d(e){let t=(0,i.EX)(),n=(0,s.h)(),d=(0,o.k)(u.u,{id:a.Z()});return(0,r.useEffect)(()=>{if(!t)return;let o=d.subscribe(t=>{var o;(t.changed||!t.historyValue)&&n({fullStreamlitIdentifier:e,componentName:l.uD0,eventName:l.UG5,eventType:"ui_impression",error:t.event.error||void 0,additionalTelemetryParams:{from:null==(o=t.history)?void 0:o.value,to:t.value}})});return()=>{o.unsubscribe()}},[e,t,n,d]),d}},982055:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,o={NoopStagger:function(){return i},NoopStaggerProvider:function(){return l},SFDBErrorCode:function(){return s},SnowflakeQueryError:function(){return u},hasCode:function(){return d},hasMessage:function(){return c}};for(var r in o)Object.defineProperty(t,r,{enumerable:!0,get:o[r]});function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let i=class{upsertTags(e){}withTags(e){return this}trace(e,t){10>=this.getLogLevel()&&console.log(e,t)}debug(e,t={}){20>=this.getLogLevel()&&console.log(e,t)}info(e,t={}){30>=this.getLogLevel()&&(console.log(this.getLogLevel()),console.log(e,t))}warn(e,t={},n){40>=this.getLogLevel()&&console.log(e,t)}error(e,t={},n){console.log(e,t)}fatal(e,t={},n){console.log(e,t)}gauge(e,t,n={}){}timing(e,t,n={}){}increment(e,t,n={}){}incrementMulti(e,t,n){}getLogLevel(){if(this.overrideLevel)return this.overrideLevel;if(!process.env.LOG_LEVEL)return 30;switch(process.env.LOG_LEVEL.toLowerCase()){case"trace":return 10;case"debug":return 20;case"info":default:return 30;case"warn":return 40}}constructor(e){a(this,"overrideLevel",void 0),this.overrideLevel=e}},l=class{get(){return this.stagger}constructor(){a(this,"stagger",void 0),this.stagger=new i}};var s=((n={}).ACCOUNT_ALREADY_EXISTS_003723="003723",n.ALREADY_EXISTS_002002="002002",n.NOT_FOUND_002043="002043",n.BROKEN_SHARE_003030="003030",n.NOT_FOUND_001999="001999",n.NOT_FOUND_002003="002003",n.UNKNOWN_IDENTIFIER="002004",n.INSUF_PRIV_003001="003001",n.ACCOUNT_CANNOT_BE_ADDED_003516="003516",n.LISTING_ALREADY_REQUESTED_090532="090532",n.DX_ALREADY_HAS_ACCOUNT_090542="090542",n.DX_DOES_NOT_HAVE_ACCOUNT_090543="090543",n.LISTING_CANNOT_DROP_PUBLISHED_090553="090553",n.LISTING_CANNOT_EDIT_PUBLISHED_090554="090554",n.SHARE_LISTING_ALREADY_SET_090557="090557",n.LISTING_NO_REQUEST_090561="090561",n.LISTING_ALREADY_FULFILLED_090566="090566",n.SHARE_ALREADY_ATTACHED_TO_LISTING_090567="090567",n.TOKEN_EXPIRED_ERROR="390114",n.WAREHOUSE_ALREADY_RESUMED_ERROR="090063",n.WAREHOUSE_ALREADY_SUSPENDED_ERROR="090064",n.WAREHOUSE_SUSPENDED_WHILE_QUEUED_ERROR="090109",n.WAREHOUSE_CANNOT_BE_RESUMED_BECAUSE_RESOURCE_MONITOR_EXCEEDED_QUOTA_ERROR="090073",n.WAREHOUSE_SUSPENDED_ERROR="000608",n.WAREHOUSE_DO_NOT_EXIST_OR_HAVE_ROLE_ACCESS_ERROR="092803",n.STAGE_DOES_NOT_EXIST_OR_HAVE_ROLE_ACCESS_ERROR_092804="092804",n.EXTERNAL_STAGES_NOT_SUPPORTED_092805="092805",n.STREAMLIT_NOT_FOUND_092806="092806",n.NO_WAREHOUSE_FOUND_092807="092807",n.WAREHOUSE_NOT_AVAILBLE_092808="092808",n.UNSUPPORTED_FEATURE="000002",n.NO_FEATURED_SECTIONS="000603",n.NO_ACTIVE_WAREHOUSE="000606",n.INVALID_PROFILE_STATE_090622="090622",n.INVALID_IP_ADDRESS_090302="090302",n.RESULT_NOT_FOUND_000612="000612",n.NO_IMPORT_SHARE_PRIV_090594="090594",n.SHARING_NOT_ENABLED_003027="003027",n.TRIAL_ACCOUNT_SUSPENDED_000666="000666",n.CANNOT_RUN_COMMAND_391833="391833",n.UNKNOWN_FUNCTION_REQUEST_002140="002140",n.CANNOT_AUTO_FULFILL_LISTING_090685="090685",n.CANNOT_AUTO_FULFILL_APP_PACKAGE_090824="090824",n.SHARE_HAS_NON_CONSUMER_TARGETS_090602="090602",n.CANNOT_REPLICATE_TAGS_391810="391810",n.PYTHON_UDF_ERROR="100357",n.CONTAINS_PYTHON_UDF_003948="003948",n.CONTAINS_EXTERNAL_TABLE_003906="003906",n.INVALID_PROPERTY_001420="001420",n.CANNOT_DROP_LISTING_DIRECTLY="090673",n.CANNOT_DROP_LISTING_AUTOFULFILLMENT_ENABLED_090684="090684",n.CANNOT_MODIFY_RETIRED_LISTING_090674="090674",n.SQL_EXECUTION_TIMED_OUT_AND_WAS_CANCELED="000630",n.EMAIL_RECIPIENT_NOT_ALLOWED_394209="394209",n.MONETIZATION_NOT_ENABLED_FOR_ACCOUNT_090659="090659",n.NO_SUITABLE_BILLING_ENTITY_FOR_TARGET_CLOUD_042119="042119",n.NATIVE_APPS_CREATION_FEATURE_NOT_ENABLED_092521="092521",n.NATIVE_APPS_APPLICATION_NO_LONGER_INSTALLED="093079",n.NATIVE_APPS_INSTALLATION_SCRIPT_ERROR_093082="093082",n.ACCOUNT_BUDGET_NOT_ACTIVATE_ERROR_20000="-20000",n.ACCOUNT_BUDGET_SNOWFLAKE_DB_NOT_SETUP_ERROR_002141="002141",n.USER_TASK_RETRY_TARGET_RUN_HAD_NO_FAILURES="091456",n.REVOKE_PARTIALLY_EXECUTED_DEPENDENT_GRANTS_NO_CASCADE_SPECIFIED="003935",n.DMX_BUY_NOT_ENABLED_042105="042105",n.CIRCULAR_ROLE_GRANT_ERROR="003010",n.LISTING_NAME_CANNOT_CONTAIN_DOLLAR_SIGN="092755",n.DRAFT_LISTINGS_PER_ACCOUNT_LIMIT_REACHED="091972",n.EMPTY_SQL_STATEMENT="000900",n.REMOTE_FILE_NOT_FOUND="091016",n.INTERNAL_DISTRIBUTION_FLAG="093085",n.NONE_APPROVED_VERSION="093086",n.NO_DEFAULT_RELEASE_DIRECTIVE="090720",n.USER_ERROR_REPORT_100315="100315",n.SNOWGIT_INTERNAL_ERROR="000600",n.GIT_REPOSITORY_NOT_AUTHORIZED="093550",n.GIT_REPOSITORY_CONNECTION_FAILED="093555",n.GIT_REPOSITORY_UNEXPECTED_BRANCH_HEAD="093560",n.GIT_REPOSITORY_FILE_OR_DIRECTORY_CONFLICT="093561",n.GIT_REPOSITORY_REMOTE_UPDATE_FAILED="093562",n.VSTAGE_LIVE_VERSION_EXISTS="099106",n.VSTAGE_LIVE_VERSION_NOT_FOUND="099108",n.VSTAGE_INVALID_READ_LOCATION="099112",n.VSTAGE_GIT_PUSH_FAILED="099120",n.VSTAGE_GIT_PULL_SUCCESS="099125",n.VSTAGE_GIT_PULL_ALREADY_LATEST="099126",n.VSTAGE_GIT_PULL_FAILED_WITH_MERGE_CONFLICT="099127",n.INSUF_PRIV_391882="391882",n.DYNAMIC_TABLE_MANUAL_REFRESH_FAILED="002742",n.PROPERTY_VALUE_IS_INVALID="001481",n.NOT_ALLOWED_RESHARE_VIEW_AND_FUNCTION="099525",n);let u=class extends Error{toString(){return`${this.code}: ${this.message}, queryId=${this.queryId}`}constructor(e,t){super(null==e?void 0:e.message),a(this,"queryName",void 0),a(this,"code",void 0),a(this,"queryId",void 0),a(this,"sdkName",void 0),a(this,"data",void 0),this.queryName=t,Object.setPrototypeOf(this,new.target.prototype),e.name&&e.code&&e.message&&(this.code=e.code,this.data=e.data,this.sdkName=e.name)}};function d(e){return!!e&&!!e.code}function c(e){return!!e&&!!e.message}},267528:function(e,t,n){n.d(t,{SB:()=>d,tJ:()=>u});var o=n(755565),r=n(627678);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let i=Symbol("state"),l=Symbol("atom");class s{constructor(e){a(this,l,void 0),a(this,"schema",void 0),a(this,"get",(e=r.h)=>e.get(this)),a(this,"set",(e,t=r.h)=>{if(this.schema){let n=this.schema.parse(e);t.set(this,n)}else t.set(this,e)}),a(this,"subscribe",(e,t=r.h)=>{e(this.get(t));let n=this;return t.sub(n,()=>e(t.get(n)))}),this[l]=(0,o.cn)(e)}}function u(e){if(Reflect.has(e,i))return Reflect.get(Reflect.get(e,i),l);if(Reflect.has(e,l))return Reflect.get(e,l);if("object"==typeof e)return e;throw Error("State is not a object")}function d(e){let t=new s(e),n=function(e){return t.get(e)};return Reflect.set(n,i,t),n.set=t.set,n.subscribe=t.subscribe,n.atom=()=>t.atom(),n.subject=()=>t.subject(),n.syncable=(e,o)=>(t.schema=o,Object.defineProperty(n,"name",{value:e}),n),n}},627678:function(e,t,n){n.d(t,{h:()=>i});var o=n(755565),r=n(267528);let a=Symbol("store"),i=new class{get(e){return this[a].get((0,r.tJ)(e))}set(e,t){this[a].set((0,r.tJ)(e),t)}sub(e,t){return this[a].sub((0,r.tJ)(e),t)}reset(){this[a]=(0,o.MT)()}constructor(e){var t;t=void 0,a in this?Object.defineProperty(this,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[a]=t,this[a]=e||(0,o.MT)()}}((0,o.K7)())},431815:function(e,t,n){n.d(t,{_:()=>a});var o=n(267528),r=n(839856);let a=(0,o.SB)({role:"",database:"",schema:"",warehouse:""}).syncable("snowsight.executionContext",r.z.object({role:r.z.string(),database:r.z.string(),schema:r.z.string(),warehouse:r.z.string()}))},931534:function(e,t,n){n.d(t,{h:()=>o});let o=1}}]);
//# sourceMappingURL=77429-677134c0abd29f38.js.map