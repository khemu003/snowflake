"use strict";(self.webpackChunk_snowflake_nu_ui=self.webpackChunk_snowflake_nu_ui||[]).push([["88230"],{909896:function(e,t,s){s.d(t,{n:()=>a});var r=s(280561),i=s(551727),o=s(706210),n=s(859399);class a{getTypes(e,t,s,a){let l={};for(let s=1;s<=e.maxCol;s++){let h,c=e.cols[s],m=e.parameters,p=a.colForColIdx(s);if(h instanceof r.L&&/id$/i.test(p)){let e=new Set;h=new o.y;for(let r=0;r<t.length;r++){let o=t[r][s-1];if(o)if(e.has(o)){h=new i.a;break}else e.add(o)}}else{var u,d;(null==(h=n.g.colTypeForDatabaseType(null!=(d=null==c?void 0:c.name)?d:"",c.externalType,m))?void 0:h.id)==="json"&&"variant"===c.externalType&&(null==(u=c.type)?void 0:u.id)==="category"&&(h=c.type)}l[s]=h}return l}}},655460:function(e,t,s){s.d(t,{f:()=>d});var r=s(18259),i=s(859399),o=s(280561),n=s(77468),a=s(963837),l=s(173550),u=s(425876);class d{getTypes(e,t,s,r){let i=[];for(let t=1;t<=e.maxCol;t++){let o=e.cols[t];(!s||-1!==s.indexOf(t))&&(o.externalType&&"text"!==o.externalType&&"real"!==o.externalType&&"fixed"!==o.externalType&&"variant"!==o.externalType||o.type&&"text"!==o.type.id||i.push(new h(t,r.colForColIdx(t),o.externalType||"")))}for(let s of t)i.forEach(t=>{t.addValue(s[t.colIdx-1],e.cols[t.colIdx].externalType)});let o={};return i.forEach(e=>{let t=e.getType();t&&(o[e.colIdx]=t)}),o}}class h{getType(){let e=this.typeCounts,t=Object.keys(e),s=null,r=0;t.forEach(function(t){e[t]>r&&(s=t,r=e[t])});let o=this.colName.toLowerCase();if("number"===s&&"zip"===o&&(s="text"),!s){if("date"===this.externalType||"timestamp"===this.externalType){let e=i.g.createTypeForId("date");return e.date.showTime="timestamp"===this.externalType,e}return"boolean"===this.externalType?i.g.createTypeForId("bool"):o.endsWith("id")&&!o.endsWith("paid")||"zip"===o||-1===this.externalType.indexOf("int")&&-1===this.externalType.indexOf("float")?null:i.g.createTypeForId("number")}if("text"===s){let e=0,t=0;for(let s of Object.values(this.stringRepetitions))s>1&&e++,s>t&&(t=s);if(!(e>1)&&!(t>4))return null;s="category"}else if(e.text/this.values.length>.05)return null;return i.g.createTypeForId(s).updateFromRows(0,this.values,this.colName)}addValue(e,t){this.values.push([e]),"boolean"===this.externalType?this.addBool(e):"number"==typeof e?this.addNumber(e):e instanceof Date?this.addDate(e):this.addString(e,t)}addBigNumber(e){e.isFinite()&&(!e.isZero()&&e.lt(this.number.min)&&(this.number.min=e),!e.isZero()&&e.gt(this.number.max)&&(this.number.max=e),o.L.isFloat(e)?this.number.hasFloat=!0:this.number.hasInt=!0,this.typeCounts.number++)}addNumber(e){isFinite(e)&&(0!==e&&e<this.number.min.toNumber()&&(this.number.min=new r.O(e)),0!==e&&e>this.number.max.toNumber()&&(this.number.max=new r.O(e)),e%1!=0?this.number.hasFloat=!0:this.number.hasInt=!0,this.typeCounts.number++)}addDate(e){this.typeCounts.date++}addLink(e){this.typeCounts.link++}addJson(e){this.typeCounts.json++}addBool(e){this.typeCounts.bool++}addString(e,t){if(null===e)return void this.emptyCount++;let s=String(e),r=o.L.prototype.parse(s,t);if(null!=r)return void this.addBigNumber(r);let i=a.U.prototype.parse(s);if(null!=i)return void this.addDate(i.iso);let d=u.U.prototype.parse(s);return null!=d?void this.addLink(d):l.y.test(s)?void this.addJson(s):n.D.prototype.isValidValue(s)?void this.addBool(s):void(s?(this.typeCounts.text++,this.stringRepetitions[s]=(this.stringRepetitions[s]||0)+1):this.emptyCount++)}constructor(e,t,s){this.colIdx=e,this.colName=t,this.externalType=s,this.values=[],this.number={min:new r.O(Infinity),max:new r.O(-1/0),hasInt:!1,hasFloat:!1},this.currency={min:new r.O(Infinity),max:new r.O(-1/0),hasInt:!1,hasFloat:!1},this.typeCounts={number:0,date:0,currency:0,text:0,email:0,link:0,json:0,bool:0},this.stringRepetitions={},this.emptyCount=0}}},280426:function(e,t,s){s.d(t,{k:()=>o});var r=s(467131);let i=null,o={get:function e(){if(null==i){let t={stack:""};"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(t,e),r.cM.info("GlobalContext","getContext: global ctx not set",{stack:t.stack})}return i},set:function(e){i=e}}},255165:function(e,t,s){s.d(t,{oZ:()=>c});var r=s(18259),i=s(365526),o=s(280561),n=s(716155);let a=/^-?([$£€¥]?)(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function l(e){if(null===e)return NaN;let t=e.match(a);return null!=t?(t[1]&&(e=e.replace(t[1],"")),+e):NaN}function u(e){if(null===e)return new r.Z(NaN);let t=e.match(a);if(null==t)return new r.Z(NaN);{t[1]&&(e=e.replace(t[1],""));let s=new r.Z(e);return o.L.isExponentialNumberBeyondLimit(s)?new r.Z(NaN):s}}function d(e){return new i.I(e).year}function h(e){return 12*e.year+(e.month-1)}let c={generateHistograms:function(e,t){let s=e.totalRows||e.maxRow,o={number:!0,currency:!0,date:!0},a=[];for(let t=1;t<=e.maxCol;t++){let n=e.cols[t];if(!n.type||!o[n.type.id]||!n.stats||n.stats.maxValue==n.stats.minValue||s-n.stats.emptyCount-n.stats.invalidCount-n.stats.nullCount<2)continue;let f="date"===n.type.id,g="number",w=l,y=!1;function c(e){return e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER}function m(e){return -1!==e.indexOf(".")&&e.length>=16}let v=()=>!c(+n.stats.minValue)||!c(+n.stats.maxValue),b=()=>m(n.stats.minValue)||m(n.stats.maxValue);if(f){let e=function(e,t){let s=new i.I(e),r=new i.I(t),o=r.valueOf()-s.valueOf();if(o>1&&o<32){var n;return{bucketType:"day",valueParser:(n=s.valueOf(),e=>new i.I(e).valueOf()-n)}}return 12*r.year+(r.month-1)-(12*s.year+(s.month-1))<24?{bucketType:"month",valueParser:function(e){let t=h(e);return e=>h(new i.I(e))-t}(s)}:s.year!=r.year?{bucketType:"year",valueParser:d}:null}(n.stats.minValue,n.stats.maxValue);if(null==e)continue;g=e.bucketType,w=e.valueParser}else(v()||b())&&(w=u,y=!0);let S=[new r.Z(w(n.stats.minValue)),new r.Z(w(n.stats.maxValue))];if(y&&(S[0].isEqualTo(NaN)||S[1].isEqualTo(NaN)))continue;let x=S[1].minus(S[0]);if(!f&&x.gte(1)&&(S[0]=S[0].integerValue(r.Z.ROUND_FLOOR),x=S[1].minus(S[0])),f&&x.eq(0))continue;let C=new r.Z(1),R=x.integerValue(r.Z.ROUND_CEIL);if(x.gt(32)){var p;(C=x.div(32).integerValue(r.Z.ROUND_CEIL)).gt(100)&&(C=(p=C).eq(0)?new r.Z(0):p.sd(2)),R=(R=x.div(C)).mod(1).eq(0)?R.plus(1):R.integerValue(r.Z.ROUND_CEIL)}else if(R=R.plus(1),!n.stats.onlyInt&&!f)for(;R.lt(9)&&(R=R.times(2),!C.isEqualTo(C.div(2)));){C=C.div(2);let e=S[0].plus(R.times(C)).minus(S[1]).div(C);e.gt(1)&&(R=R.minus(e.integerValue(r.Z.ROUND_FLOOR).minus(1)))}S[1]=S[0].plus(R.times(C));let T=[];for(let e=0;e<+R;e++)T.push(0);let I={bucketType:g,range:S,interval:C,counts:T};a.push({colIdx:t,valueParser:w,bigNumbers:y,histogram:I})}return new n.k(e,t).rowStream().then(t=>t.readRows((e,t)=>{if(1==t)return!1;a.forEach(t=>{if(!0===t.bigNumbers){let s=t.valueParser(e[t.colIdx-1]);if(s.isFinite()){let e=s.minus(t.histogram.range[0]).div(t.histogram.interval).integerValue(r.Z.ROUND_FLOOR);t.histogram.counts[+e]++}}else{let s=t.valueParser(e[t.colIdx-1]);if(isFinite(s)){let e=Math.floor((s-t.histogram.range[0].toNumber())/t.histogram.interval.toNumber());t.histogram.counts[e]++}}})}).then(()=>(a.forEach(t=>{let s=t.colIdx;e.cols[s].stats.histogram=t.histogram}),e)))}}},115499:function(e,t,s){s.d(t,{ey:()=>l,ku:()=>u,pO:()=>d});var r=s(909896),i=s(655460),o=s(255165),n=s(716155),a=s(294756);async function l(e,t,s,a,d=!0){let h=new n.k(e,s,{detectors:[new i.f,new r.n],includeBlankRows:!0}),c=await h.rowStream(),m=new n.v(a,t,{generateStats:!0,keepStats:!0,shouldUpdateWidths:d,useNullPlaceholder:!!s});return e=await m.writeStream(c,-1,!0),e=u(e=await o.oZ.generateHistograms(c.sheet,s))}function u(e){let t=a.e.ColNames.fromSheet(e);for(let s=1;s<=e.maxCol;s++)e.cols[s].name=t.colForColIdx(s);return e}function d(e,t){let s=t.filter(e=>"formatCol"===e.type);if(!s.length)return e;(e={...e}).cols={...e.cols};let r=a.e.ColNames.fromSheet(e);for(let t of s){let s=r.colIdxForCol(t.col);if(s<1)continue;let i=e.cols[s];(i={...i}).type=t.colType,e.cols[s]=i}return e}},501101:function(e,t,s){s.d(t,{K:()=>m});var r=s(18259);class i{add(e){this.keyCountMapping.has(e)||this.keyCountMapping.set(e,0),this.keyCountMapping.set(e,this.keyCountMapping.get(e)+1)}getCount(e){var t;return null!=(t=this.keyCountMapping.get(e))?t:0}map(e){let t=[],s=0;for(let[r,i]of this.keyCountMapping.entries())t.push(e(r,i,s)),s++;return t}get size(){return this.keyCountMapping.size}constructor(){this.keyCountMapping=new Map}}var o=s(280561),n=s(77468),a=s(551727),l=s(556466),u=s(222439),d=s(173550),h=s(706210),c=s(399826);class m{static jsonType(e){return null===e?"null":"undefined"===e?"undefined":Array.isArray(e)?"array":typeof e}static getSortedCategoriesWithCount(e){let t=e.map((e,t)=>({category:e,count:t}));return t.sort((e,t)=>t.count-e.count),t}export(){return{...this.stats,...this.exportCategoriesStats(),jsonStats:this.exportJsonStats(),minValue:String(this.minValue),maxValue:String(this.maxValue),onlyInt:this.count>0&&!!this.stats.onlyInt}}exportCategoriesStats(){if(this.stats.categoryCount>1e4||this.stats.invalidCategoryCount>0)return{categories:null,categoryCount:0};let e=m.getSortedCategoriesWithCount(this.categoriesCounter);return{categories:e.slice(0,a.a.MAX_ITEMS),categoryCount:e.length}}exportJsonStats(){let e=m.getSortedCategoriesWithCount(this.jsonCounters.types),t=m.getSortedCategoriesWithCount(this.jsonCounters.keys),s=m.getSortedCategoriesWithCount(this.jsonCounters.values).map(e=>({...e,category:e.category.slice(0,d.a.STATS_MAX_VALUE_LENGTH)}));return{typeCount:e.length,types:e,keyCount:t.length,keys:t.slice(0,d.a.STATS_MAX_KEYS),valueCount:s.length,values:s.slice(0,d.a.STATS_MAX_VALUES)}}addValue(e){if(this.count++,""===e)return void this.stats.emptyCount++;if(null===e||this.options.useNullPlaceholder&&e===c.L)return void this.stats.nullCount++;if(!this.type.isValidValue(e))return void this.stats.invalidCount++;if(!(this.type instanceof h.y)){if(this.type instanceof d.a){let t=this.type.getNativeValue(e),s=m.jsonType(t);if(this.jsonCounters.types.add(s),"object"===s)Object.keys(t).forEach(e=>{this.jsonCounters.keys.add(e)});else if("string"===s||"number"===s||"boolean"===s){let e=String(t);this.jsonCounters.values.add(e)}return}if((this.type instanceof a.a||this.type instanceof n.D)&&this.stats.categoryCount<=1e4)return void(a.a.isCategorical(e)?(this.stats.categoryCount=this.categoriesCounter.size,this.categoriesCounter.add(e)):this.stats.invalidCategoryCount++);if(this.type instanceof u.V){let t=this.type.getNativeValue(e);t.domain&&this.categoriesCounter.add(t.domain)}if(this.type instanceof o.L){let t=new r.Z(e);if(o.L.isExponentialNumberBeyondLimit(t)){this.stats.invalidDueToExceedingBigNumberRange=!0;return}this.computeStatsForBigNumberValue(t)}else{let t=this.type.getSortableValue(e);this.computeStatsForNativeValue(t)}}}computeStatsForNativeValue(e){if((""===this.minValue||e<this.minValue)&&(this.minValue=e),(""===this.maxValue||e>this.maxValue)&&(this.maxValue=e),this.type instanceof o.L||this.type instanceof l.V)if(null==this.stats.onlyInt&&(this.stats.onlyInt=!0),e%1!=0&&(this.stats.onlyInt=!1),null==this.stats.total)this.stats.total=e;else{let t=this.stats.total+e;if(!(t>=Number.MIN_SAFE_INTEGER)||!(t<=Number.MAX_SAFE_INTEGER))return!1;this.stats.total=t}return!0}computeStatsForBigNumberValue(e){if((""===this.minValue||e.lt(this.minValue))&&(this.minValue=e),(""===this.maxValue||e.gt(this.maxValue))&&(this.maxValue=e),this.type instanceof o.L||this.type instanceof l.V)if(null==this.stats.onlyInt&&(this.stats.onlyInt=!0),o.L.isFloat(e)&&(this.stats.onlyInt=!1),null==this.stats.total)this.stats.total=e;else{if(o.L.isExponentialNumberBeyondLimit(this.stats.total)){this.stats.invalidDueToExceedingBigNumberRange=!0;return}this.stats.total instanceof r.Z?this.stats.total=this.stats.total.plus(e):this.stats.total=new r.Z(this.stats.total).plus(e)}}constructor(e,t={}){this.stats={emptyCount:0,invalidCount:0,nullCount:0,categoryCount:0,invalidCategoryCount:0,total:null,onlyInt:null,minimumDecimalDigits:0,jsonStats:{typeCount:0,types:[],keyCount:0,keys:[],valueCount:0,values:[]},invalidDueToExceedingBigNumberRange:!1},this.count=0,this.categoriesCounter=new i,this.jsonCounters={types:new i,keys:new i,values:new i},this.options={useNullPlaceholder:!1},this.minValue="",this.maxValue="",this.type=e||new h.y,this.options={...this.options,...t}}}},917044:function(e,t,s){s.d(t,{$:()=>o});class r{writeRow(e){return this.rowStream?this.rowStream.writeRow(e):(this.rowBuffer.push(e),this.rowBuffer.length>=this.bufferSize&&this.createRowStream(),!1)}createRowStream(){try{this.rowStream=this.rowStreamForBuffer(this.rowBuffer);for(let e=0;e<this.rowBuffer.length;e++)this.rowStream.writeRow(this.rowBuffer[e])}catch(e){this.error(e)}}close(){this.rowStream||this.createRowStream(),this.rowStream.close()}error(e){this.rowStream?this.rowStream.error(e):this.errorHandler&&this.errorHandler(e)}constructor(e,t,s){this.bufferSize=e,this.rowStreamForBuffer=t,this.errorHandler=s,this.rowBuffer=[],this.rowStream=null}}var i=s(690804);class o extends i.A{writeRow(e){return this.bufferStream?!!this.bufferStream.writeRow(e)||void 0:(this.rowIdx++,this.rowIdx>1&&this.shouldNormalizeRows&&this.normalizers.forEach(t=>t.normalizeRow(this.sheet,e)),super.writeRow(e))}close(){this.bufferStream?this.bufferStream.close():super.close()}constructor(e,t,s,i=!0){super(e,t),this.normalizers=s,this.rowIdx=0,this.shouldNormalizeRows=i,this.bufferStream=new r(100,s=>{let r=s.slice(1);return this.normalizers.forEach(s=>s.normalizeSheet(e,r,t)),this.bufferStream=null,this},this.error.bind(this))}}},690804:function(e,t,s){s.d(t,{A:()=>r});class r{static from(e){let t=new r;return Object.assign(t,e),t}writeRow(e){if(this.closed)return void console.error("RowStream already closed");if(this.iter){if(this.iterRowIdx++,this.iter(e,this.iterRowIdx))return this.close(),!0}else this.buffered.push(e)}readRows(e){return this._error?Promise.reject(this._error):(this.iter=e,new Promise((t,s)=>{this.resolve=t,this.reject=s;let r=this.closed;if(this.buffered){for(let t=0;t<this.buffered.length;t++)if(this.iterRowIdx++,e(this.buffered[t],this.iterRowIdx)){this.close();break}delete this.buffered}r&&t(void 0)}))}error(e){this._error=e,this.reject&&this.reject(e)}close(){this.closed||(this.resolve&&this.resolve(void 0),this.closed=!0)}constructor(e,t){this.sheet=e,this.colNames=t,this.buffered=[],this.closed=!1,this.iterRowIdx=0}}},716155:function(e,t,s){s.d(t,{k:()=>R,v:()=>I});var r=s(280561),i=s(556466),o=s(963837);let n=/^(#)?([,\.])?(##)?(0+)(\.0+)?(%|\\%)?$/,a=/^"?([\$¥£€])/;class l{getTypes(e,t){let s=[];for(let t=1;t<=e.maxCol;t++){let r=e.cols[t];if(r.style){let i=e.styles[r.style];s.push(new u(t,i))}}let r={};return s.forEach(e=>{let t=e.getType();t&&(r[e.colIdx]=t)}),r}}class u{getType(){return this.detectCurrency(this.style)||this.detectNumber(this.style)||this.detectDate(this.style)||null}detectNumber(e){let t=e.fmt.default,s=e.fmt.type,i=e.align,o=t.match(n);if(!o&&"num"!==s||"num"===s&&"@"===t&&"left"===i)return null;let a=new r.L;return o?a.update({precision:o[5]?o[5].length-1:0,thousandsSep:o[2]?o[2]:"",isPercent:!!o[6]}):a}detectDate(e){return"date"!==e.fmt.type?null:new o.U}detectCurrency(e){return e.fmt.default.match(a)?new i.V:null}constructor(e,t){this.colIdx=e,this.style=t}}var d=s(859399);let h={Decoder:class e{consumeChunk(e){let t=this.chunk+e,s=this.latestValues,r=!1,i=0;for(let e=0;e<t.length;e++){let o=t[e];if(r){if('"'==o&&e<t.length-1){let o=t[e+1];'"'==o?e++:(","==o||"\n"==o)&&(s.push(t.substring(i+1,e).replace(/""/g,'"')),"\n"==o&&(this.cb(s),s=[]),i=++e+1,r=!1)}}else"\n"==o?(s.push(t.substring(i,e)),this.cb(s),s=[],i=e+1):","==o?(s.push(t.substring(i,e)),i=e+1):'"'==o&&(r=!0)}this.chunk=t.substr(i),this.latestValues=s}close(){this.chunk&&this.consumeChunk("\n")}constructor(e){this.cb=e,this.chunk="",this.latestValues=[]}}};var c=s(467131);class m{incrementColStyleCount(e,t){this.colStyleCounter[e]||(this.colStyleCounter[e]={}),null==this.colStyleCounter[e][t]?this.colStyleCounter[e][t]=1:this.colStyleCounter[e][t]++}normalizeSheet(e){let t=this.colStyleCounter;Object.keys(t).forEach(s=>{let r=t[s],i=null,o=0;Object.keys(r).forEach(function(e){let t=r[e];t>o&&(i=e,o=t)}),i&&(e.cols[s].style=Number(i))})}normalizeRow(){}constructor(){this.colStyleCounter={}}}var p=s(706210);class f{normalizeSheet(e,t,s){for(let t=1;t<=e.maxCol;t++)!e.cols[t].type&&(this.colsToNormalize.includes(t)||this.colsToNormalize.push(t));let r={};for(let i of(this.detectors.forEach(i=>{let o=i.getTypes(e,t,this.colsToNormalize,s);for(let t of this.colsToNormalize)null!=o[t]&&(r[t]=o[t],e.cols[t].type=o[t])}),this.colsToNormalize))delete e.cols[i].style,e.cols[i].type||(e.cols[i].type=new p.y);this.colTypes=d.g.generateTypes(e)}normalizeRow(e,t){for(let e=0;e<this.colsToNormalize.length;e++){let s=this.colsToNormalize[e],r=s-1;t[r]=this.colTypes[s].getStringValue(t[r])}}constructor(e,t=[]){this.detectors=e,this.colTypes={},this.detectors=e,this.colsToNormalize=t}}var g=s(399826),w=s(294756),y=s(146838),v=s(501101);class b{addValues(e){for(let t=0;t<e.length;t++)this.stats[t+1].addValue(e[t])}save(){for(let e=1;e<=this.sheet.maxCol;e++){let t=this.stats[e].export(),s=this.sheet.cols[e];s.stats=t,"category"===s.type.id&&null==t.categories&&(s.type.id="text")}}constructor(e,t={}){this.sheet=e,this.stats={};for(let r=1;r<=e.maxCol;r++){var s;this.stats[r]=new v.K(null==(s=e.cols[r])?void 0:s.type,t)}}}var S=s(917044),x=s(690804);let C=500/3;class R{rowStream(e={}){let t=e.headerRow||1,s=this.sheet,r=this.blobClient,i=this.options,o=!!i.includeBlankRows;return new Promise(function(n,a){let u=null,d=0,p=new m;function y(t){let r=new w.e.ColNames(t);if(g.J.isTypedSheet(s))u=new x.A(s,r);else{let t=i.detectors||[new l],o=i.normalizers||[p,new f(t)];u=new S.$(s,r,o,e.shouldNormalizeRows)}return n(u),u.writeRow(u.colNames.names())}if(0==t){let e=[];for(let t=0;t<s.maxCol;t++)e.push("");y(e)}function v(e){if(u&&u.closed)return!0;if(++d<t)return!1;for(let t=e.length;t<s.maxCol;t++)e.push("");if(d===t)return y(e);for(let t=0;t<e.length;t++)if(o||""!==e[t])return u.writeRow(e);return!1}function b(){if(!u)return void a(Error("Cannot create row stream. Sheet is empty."));u.closed||u.close()}if(s.rows){for(let e=1;e<=s.maxRow;e++){let t=s.rows[e],r=[];if(void 0!==t&&void 0!==t.cells)for(let e=1;e<=s.maxCol;e++){let s=t.cells[e];void 0!==s&&""!==s.v?(r.push(s.v),s.s&&p.incrementColStyleCount(e,s.s)):r.push("")}if((r.length>0||o)&&v(r))break}b()}else{if(!r)return b();r.read(s.rowsBlob,function(e){if(200!=e.statusCode)return void a(Error("Received bad status code ("+e.statusCode+") for rowsBlob: "+s.rowsBlob));e.setEncoding("utf8");let t=new h.Decoder(v);e.on("data",function(e){t.consumeChunk(e)}),e.on("end",function(){t.close(),b()}),e.on("error",function(e){c.cM.error(Error("Received blob read error for "+s.rowsBlob+": "+e)),u?u.error(e):a(e)})})}})}constructor(e,t,s){this.sheet=e,this.blobClient=t,this.options=s,e={...e};let r={};for(let t=1;t<=e.maxCol;t++){let s={...e.cols[t]};s||(s={}),s.type&&(s.type=d.g.objectToType(s.type)),r[t]=s}e.cols=r;let i=[];for(let t=0;t<e.styles.length;t++){let s=w.e.simplifyStyle(e.styles[t]);s.fmt.default.match(/[0#]/)||"date"==s.fmt.type?s.align="right":s.align="left",i.push(s)}e.styles=i,this.sheet=e,this.options={detectors:null,normalizers:null,...s}}}let T={generateStats:!1,keepStats:!1,shouldUpdateWidths:!0,useNullPlaceholder:!1};class I{writeStream(e,t=-1,s=!1){var r;let i=this.options.generateStats,o=this.options.keepStats,n=e.sheet,a={cols:n.cols,maxCol:n.maxCol,maxRow:0,styles:n.styles,properties:{ySplit:1,defaultRowHeight:28},parameters:n.parameters},l=null==(r=n.parameters)?void 0:r.time_output_format;return void 0===t&&(t=-1),new Promise((r,n)=>{let u=null,h=null;this.blobClient?(delete a.rows,h=this.blobClient.startWrite(function(e){n(e)})):a.rows={};let c={},m={},p=0;for(let e=1;e<=a.maxCol;e++)c[e]={maxWidth:0,rowsTouched:0,rowsChecked:0};let f=null,w=null;e.readRows(e=>{if(null===f){f=[];for(let e=0;e<a.styles.length;e++)f.push({...a.styles[e]});y.r.processStyles(f),w=d.g.generateColStyles(a.cols,l)}let r=!1,o=0;for(;o<e.length;o++)if(e[o]||null===e[o]){r=!0;break}if(!r&&!s)return!1;if(a.maxRow++,!u&&i&&(u=new b(a,{useNullPlaceholder:this.options.useNullPlaceholder})),this.options.shouldUpdateWidths&&p<a.maxCol)for(let t=1;t<=e.length;t++){let s=c[t];if(s.rowsChecked>=100||s.rowsTouched>=1e3){!m[t]&&(m[t]=!0,p++);continue}this.updateColWidth({i:o,sheet:a,values:e,styles:f,colTypeStyles:w,colIdx:t,colWidthCount:s})}if(u&&a.maxRow>1&&u.addValues(e),h){let t=[];for(let s=0;s<e.length;s++){var n,v;n=t,(v=e[s]).match(E)&&(v='"'+v.replace(/"/g,'""')+'"'),n.push(v)}h.write(t.join(",")+"\n")}else(-1==t||a.maxRow<=t+1)&&(a.rows[a.maxRow]=g.J.sheetRowForValues(e));return!(t>-1)&&!1}).then(()=>{if(-1===t)a.totalRows=a.maxRow;else if(a.maxRow>t){for(let e=a.maxRow;e>t;e--)delete a.rows[e];a.totalRows=a.maxRow,a.maxRow=t}if(u?u.save():u||o||g.J.removeColStats(a),this.options.shouldUpdateWidths)for(let e=1;e<=a.maxCol;e++){let t=c[e].maxWidth,s=a.cols[e].type,r=w[e],i=a.cols[e].stats;s&&"category"===s.id&&i&&i.categories&&(t=this.updateWidthForCategoricalCol({categories:i.categories,colStyle:r,sheet:a,currColWidth:c[e].maxWidth})),t>0?a.cols[e].width=t:delete a.cols[e].width}this.blobClient?this.blobClient.endWrite(h,function(e){a.rowsBlob=e,r(a)}):r(a)}).catch(function(e){n(e)})})}measureText(e,t,s){let r=s?e:g.J.formatCellValue(e,t);return!r||r.length<8?0:r.length>C?500:s?w.e.colHeaderWidth(this.ctx,r):w.e.colWidth(this.ctx,r)}updateColWidth(e){let{i:t,sheet:s,values:r,styles:i,colTypeStyles:o,colIdx:n,colWidthCount:a}=e,l=r[n-1];if("string"!=typeof l&&null!==l&&c.cM.warn(`Invalid value in row ${t+1}, values:${r}`),void 0===l||""===l)return void a.rowsTouched++;let u=i[s.cols[n].style||0];if(1==s.maxRow?u=w.e.simplifiedHeaderStyle:o[n]&&(u=o[n]),a.maxWidth<500){let e=Math.min(this.measureText(l,u,1==s.maxRow),500);e>a.maxWidth&&(a.maxWidth=e)}a.rowsChecked++,a.rowsTouched++}updateWidthForCategoricalCol(e){let{categories:t,colStyle:s,sheet:r,currColWidth:i}=e,o=i;for(let e=0;e<t.length;e++){let i=t[e].category,n=this.measureText(i,s,1==r.maxRow);if(n>=500){o=500;break}n>o&&(o=n)}return o}constructor(e,t,s={}){this.blobClient=e,this.ctx=t,this.options=T,this.options={...this.options,...s}}}let E=/[",\n]/},553086:function(e,t,s){s.d(t,{p:()=>r,D:()=>o});class r{wait(e){let t=Date.now();if(this.maybeUpdateBucketStart(t),this.numRequests<this.rps)return this.numRequests+=1,Promise.resolve();{var s,r;let t=new Promise(e=>{this.queuedResolvers.push(e)}),i="";return this.isLoggingEnabled&&void 0!==e&&(i=this.tryNormalizeUrl(e)),!this.timer&&(this.timer=window.setTimeout(this.onTimer,1e3),this.isLoggingEnabled&&(null==(s=this.logger)||s.addAction("rate-limiter-start-queuing",{url:e,urlGroup:i}))),this.isLoggingEnabled&&(null==(r=this.logger)||r.addAction("rate-limiter-queues-request",{url:e,urlGroup:i})),t}}tryNormalizeUrl(e){try{return o(e)}catch(s){if(this.isLoggingEnabled){var t;null==(t=this.logger)||t.addAction("rate-limiter-normalizing-url-error",{url:e})}return""}}maybeUpdateBucketStart(e){let t=e-e%1e3;this.bucketStart!==t&&(this.bucketStart=t,this.numRequests=0)}constructor(e,t){this.onTimer=()=>{for(window.clearTimeout(this.timer),this.timer=void 0,this.maybeUpdateBucketStart(Date.now());this.queuedResolvers.length>0&&this.numRequests<this.rps;){let e=this.queuedResolvers.shift();e&&(e(),this.numRequests+=1)}if(this.queuedResolvers.length>0)this.timer=window.setTimeout(this.onTimer,1e3);else if(this.isLoggingEnabled){var e;null==(e=this.logger)||e.addAction("rate-limiter-queue-cleared")}},this.rps=e,this.queuedResolvers=[],this.numRequests=0,t?(this.logger=t,this.isLoggingEnabled=!0):this.isLoggingEnabled=!1}}let i=new Set(["","a","account-url","add-new-session","all-roles","applica","avatarPreview","avatars","billing","blobs","bootstrap","bootstrap-data-request","browse","catalog","charts","check","check-user-session","cmdline","columns","complete-oauth","complete-secret","console","consumerbillingcontact-mc","consumerrequest-mc","copilot","cortex-chat","credit-card","csv-download","dashboard","databases","datadictionary","debug","delta","dev","download","dx","entities","errors","events","exchange-mc","featured-objects","feedback","fetch-account-deployment-info","fetch-account-deployment-info-from-url","fetch-bootstrap-data","fetch-extended-bootstrap-data","fetch_iframe.html","files","folders","generate-completion","get-regions-detail","get-semantic-models","guest","healthcheck","inline-completion","internal","list","listing","marketplace","members","members-search","modify-parameters","notification-contacts","null","oauth","object-details","objects","onboarding","open-graph","organizations","param","payment-method","pinned-objects","pprof","prefs","preview","profile","profile-image","provider-studio","published-preview","queries","query","readiness","refresh-catalog","request","resources","result","role-permissions","roles","run-query","search","send-feedback","sendValidationEmail","session","sessions","settings","setup-intent","sf","shared-object-list","signout","signout-account","sitemap.xml","smart-tags","snowflake","snowscope","start-oauth","start-redirect-oauth","stream","stripe-redirect","suggest","symbol","sync-snowflake-user-and-org","table-preview","terms-and-billing","timing","trace","transform","trial-extension","update-custom-instructions","update-database-schema","update-num-classic-ui-worksheets","update-reference-worksheet-setting","update-sample-data-setting","update-semantic-model","upload","v0","validate-snowflake-account-region","validate-snowflake-url","view-result-grants","views","warehouses","worksheet","worksheets-download"]);function o(e){let t=new URL(e),s=t.searchParams.get("desc"),r=s?`?desc=${s}`:"";return t.pathname.split("/").map(e=>i.has(e)?e:":unknown").join("/")+r}},888890:function(e,t,s){s.d(t,{$D:()=>u,Bq:()=>r,GF:()=>l,Jk:()=>o,XW:()=>n,dR:()=>d,q$:()=>h,rJ:()=>a,sM:()=>i});let r="ALL",i="NONE",o="ACCOUNTADMIN",n="GLOBALORGADMIN",a="ORGADMIN",l="SECURITYADMIN",u="PUBLIC",d="SYSADMIN",h="USERADMIN"},117043:function(e,t,s){s.r(t),s.d(t,{nufetchForm:()=>k,handleBootstrapResponse:()=>P,uploadFormWithProgress:()=>T,testing:()=>C,nufetch:()=>E,uploadFileWithProgress:()=>I,simpleBootstrap:()=>O,bootstrap:()=>q});var r=s(54649),i=s(609737),o=s(467131),n=s(207055),a=s.n(n),l=s(383151),u=s(955348),d=s(433855),h=s(134037),c=s(743767),m=s(374318),p=s(553086);let f="Content-Type";var g=s(900061),w=s(116737),y=s(206e3),v=s(634327);let b={},S=new p.p(20);function x(e,t){if(!t||!e)return e;let s=e.split("\n"),r=t.split("\n");if(!(s.length>0)||!(r.length>0))return e;{let e=s[0];return r[0]=e,s[1]&&r.splice(1,1,s[1]),r.join("\n")}}let C={constructSyntheticStack:x};async function R(e,t,s,r){let[i,n]=(0,h.h)(e,t,a()(null!=s?s:{}),o.cM),u=function(){try{var e,t,s;return null!=(s=l.T.csrfToken)?s:null==(t=d.b.get())||null==(e=t.PageParams)?void 0:e.csrfToken}catch(e){return}}();if(u)if(l.T.appServerUrl!==e.appServerUrl&&e.isSecondaryUser){let t=b[e.appServerUrl];if(!t){let s=await fetch(e.appServerUrl+"/bootstrap",i);200===s.status&&(t=(await s.json()).PageParams.csrfToken,b[e.appServerUrl]=t)}n[h.x.csrfToken]=t}else n[h.x.csrfToken]=u;return"string"==typeof r&&(n[v.s8]=(0,v.t9)(r)),{...i,headers:n}}async function T({path:e,requestContext:t,formData:s,signal:r,onProgress:i=()=>void 0,versionPrefix:o="/v0"}){return await new Promise(async(n,a)=>{var u,d;if(null==r?void 0:r.aborted)return a(new c._);let h=new XMLHttpRequest;function p(){h.abort()}let f=()=>{let e;try{var t,s;let r=JSON.parse(h.responseText);e=null!=(s=null==r||null==(t=r.error)?void 0:t.message)?s:h.responseText}catch(t){e=h.responseText||"Unknown error"}a(new m.M(h.status,{message:e}))};h.upload.addEventListener("progress",e=>i({progress:e.loaded/e.total})),h.addEventListener("load",()=>{if(h.status>=200&&h.status<400)return n(h.response);f()}),h.addEventListener("abort",()=>a(new c._)),h.addEventListener("error",f),h.addEventListener("timeout",()=>a(Error(h.responseText))),r&&(r.addEventListener("abort",p),h.addEventListener("readystatechange",()=>{h.readyState===XMLHttpRequest.DONE&&r.removeEventListener("abort",p)}));let g=null==(d=l.X.pageState)||null==(u=d.user)?void 0:u.id,y=await R(t,g),v=(0,w.o)(e,t,o);for(let[e,t]of(h.open("POST",v,!0),h.withCredentials=!0,Object.entries(y.headers)))h.setRequestHeader(e,t);h.send(s)})}async function I({path:e,requestContext:t,formData:s,file:r,signal:i,onProgress:o=()=>void 0,versionPrefix:n="/v1"}){return await new Promise(async(a,u)=>{var d,h;if(null==i?void 0:i.aborted)return u(new c._);let p=new XMLHttpRequest;function f(){p.abort()}let g=()=>{let e;try{var t,s;let r=JSON.parse(p.responseText);e=null!=(s=null==r||null==(t=r.error)?void 0:t.message)?s:p.responseText}catch(t){e=p.responseText||"Unknown error"}u(new m.M(p.status,{message:e}))};p.upload.addEventListener("progress",e=>o({progress:e.loaded/e.total})),p.addEventListener("load",()=>{if(p.status>=200&&p.status<400)return a(p.response);g()}),p.addEventListener("abort",()=>u(new c._)),p.addEventListener("error",g),p.addEventListener("timeout",()=>u(Error(p.responseText))),i&&(i.addEventListener("abort",f),p.addEventListener("readystatechange",()=>{p.readyState===XMLHttpRequest.DONE&&i.removeEventListener("abort",f)}));let y=null==(h=l.X.pageState)||null==(d=h.user)?void 0:d.id,v=await R(t,y),b=new URLSearchParams;s.forEach((e,t)=>{b.append(t,e.toString())});let S=`${e}?${b.toString()}`,x=(0,w.o)(S,t,n);for(let[e,t]of(p.open("POST",x,!0),p.withCredentials=!0,Object.entries(v.headers)))p.setRequestHeader(e,t);p.setRequestHeader("Content-Type","application/octet-stream"),p.send(r)})}async function E(e,t,s,n,a,d){var h,c,p,v;if(d){if(void 0!==s)throw Error("nufetch does not support `providedOptions` with `prefetchedResponse`");if(void 0!==n)throw Error("nufetch does not support `versionPrefix` with `prefetchedResponse`");if(void 0!==a)throw Error("nufetch does not support `canGuestFetch` with `prefetchedResponse`")}if((l.X.pageIsInvalid||(null==(c=l.X.stores)||null==(h=c.user)?void 0:h.signoutInProgress))&&"/signout"!=e&&"/signout-account"!=e)return new Promise((e,t)=>{});let b=Error("synthetic error"),C=(0,w.o)(e,t,n,a),T=l.X.pageState&&l.X.pageState.user&&l.X.pageState.user.id,I=await R(t,T,s,C);try{let s=!1;try{let e=i.FlagClient.getInstance();e&&(s=null!=(p=e.flags.UI_ENABLE_UI_PLATFORM_FEATURE_31())&&p)}catch(e){o.cM.error(e,{sourceName:"snowFetch"})}s||["/snowscope/search","/snowscope/suggest"].includes(e)||await S.wait();let n=d?await d:await (0,g.A)(t.appServerUrl)(C,I);if(n.status>=200&&n.status<300){let t=n.headers.get("X-Numeracy-Version");if(t&&t!==l.X.latestClientVersion&&(l.X.latestClientVersion=t,l.X.latestClientVersionChanged=new Date),"Immediate"===n.headers.get("X-Reload")&&window.location.reload(),204==n.status||"0"===n.headers.get("Content-Length"))return n;try{let e=n.headers.get("Content-Disposition");if(e&&/attachment/.test(e))return await (0,y.Sv)(n),{};let t=n.headers.get(f);if(t&&"text/plain"===t)return{textContent:await n.text()};if(t&&"text/event-stream"===t&&n.body)return n;if(t&&/image/.test(t))return await n.blob();return await n.json()}catch(t){throw o.cM.error(t,{message:"nufetch: exception reading JSON from non-error response (download file)",extra:{path:e,statusCode:n.status}}),new m.M(n.status,{type:r.ErrorType.apps,code:r.AppsErrorCode.FailedToParseJSON})}}{let t,s=n.headers.get("X-Snowflake-Request-ID");try{if((null==(v=n.headers.get(f))?void 0:v.indexOf("text/plain"))!==-1)t={message:await n.text(),requestId:s};else{let e=await n.json();t={requestId:s,...e}}}catch(t){throw e&&-1!==e.indexOf("/timing")&&403===n.status||o.cM.error(t,{message:"nufetch: exception reading non-error response",extra:{path:e,statusCode:n.status,responseLength:n.headers.get("Content-Length"),snowflakeRequestId:s}}),new m.M(n.status,{type:r.ErrorType.apps,code:r.AppsErrorCode.FailedToParseJSON})}throw new m.M(n.status,t)}}catch(e){if(e instanceof m.M){if(e.code===r.AppsErrorCode.UserLoggedOut)t.isSecondaryUser||null==T||(l.X.pageIsInvalid=!0,window.location.href=window.location.origin);else if(e.code==r.AppsErrorCode.NotProvisioned)return l.T.notProvisioned=!0,window.location.reload(),new Promise((e,t)=>{});else if(e.code===r.AppsErrorCode.NetPolicyFailed)return console.error(`${e.statusCode}: ${r.AppsErrorCode.NetPolicyFailed}`),l.X.pageIsInvalid=!0,l.X.stores&&l.X.stores.globalError.setAccessError(e),new Promise((e,t)=>{})}else(0,u.eE)(e,{"error.kind":"network","error.code":"unknown"});throw e.stack=x(e.stack,b.stack),e}}function k(e,t,s,r){let i=Object.assign({},s);return"string"==typeof i.body&&(i.headers||(i.headers={}),i.headers=i.headers,i.headers[f]||(i.headers[f]="application/x-www-form-urlencoded")),E(e,t,i,r)}let _={User:"user",PageType:"pageType",PageParams:"pageParams",Error:"error"};async function q(e,t=""){return P(await O(e,t))}function P(e){let t=e.redirect;if(t)return window.location.href=t,new Promise(()=>{});for(let t in e){let s=_[t];s&&(window[s]=e[t])}return e}async function O(e,t=""){return E(`/bootstrap${t}`,e,void 0,"",!1)}window.numeracy.tests={testhealthcheck:async e=>{try{let t=await E(`/healthcheck?check=${e}`,window.numeracy.stores.user.userRequestContext());console.log(t)}catch(e){console.error(e)}}}},116737:function(e,t,s){s.d(t,{o:()=>n});var r=s(383151),i=s(616821),o=s(238257);function n(e,t,s="/v0",a=!0){var l,u;let d=!!(null==(u=r.X.stores)||null==(l=u.user)?void 0:l.isGuestUser)||!!t.isGuest,h=(0,o.r)(window.location.hostname),c=d&&a&&!h,m=c&&!(0,i.WC)()?"":t.appServerUrl;return`${m}${s}${c?"/guest":""}${e}`}},662839:function(e,t,s){s.d(t,{i:()=>i});var r=s(888890);function i(e){return!!e&&0!==e.length&&(e.includes(r.Jk)||e.includes(r.XW))}},613752:function(e,t,s){s.d(t,{j:()=>i});var r=s(888890);function i(e){return!!e&&0!==e.length&&(e.includes(r.rJ)||e.includes(r.XW))}},311636:function(e,t,s){s.d(t,{w:()=>i});var r=s(888890);function i(e){return!!e&&0!==e.length&&e.includes(r.GF)}},993914:function(e,t,s){s.d(t,{e:()=>o});var r=s(374318);let i=["TypeError: Failed to fetch","Failed to fetch","NetworkError when attempting to fetch resource.","Load failed"],o=e=>!(e instanceof r.M)&&e instanceof Error&&!!e.message&&i.includes(e.message)},438635:function(e,t,s){s.d(t,{h:()=>i});var r=s(888890);function i(e){return!!e&&(e===r.Jk||e===r.XW)}},83980:function(e,t,s){s.d(t,{l:()=>i});var r=s(888890);function i(e){return!!e&&(e===r.rJ||e===r.XW)}},844699:function(e,t,s){s.d(t,{E:()=>i});var r=s(888890);function i(e){return!!e&&e===r.GF}},634327:function(e,t,s){s.d(t,{s8:()=>r,sO:()=>o,t9:()=>n});let r="X-Snowflake-Page-Source",i={};function o(e){return i=e,()=>{i={}}}function n(e){let t="unknown";try{new URL(e,window.location.origin).pathname.startsWith("/v0")&&(t=function(){let{page:e,pageType:t}=i;return"dashboard"===t?"dashboard":"query"===t?"worksheet":"folder"===t&&("worksheets"===e||"dashboards"===e)?e:"unknown"}())}catch(e){}return t}},805018:function(e,t,s){s.d(t,{D:()=>r});function r(e,t,s){let r,i,o,n,a,l=function(){let u=new Date().getTime()-n;u<t&&u>=0?r=setTimeout(l,t-u):(r=null,!s&&(a=e.apply(o,i),r||(o=i=null)))},u=function(...u){o=this,i=arguments,n=new Date().getTime();let d=s&&!r;return r||(r=setTimeout(l,t)),d&&(a=e.apply(o,i),o=i=null),a};return u.cancel=function(){clearTimeout(r),r=null},u}},480336:function(e,t,s){s.d(t,{W:()=>o});var r=s(440528),i=s.n(r);function o(e){return i().h32(e,0xdeadbeef).toString(16)}},642261:function(e,t,s){s.d(t,{P:()=>r});function r(e,t,s){let r,i,o,n,a=0;s||(s={});let l=function(){a=(null==s?void 0:s.leading)===!1?0:new Date().getTime(),r=0,n=e.apply(i,o),r||(i=o=null)},u=function(){let u=new Date().getTime();a||(null==s?void 0:s.leading)!==!1||(a=u);let d=t-(u-a);return i=this,o=arguments,d<=0||d>t?(r&&(clearTimeout(r),r=0),a=u,n=e.apply(i,o),r||(i=o=null)):r||(null==s?void 0:s.trailing)===!1||(r=setTimeout(l,d)),n};return u.cancel=function(){clearTimeout(r),a=0,r=0,i=o=null},u.flush=function(){if(r)return clearTimeout(r),l(),n},u}},793593:function(e,t,s){s.d(t,{g:()=>n,o:()=>o});let r=`
# The Snowpark package is required for Python Worksheets. 
# You can add more packages by selecting them using the Packages control and then importing them.

import snowflake.snowpark as snowpark
from snowflake.snowpark.functions import col

def main(session: snowpark.Session): 
    # Your code goes here, inside the "main" handler.
    tableName = 'information_schema.packages'
    dataframe = session.table(tableName).filter(col("language") == 'python')

    # Print a sample of the dataframe to standard output.
    dataframe.show()

    # Return value will appear in the Results tab.
    return dataframe 
`.trim(),i=`
import com.snowflake.snowpark._

object Procedure {
  def main(session: Session): String = {
    var rows = session.sql("select 'Hello, Scala!'").collect();
    return rows(0).getString(0);
  }
}
`.trim(),o={sql:"",python:r,scala:i,java:`
import com.snowflake.snowpark.Session;

class Procedure {
    public static String main(Session session) {
        return session.sql("select 'Hello, Java!'").collect()[0].getString(0);
    }
}
`.trim(),javascript:`
/*
const resultSet = snowflake.execute({ sqlText: "select 'Hello, JavaScript!'" });
resultSet.next();
return resultSet.getColumnValue(1);
*/
`.trim()},n={python:{returnType:"Table()",runtimeVersion:"3.11"}}},629365:function(e,t,s){s.d(t,{s:()=>a});var r=s(485387),i=s.n(r),o=s(996283),n=s(725522);class a extends n.H{defaultName(e,t){let s=i()().format("YYYY-MM-DD"),r=e===o.i0?o.i0:"folder";return t?`Import ${s}`:`${s} ${r}`}label(e,t=!0){return t?e({id:"Folder"}):e({id:"folder"})}get virtual(){return this._virtual}toReduxState(){return{id:this.id,type:this.type}}constructor(e,t){super(e||"UNCREATED_FOLDER_ID",t),this.orgId=t.orgId||null,this.type=t.type,this.ownerId=t.ownerId||null,this.name=t.name||this.defaultName(this.type,t.isImported),this.slug=t.slug||this.id,this.url=t.url||null,this.editable=t.editable||!1,this._virtual=t.virtual||!1}}},844989:function(e,t,s){s.d(t,{B:()=>i});var r=s(725522);class i extends r.H{getModelStoreIndexableByUUID(){return`${this.id}`}static cloneChartWithNewSnowflakeRequestId(e,t){return new i(e.id,{...e,snowflakeRequestId:t})}constructor(e,t={}){super(e,t),this.modified=t.modified,this.version=t.version,this.type=t.type,this.sheet=t.sheet,this.steps=t.steps,this.primary=t.primary,this.secondary=t.secondary,this.secondary.domain&&this.secondary.domain[0]==Number.MAX_SAFE_INTEGER&&(this.secondary.domain=["auto","auto"]),this.lineStyle=t.lineStyle||{},this.points=t.points||!1,this.barStyle=t.barStyle||{},this.tableStyle=t.tableStyle||{},this.error=t.error,this.maxSeries=t.maxSeries,this.comparison=t.comparison,this.showLegend=void 0===t.showLegend||t.showLegend,this.snowflakeRequestId=t.snowflakeRequestId}}},380877:function(e,t,s){s.d(t,{Z:()=>d});var r=s(485387),i=s.n(r);class o{tileId(e,t,s){return`${e}-${t}-${s}`}isTablePlaced(e){return!!this._tiles[this.tileId(e.id,"table","")]}isChartPlaced(e,t){var s;let r="";return t.id!==(null==(s=e.chartInfos[0])?void 0:s.id)&&(r=String(t.id)),!!this._tiles[this.tileId(e.id,"chart",r)]}allTilesPlaced(e){for(let t of e){if(!this.isTablePlaced(t))return!1;for(let e of t.chartInfos)if(!this.isChartPlaced(t,e))return!1}return!0}constructor(e){let t={};for(let s of e)for(let e of s.cells)t[this.tileId(e.pid,e.displayMode,e.chartId||"")]=!0;this._tiles=t}}class n{get rows(){return this._rows}get cells(){return this._rows.reduce((e,t)=>e.concat(t.cells),[])}normalizedRows(e,t,s=!1){let r={};for(let t of e)r[t.id]=!0;let i=[];for(let e of this._rows){let o=[];if(e.cells){for(let i of e.cells)if(r[i.pid]||null==i.pid){let e=i.pid,r=t?`${e}:${t}`:e;o.push({...i,pid:e,pidToLoad:r,staticEnter:s&&!!e})}}i.push({...e,cells:o})}return i}normalizedCells(e,t){return this.normalizedRows(e,t).reduce((e,t)=>e.concat(t.cells),[])}get fingerprint(){return this._rows.map(e=>e.cells.map(e=>`${e.pid}:${e.version}`)).join("-")}getPlacedTiles(){return new o(this._rows)}hasPid(e,t){return!!this._rows.find(s=>s.cells.find(s=>s.pid===e&&(!t||s.displayMode===t)))}markAsRefreshing(){this._rows.forEach(e=>{e.cells.forEach(e=>{e.refreshing=!0})})}transform(e){e.forEach(({action:e,params:t})=>{let{pid:s,displayMode:r,chartId:i,rowIdx:o,cellIdx:n,row:a,cell:l,height:u}=t;switch(e){case"resizeRow":this._resizeRow(o,u);break;case"insertRow":this._insertRow(o,a);break;case"insertCell":this._insertCell(o,n,l);break;case"removeCell":this._removeCell(s,r,i)}this._rows=this._rows.filter(e=>e.cells.length>0)})}_resizeRow(e,t){this._rows[e]&&(this._rows[e].height=t)}_insertRow(e,t){t.cells.forEach(e=>this._removeCell(e.pid,e.displayMode,e.chartId)),this._rows.splice(e,0,{...t,height:2})}_insertCell(e,t,s){this._removeCell(s.pid,s.displayMode,s.chartId),this._rows[e].cells.splice(t,0,s)}_removeCell(e,t,s){"number"==typeof s&&(s=String(s)),this._rows=this._rows.map(r=>(r.cells=r.cells.filter(r=>!(r.pid===e&&(!t||r.displayMode===t)&&(!s&&!r.chartId||s&&r.chartId===s))),r))}constructor(e){this._rows=e||[]}}var a=s(244435),l=s(996283),u=s(325978);class d extends u.b{label(e,t=!0){return t?e({id:"Dashboard"}):e({id:"dashboard"})}markAsRefreshing(){this.refreshing=!0,this.dashboard.markAsRefreshing()}createAllowedOverrides(){return new a.y3({database:!0,schema:!0})}constructor(e,t){var s;super(e,{...t,type:l.i0}),this.dashboard=new n(null==(s=this.settings.dashboard)?void 0:s.rows),this.runnable=t.runnable||!1,this.refreshed=t.refreshed?i()(t.refreshed).toDate():new Date,this.resultsViewable=t.resultsViewable||!1,this.isRefreshDead=t.isRefreshDead||!1}}},34157:function(e,t,s){s.d(t,{z:()=>l});var r=s(30673),i=s(530016),o=s(793593),n=s(442290),a=s(725522);class l extends a.H{shouldModelUpdate(e){return!1}toObject(){return JSON.parse(JSON.stringify(this))}isCreateProcedureEnabled(){switch(this.queryLanguage){case"java":case"javascript":case"python":case"scala":return!0;default:return!1}}update({query:e=this.query,queryLanguage:t=this.queryLanguage,queryLanguageConfig:s=this.queryLanguageConfig,queryRange:r=this.queryRange,executionContext:o=this.executionContext,paramRefs:a=this.paramRefs,modifiedTime:l=this.modifiedTime}){this.query=e,this.queryLanguage=t,this.queryLanguageConfig=s,this.queryRange=r,this.modifiedTime=l,this.executionContext=new n.f(o),this.paramRefs=(a||[]).map(i.NV.fromObject)}getModelStoreIndexableByUUID(){return this.id}clone(e){return new l(e,{...this,modifiedTime:this.modifiedTime||void 0,queryLanguageConfig:this.queryLanguageConfig||void 0,queryRange:this.queryRange||void 0,executionContext:this.executionContext||void 0})}get defaultQuery(){var e;return o.o[null!=(e=null===this||void 0===this?void 0:this.queryLanguage)?e:""]||""}get isEmpty(){return!(this.query||"").trim()}get isTooLong(){return this.query.length>r.gT.QUERY_MAX_DRAFT_LENGTH}get excessDraftLength(){return Math.max(this.query.length-r.gT.QUERY_MAX_DRAFT_LENGTH,0)}constructor(e,t={}){var s;super(e,t),this.version=t.version||void 0,this.modifiedTime=t.modifiedTime?new Date(t.modifiedTime):null,this.queryLanguage=t.queryLanguage||"sql",this.query=null!=(s=t.query)?s:this.defaultQuery,this.queryLanguageConfig=t.queryLanguageConfig||null,this.queryRange=t.queryRange||null,this.paramRefs=(t.paramRefs||[]).map(i.NV.fromObject),this.executionContext=new n.f(t.executionContext),this.appSessionId=t.appSessionId||0}}},996283:function(e,t,s){s.d(t,{E8:()=>o,i0:()=>r,pD:()=>i});let r="dashboard",i="list",o="color1"},325978:function(e,t,s){s.d(t,{b:()=>h});var r=s(145753),i=s(30673),o=s(530016),n=s(629365),a=s(244435),l=s(442290),u=s(996283),d=s(584895);class h extends n.s{createAllowedOverrides(){return new a.y3({warehouse:!0,database:!0,schema:!0})}get isUnsaved(){return!!this.unsavedKey}get settings(){return this._settings}get executionContext(){return this._executionContext}get color(){return r.Il.Blue50}get colorId(){return this.settings.color||u.E8}markAsRefreshing(){this.refreshing=!0}constructor(e,t){super(e,t),this.unsavedKey=(0,d.t)(this.id),this.originalId=(0,d.p)(this.id),this.visibility=t.visibility||i.gT.FOLDER_DEFAULT_VISIBILITY,this.modified=t.modified?new Date(t.modified):void 0,this.members=t.members||[],this.isImported=t.isImported||!1,this._executionContext=new l.f(t.executionContext||{}),this.refreshing=!!t.refreshing;let s=[];s=this.unsavedKey&&t.settings&&t.settings.unsavedParams?t.settings.unsavedParams[this.unsavedKey]||[]:t.paramRefs||[],this.paramRefs=s.map(o.NV.fromObject),this._settings=t.settings||{},this.allowedOverrides=this.createAllowedOverrides()}}},467629:function(e,t,s){s.d(t,{L:()=>c});var r=s(280426),i=s(115499),o=s(399826),n=s(18259),a=s(211657),l=s(95673),u=s(725522),d=s(682659),h=s(505300);class c extends u.H{snapshot(){return{version:this.version,sheet:this._unprocessedSheet,processedSheet:this.sheet,ready:this.ready,canceled:this.canceled,populated:this.populated,cappedRows:this.cappedRows,error:this.error,rewritten:this.rewritten,modified:this.modified,processingPromise:this.processingPromise,snowflakeRequestId:this.snowflakeRequestId,snowflakeQueryId:this.snowflakeQueryId}}getModelStoreIndexableId(){return this.version?`${(0,l.d)(this.id)}@${this.version}`:(0,l.d)(this.id)}getModelStoreIndexableByUUID(){return -1!==this.id.indexOf(":")?this.id:this.snowflakeRequestId?`${(0,l.d)(this.id)}##${this.snowflakeRequestId}`:this.id}castStatsToBigNumberMutates(e){return e&&e.cols&&Object.values(e.cols).map(e=>{var t,s;(null==(t=e.stats)?void 0:t.total)!=void 0&&(e.stats.total=new n.Z(e.stats.total)),(null==(s=e.stats)?void 0:s.histogram)&&(e.stats.histogram.range=e.stats.histogram.range.map(e=>new n.Z(e)),e.stats.histogram.interval=new n.Z(e.stats.histogram.interval))}),e}isExactMatch(e){let[t,s]=e.split("@"),r=(0,l.d)(this.id);return!!this.version&&r===t&&this.version===parseInt(s,10)}get hasStats(){return this.sheet&&(1==o.J.totalRows(this.sheet)||o.J.isStatsSheet(this.sheet))}get awaitingStats(){return this.populated&&!this.ready&&!this.error&&!o.J.isSheetResultTooLargeForStatsOrSearch(this._unprocessedSheet)}clone(){return new c(this.id,this.snapshot())}cloneAsUnversioned(){return new c(this.id,{...this.snapshot(),version:void 0})}cloneWithNewRequestId(e){return new c(this.id,{sheet:this._unprocessedSheet,processedSheet:this.sheet,version:void 0,snowflakeQueryId:void 0,snowflakeRequestId:e})}setAsCanceled(){this.canceled=!0,this._unprocessedSheet=null,this.sheet=null}isOlderThan(e){return!!this.modified&&!!e.modified&&this.modified<e.modified}async processSheet(e={generateTypesOnly:!1}){if(this.sheet)return;let t=(0,l.d)(this.id);if(this.error){let e=performance.timeOrigin+performance.now();(0,a.At)(t,{statsStartTime:e,statsEndTime:e},!1)}let s=this._unprocessedSheet;if(s){if(s.requiredRoles){this.sheet=s;return}if(o.J.isEmptySheet(s)||o.J.isValidSheetWithNoData(s)){void 0!==s.rows&&null!==s.rows&&(this.sheet=await p(s));return}!this.ready||o.J.isPartialSheet(s)||o.J.isStatsSheet(s)||e.generateTypesOnly?s=await p(s):((0,a.At)(t,{statsStartTime:performance.timeOrigin+performance.now()},!1),s=await m(s),(0,a.At)(t,{statsEndTime:performance.timeOrigin+performance.now()})),this.sheet=s}}async refreshSheetWithStats(){var e;if(!(!this.sheet||(null==(e=this.sheet)?void 0:e.requiredRoles)||o.J.isEmptySheet(this.sheet)||o.J.isValidSheetWithNoData(this.sheet))&&this.ready&&!o.J.isPartialSheet(this.sheet)&&!o.J.isStatsSheet(this.sheet)){let e,t=(0,l.d)(this.id);(0,a.At)(t,{statsStartTime:performance.timeOrigin+performance.now()},!1),e=o.J.isTypedSheet(this.sheet)?await m(this.sheet,{shouldUpdateWidths:!1}):await m(this.sheet),this.sheet=e,(0,a.At)(t,{statsEndTime:performance.timeOrigin+performance.now()})}}constructor(e,t={}){super(e,t),this.version=t.version,this._unprocessedSheet=t.skipStatsCasting?t.sheet:this.castStatsToBigNumberMutates(t.sheet),this.sheet=t.processedSheet,this.ready=t.ready,this.canceled=t.canceled,this.populated=t.populated,this.cappedRows=t.cappedRows,this.error=t.error,this.rewritten=t.rewritten,this.modified=t.modified?new Date(t.modified):void 0,this.processingPromise=t.processingPromise,this.snowflakeRequestId=t.snowflakeRequestId,this.snowflakeQueryId=t.snowflakeQueryId}}async function m(e,t={shouldUpdateWidths:!0}){let{shouldUpdateWidths:s}=t;return e=await (0,i.ey)(e,r.k.get(),void 0,void 0,s),(0,h.J)(e)}async function p(e){return o.J.isTypedSheet(e)||(e=await (0,d.k)(e,r.k.get())),(0,h.J)(e)}},899231:function(e,t,s){s.d(t,{T:()=>n});var r=s(888890),i=s(442290),o=s(725522);class n extends o.H{get initials(){return this.name?this.name.split(" ").map(e=>e[0]).join("").replace(/\s+/,"").toUpperCase():""}constructor(e,t){var s;super(e||"UNCREATED_USER_ID",t),this.email=t.email||"",this.name=t.name?t.name:t.username,this.firstName=t.firstName||"",this.lastName=t.lastName||"",this.canModifyParameters=t.canModifyParameters||!1,this.modifyParameterRoles=t.modifyParameterRoles||[],this.username=t.username,this.avatar=t.avatar||"",this.defaultOrgId=t.defaultOrgId||"",this.settings=t.settings||{},this.lastUsedQueryContext=new i.f(this.settings.lastUsedQueryContext),this.hasAdminRole=!!t.hasAdminRole,this.hasAccountAdminRole=!!t.hasAccountAdminRole,this.hasOrgAdminRole=!!(null==(s=t.availableRoles)?void 0:s.includes(r.rJ)),this.availableRoles=t.availableRoles||[],this.exchangeRoles=t.exchangeRoles||[],this.grantedRoles=t.grantedRoles||[]}}},46663:function(e,t,s){s.d(t,{h:()=>u});var r=s(380877),i=s(467131),o=s(325978);class n extends o.b{constructor(e,t){super(e,t),i.cM.error("FolderModel with type "+t.type+" created")}}var a=s(996283);class l extends o.b{constructor(e,t){super(e,{...t,type:a.pD})}}function u(e,t){switch(t.type){case a.i0:return new r.Z(e,t);case a.pD:return new l(e,t);default:return new n(e,t)}}},682659:function(e,t,s){s.d(t,{k:()=>a});var r=s(909896),i=s(655460),o=s(115499),n=s(716155);async function a(e,t,s){let a=new n.k(e,s,{detectors:[new i.f,new r.n],includeBlankRows:!0}),l=await a.rowStream({shouldNormalizeRows:!1}),u=new n.v(null,t,{generateStats:!1,keepStats:!0}),d=await u.writeStream(l,-1,!0);return d.totalRows=e.totalRows,d.sortable=e.sortable,d.sortableBytesLimit=e.sortableBytesLimit,d=(0,o.ku)(d)}},505300:function(e,t,s){s.d(t,{J:()=>a});var r=s(859399),i=s(115499),o=s(294756),n=s(146838);function a(e){return e&&e.maxRow&&e.maxRow>0&&(e=r.g.generateSheetTypes(e),(e=(0,i.ku)(e)).styles&&n.r.processStyles(e.styles),e.colNames=o.e.ColNames.fromSheet(e),e.properties&&(e.properties.xSplit=1)),e}},982842:function(e,t,s){s.d(t,{E:()=>P});var r,i=s(467131),o=s(130780),n=s.n(o),a=s(882042),l=s(335002),u=s(844989),d=s(725522);class h extends d.H{isOlderThan(e){return!!e.modified&&this.modified<e.modified}constructor(e,t={}){super(e,t),void 0==t.modified&&i.cM.error("DBSchemaModel data has undefined modified date"),this.modified=new Date(t.modified),void 0==t.lastUpdated&&i.cM.error("DBSchemaModel data has undefined lastUpdated date"),this.lastUpdated=new Date(t.lastUpdated),this.loading=t.loading,this.tables=null==t?void 0:t.tables,this.namespacesDetails=t.namespacesDetails,this.defaultNamespace=t.defaultNamespace}}var c=s(34157);class m extends d.H{constructor(e,t){super(e,t),this.pids=t.pids||[]}}var p=s(549001);class f extends d.H{constructor(e,t={}){super(e,t),this.schemaCards=t.schemaCards||{}}}var g=s(467629),w=s(899231),y=s(30673),v=s(629365),b=s(996283);class S extends v.s{label(e){return e({id:"Dashboards"})}constructor(e,t){super(y.gT.DASHBOARDS_FOLDER_ID,{name:"Dashboards",orgId:e.id,ownerId:t,type:b.pD,url:`${e.appPath}/dashboards`,virtual:!0,editable:!0})}}class x extends v.s{label(e){return e({id:"Worksheets"})}constructor(e,t){super(y.gT.QUERIES_FOLDER_ID,{name:"Worksheets",orgId:e.id,ownerId:t,type:b.pD,url:`${e.appPath}/worksheets`,virtual:!0,editable:!0})}}class C extends d.H{constructor(e,t){super(e,t),this.name=t.name,this.state=t.state,this.type=t.type,this.size=t.size,this.minClusterCount=parseInt(t.min_cluster_count),this.maxClusterCount=parseInt(t.max_cluster_count),this.startedClusters=parseInt(t.started_clusters),this.running=parseInt(t.running),this.queued=parseInt(t.queued),this.isDefault="Y"===t.is_default,this.isCurrent="Y"===t.is_current,this.autoSuspend=parseInt(t.auto_suspend),this.autoResume="false"!=t.auto_resume.toLowerCase(),this.available=parseInt(t.available)||0,this.provisioning=parseInt(t.provisioning)||0,this.quiescing=parseInt(t.quiescing)||0,this.other=parseInt(t.other)||0,this.createdOn=Date.parse(t.created_on),this.resumedOn=Date.parse(t.resumed_on),this.updatedOn=Date.parse(t.updated_on),this.owner=t.owner,this.comment=t.comment,this.scalingPolicy=t.scaling_policy}}class R extends d.H{isOlderThan(e){return this.modified<e.modified}constructor(e,t){super(e,t),this.folderId=t.id,this.modified=new Date(t.modified).getTime(),this.userId=t.userId,this.orgId=t.orgId,this.totalWorksheets=t.totalWorksheets,this.loading=t.loading,this.numOfSuccessfulWs=t.numOfSuccessfulWs,this.failedWorksheets=t.failedWorksheets||[]}}var T=s(46663),I=s(750129),E=s(658379);let k=(0,E.createAction)("shadowObjectSet");(0,E.createAction)("shadowObjectPropSet"),(0,E.createAction)("shadowObjectMapSet");let _=(e,t,s)=>new Proxy(e,{set(e,r,i,o){if("string"==typeof r&&"toReduxState"in i&&"function"==typeof i.toReduxState){let e=structuredClone(i.toReduxState());s.dispatch(k({name:t,id:r,value:e}))}return Reflect.set(e,r,i,o)},deleteProperty:(e,t)=>(delete e[t],!0)});class q{list(){return Object.values(this._models)}get(e){return!e||e&&"string"!=typeof e?this._models[e]:this.getByVersion(e)}getByVersion(e){return -1===e.indexOf("@")?this._models[e]:this.list().find(t=>t.isExactMatch(e))||this._models[e]}insert(...e){e.forEach(e=>{this.insertById(e)})}insertById(e){let t=this._models[e.id],s=null==t?void 0:t.getModelStoreIndexableId(),r=e.getModelStoreIndexableId();s&&r&&s!==r&&(this._models[s]=t),this._models[e.id]=e}receive(e,t){if(!t)return!1;let s=this.get(e);if(s&&!s.shouldModelUpdate(t)||s&&t.isOlderThan(s))return!1;let r=this._updatersById[e];if(null!=r)for(let e of r)e(t);return this.insert(t),t}remove(e){let t=this.get(e);t&&delete this._models[t.id]}addUpdater(e,t){let s=this._models[e];s&&t(s);let r=this._updatersById[e];r||(r=[],this._updatersById[e]=r),r.push(t)}removeUpdater(e,t){let s=this._updatersById[e];s.splice(s.indexOf(t),1)}constructor(e,t){this.identifier=e,this._models=t?_({},e,t):{},this._updatersById={},I.log.info(`Instantiating ${this.identifier}`)}}class P{createVirtualFolders(e,t){this._virtualDashboardsRootFolder=new S(e,t),this._virtualWorksheetsRootFolder=new x(e,t)}virtualDashboardsRootFolder(){return this._virtualDashboardsRootFolder}virtualWorksheetsRootFolder(){return this._virtualWorksheetsRootFolder}create(e,t,s){let r=s;if("string"==typeof s)try{r=JSON.parse(s)}catch(e){i.cM.error(e)}switch(e){case this.charts2:return new u.B(t,r);case this.dbSchemas:return new h(t,r);case this.worksheetImports:return new R(t,r);case this.drafts:return new c.z(t,r);case this.folders:return(0,T.h)(t,r);case this.queries:return new p.e(t,r);case this.queryHistories:return new m(t,r);case this.queryPrefs:return new f(t,r);case this.queryResults:return new g.L(t,r);case this.users:return new w.T(t,r);case this.warehouses:return new C(t,r);default:return}}receive(e){if(e){let t={};if(this.reduxStore){let t=n()(e,["queries","queryResults","drafts"]);t&&this.reduxStore.dispatch((0,l.B)(structuredClone(t)))}Object.keys(e).forEach(s=>{t[s]=0,Object.keys(e[s]).forEach(r=>{let o=this[s],n=this.create(o,r,e[s][r]);n?(o.receive(r,n),++t[s]):i.cM.warn("ModelStore",`Unable to instantiate new model for ${s}/${r}`,e)})})}}constructor(e){this.reduxStore=e,this.charts2=new q("ChartModel",e),this.dbSchemas=new q("DBSchemaModel",e),this.worksheetImports=new q("WorksheetImportsModel",e),this.drafts=new q("DraftModel",e),this.folders=new q("GenericListOrDashboardFolderModel",e),this.queries=new q("QueryModel",e),this.queryHistories=new q("QueryHistoryModel",e),this.queryPrefs=new q("QueryPrefsModel",e),this.queryResults=new q("QueryResultsModel",e),this.users=new q("UserModel",e),this.warehouses=new q("WarehouseModel",e)}}P=function(e,t,s,r){var i,o=arguments.length,n=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(n=(o<3?i(n):o>3?i(t,s,n):i(t,s))||n);return o>3&&n&&Object.defineProperty(t,s,n),n}([(0,a.ri)(),(r=(0,a.f3)("False"),function(e,t){r(e,t,0)})],P)},555889:function(e,t,s){s.d(t,{B:()=>r});let r=/^\/(.*?)(?:\/(.*?))?(?:\/(.*?))?(?:\/(.*?))?$/u},683611:function(e,t,s){s.d(t,{j:()=>r});let r=/^([0-9a-z]*[\w-]*-)?(w[0-9a-zA-Z]+(?::[^@]+)?(?:@[0-9]+)?)$/u},564395:function(e,t,s){s.d(t,{af:()=>c,lm:()=>h});var r=s(961114),i=s(555889),o=s(683611);let n=e=>{let[t,s,r,n,a]=e.match(i.B);return n&&o.j.test(n)},a=(e,t)=>""===t||n(e),l=e=>""===e||-1===e.indexOf("?"),u=(e,t)=>!e.endsWith("/")&&t.startsWith("#/")?`${e}/`:e,d=e=>new Proxy({...e},{get(e,t){let{pathname:s,hash:r,search:i}=e;if("__original__"===t)return e;if("pathname"===t){if(a(s,r))return s;let e=r.indexOf("?"),t=-1===e?r.length:e,i=u(s,r);return`${i}${decodeURI(r.slice(2,t))}`}if("hash"===t)return r;if("search"===t){if(l(r))return i;let e=r.indexOf("?");return r.slice(e)}return Reflect.get(e,t)}}),h=new Proxy(r.l,{get:(e,t)=>"location"===t?d(e.location):"listen"===t?t=>e.listen(e=>t({...e,location:d(e.location)})):Reflect.get(e,t)});function c(e){var t;return null!=(t=e.__original__)?t:e}},445060:function(e,t,s){s.d(t,{w:()=>a});var r=s(767557),i=s(164214),o=s(882042);function n(e,t){return function(s,r){t(s,r,e)}}class a{async post(e,t,s,i){var o,n;let a,l={};(null==s?void 0:s.isJsonBody)?(l["Content-Type"]="application/json",a=JSON.stringify(t)):t instanceof FormData?a=t:t&&(a=r.nZ(t)),(null==s?void 0:s.keepAlive)===!1&&(l["x-snowflake-keep-alive"]=!1);let u=this.getRequestContext();return await this.net.nufetchForm(e,{...u,role:null!=(o=null==s?void 0:s.role)?o:u.role,secondaryRoles:null!=(n=null==s?void 0:s.secondaryRoles)?n:u.secondaryRoles},{...i,method:"POST",body:a,headers:{...(null==s?void 0:s.overrideDefaultHeaders)?{...this.defaultHeaders(),...null==i?void 0:i.headers}:{...null==i?void 0:i.headers,...this.defaultHeaders()},...l}},null==s?void 0:s.versionPrefix)}defaultHeaders(){return{"X-Snowflake-Request-Id":this.getRequestContext().requestId||i.Z()}}async get(e,t,s,i){var o,n;let a=e,l={};if((null==s?void 0:s.keepAlive)===!1&&(l["x-snowflake-keep-alive"]=!1),t){let e=r.nZ(t);e.length>0&&(a+=`?${e}`)}let u=this.getRequestContext();return await this.net.nufetch(a,{...u,role:null!=(o=null==s?void 0:s.role)?o:u.role,secondaryRoles:null!=(n=null==s?void 0:s.secondaryRoles)?n:u.secondaryRoles},{...i,headers:{...null==i?void 0:i.headers,...this.defaultHeaders(),...l}},null==s?void 0:s.versionPrefix)}delete(e,t){return this.net.nufetchForm(e,this.getRequestContext(),{...t,method:"DELETE"})}constructor(e,t){this.net=e,this.getRequestContext=t}}a=function(e,t,s,r){var i,o=arguments.length,n=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(n=(o<3?i(n):o>3?i(t,s,n):i(t,s))||n);return o>3&&n&&Object.defineProperty(t,s,n),n}([(0,o.ri)(),n(0,(0,o.f3)("Net")),n(1,(0,o.f3)("getRequestContext"))],a)},941345:function(e,t,s){s.d(t,{s:()=>r});class r{get getDatadogRum(){throw Error("not implemented")}get roleResolver(){throw Error("not implemented")}get featureFlags(){throw Error("not implemented")}get v1toV0QueriesAdapter(){throw Error("not implemented")}get getUUIDv4(){throw Error("not implemented")}get logger(){throw Error("not implemented")}}},397288:function(e,t,s){s.d(t,{BT:()=>o,MT:()=>i,RL:()=>n,Yy:()=>a,fr:()=>r});let r="UI_ENABLE_UI_PLATFORM_FEATURE_40",i="UI_ENABLE_UI_PLATFORM_FEATURE_41",o="UI_ENABLE_UI_PLATFORM_FEATURE_44",n="UI_ENABLE_UI_PLATFORM_FEATURE_13",a="FEATURE_UI_DEX_41"},718434:function(e,t,s){s.d(t,{A:()=>w});var r=s(16805),i=s.n(r),o=s(374318),n=s(993914),a=s(480336),l=s(36760),u=s(889398);let d=e=>"metadata"in e&&"object"==typeof e.metadata&&null!==e.metadata&&"cellTransformations"in e.metadata&&"audit"in e.metadata,h=e=>{let t=null,s=null,r=null,i=null,a=null;if(e&&(a=(0,n.e)(e)),e instanceof o.M){var l,u,d;i=e.statusCode,t=null!=(l=e.code)?l:null,s=null!=(u=e.message)?u:null,r=null!=(d=e.externalErrorCause.type)?d:null}else if(e instanceof Error)s=e.message,r="unknown";else if(e&&"object"==typeof e)try{s=JSON.stringify(e),r="unknown"}catch(e){}else"string"==typeof e&&(s=e,r="unknown");return{errorType:r,errorCode:t,errorMessage:s,errorStatusCode:i,looksLikeNetworkError:a}},c=e=>0===e.rows.length?[]:1===e.rows.length?[0]:[0,Math.floor(e.rows.length/2),e.rows.length-1],m=(e,t)=>e&&t?e.rows.length===t.rows.length:null,p=(e,t,s,r)=>{if(!s||!r)return null;if(s.rows.length!==r.rows.length)return{isMatch:!1,mismatchedColumns:null};if(!d(s))return null;let i=c(s),o=s.metadata.cellTransformations,n=new Set,{matchSoFar:a,compared:l}=i.reduce((i,a)=>{if(!i.matchSoFar)return{matchSoFar:i.matchSoFar,compared:i.compared};let l=s.rows[a],u=r.rows[a];if(!l||!u)throw Error("unable to obtain rows for comparison");let d=!0,h=!1;for(let s=0;s<o.length;s++)!o[s]&&(d=l[s]===u[s],h=!0,d||(n.add(s),t.info("instrumentSqlPassthrough",`failed cell match for ${e}`,{"row index":a,"cell index":s,"cell transforms for the row":o,"result row compared":l,"initial/basis result row compared":u,"result cell value in question":l[s],"initial/basis cell value in question":u[s]})));return{matchSoFar:d,compared:h}},{matchSoFar:!0,compared:!1});return l?{isMatch:a,mismatchedColumns:n}:null},f=(e,t)=>{if(!e||!t)return null;if(e.cols.length!==t.cols.length)return!1;for(let s=0;s<e.cols.length;s++)if(e.cols[s].name!==t.cols[s].name||e.cols[s].type!==t.cols[s].type)return!1;return!0},g=e=>{if(e&&d(e)){let{audit:t}=e.metadata;return{numberOfChunks:t.numberOfChunks,totalResults:t.totalResults,pollTicks:t.polling.numOfTicks,pollDuration:t.polling.durationMS,fetchedAdditionalRows:t.additionalFetch.fetchedAdditional,fetchedAdditionalDuration:t.additionalFetch.durationMS,resultLackedFirstChunk:t.additionalFetch.neededFirstChunk,streamRowStart:t.additionalFetch.rowStart,streamRowEnd:t.additionalFetch.rowEnd}}return{}},w=e=>{var t,s,r,o,n,d,c,w,y,v,b,S,x,C,R,T,I,E,k,_,q,P,O,D,N,M,L,A;let{logger:F}=e,U=i()(u.H),j=U(e.sqlQuery)?e.sqlQuery.desc:null!=(s=null==(t=e.sqlQuery.options)?void 0:t.desc)?s:"unknown",{errorType:V,errorCode:B,errorMessage:W,errorStatusCode:$,looksLikeNetworkError:Q}=h(e.error),H=f(e.result,e.shadowedResult),z=m(e.result,e.shadowedResult),X=p(j,F,e.result,e.shadowedResult);(!1===H||!0===H)&&F.info("instrumentSqlPassthrough",`columns comparison for ${j}`,{"columns isomorphic?":H}),null!=X&&F.info("instrumentSqlPassthrough",`rows comparison for ${j}`,{"rows isomorphic?":X});let J=e.shadowedResult?null:(0,l.G)(e.sqlQuery),G=h(e.shadowedError);try{let t={initiator:e.initiator,version:e.version,desc:j,queryHash:U(e.sqlQuery)?(0,a.W)(e.sqlQuery.sqlQuery.sqlText):(0,a.W)(e.sqlQuery.query.sqlText),readonlyQuery:J,shadowModeId:e.shadowModeId,isGuestFetch:e.isGuestFetch,duration:e.end-e.start,noOfColumns:null!=(I=null==(o=e.result)||null==(r=o.cols)?void 0:r.length)?I:null,noOfRows:null!=(E=null==(d=e.result)||null==(n=d.rows)?void 0:n.length)?E:null,totalRows:null!=(k=null==(c=e.result)?void 0:c.totalRows)?k:null,requestId:U(e.sqlQuery)?null!=(_=e.sqlQuery.requestId)?_:null:null!=(q=null==(w=e.sqlQuery.options)?void 0:w.requestId)?q:null,keepAlive:U(e.sqlQuery)?null:null!=(P=null==(y=e.sqlQuery.options)?void 0:y.keepAlive)?P:null,cacheToRefresh:U(e.sqlQuery)?null:null!=(O=null==(v=e.sqlQuery.options)?void 0:v.cacheToRefresh)?O:null,expectsTableResults:U(e.sqlQuery)?null:null!=(D=null==(b=e.sqlQuery.options)?void 0:b.expectsTableResults)?D:null,pid:U(e.sqlQuery)?null!=(N=e.sqlQuery.pid)?N:null:null!=(M=null==(S=e.sqlQuery.options)?void 0:S.pid)?M:null,suppliedSecondaryRoles:U(e.sqlQuery)?void 0!==e.sqlQuery.secondaryRoles:(null==(x=e.sqlQuery.options)?void 0:x.secondaryRoles)!==void 0,errorType:V,errorCode:B,errorMessage:W,errorStatusCode:$,looksLikeNetworkError:Q,columnsComparison:H,noOfShadowedRows:null!=(L=null==(R=e.shadowedResult)||null==(C=R.rows)?void 0:C.length)?L:null,shadowedError:G.errorMessage,numberOfRowsComparison:z,rowsComparison:null!=(A=null==X?void 0:X.isMatch)?A:null,mismatchedColumns:(null==X||null==(T=X.mismatchedColumns)?void 0:T.size)&&(null==X?void 0:X.mismatchedColumns.size)>0?Array.from(X.mismatchedColumns).join(", "):null,...g(e.result)};e.shadowedResult&&F.info("instrumentSqlPassthrough","data",t),e.datadog.addAction("sqlPassthrough",t)}catch(e){F.error(e)}}},841702:function(e,t,s){s.d(t,{u:()=>o});var r=s(889398);let i=["usage-consumption"],o=e=>(0,r.H)(e)?void 0===e.pid&&!i.includes(e.desc):void 0===e.pid&&void 0===e.cacheToRefresh&&(!e.desc||!i.includes(e.desc))},36760:function(e,t,s){s.d(t,{G:()=>o});var r=s(889398);let i=["notebook-reload-files","streamlit-reload-files"],o=e=>{var t,s;let o=(0,r.H)(e)?e.sqlQuery.sqlText.toLowerCase().trim():e.query.sqlText.toLowerCase().trim(),n=null!=(s=(0,r.H)(e)?e.desc:null==(t=e.options)?void 0:t.desc)?s:"";return(o.startsWith("select ")||o.startsWith("describe ")||o.startsWith("show "))&&!i.includes(n.toLowerCase())}},375288:function(e,t,s){s.d(t,{P:()=>u,k:()=>l});var r=s(250370),i=s.n(r),o=s(397288),n=s(36760),a=s(889398);let l=["show-warehouses","tag-entity-detail","show-table-in-schema","database_role-show-grants-of-obj","show-warehouse","show-terse-databases","show-terse-roles","schema-show-grants-on-obj","task-graph-status-current","task-graph-tasks-run-status","system-show-notebooks-in-account","notebook-describe","show-notebook-in-schema","user-show-grants-to-obj","user-describe","show-terse-schemas-in-database","show-tables","show-views","system-show-streamlits-in-account","show-objects-in-schema","show-streamlit-in-schema","view-describe","show-database","check-is-database-role-in-session","account-show-grants-on-obj","is-eligible-for-monetization","table-entity-detail","view-show-grants-on-obj","available-roles","show-databases","table-show-grants-on-obj","view-entity-detail","schema-entity-detail","table-get_ddl"].sort(),u=(e,t)=>{var s;if(e.isEnabled(o.BT))return(0,n.G)(t);let r=(0,a.H)(t)?t.desc:null==(s=t.options)?void 0:s.desc;return r&&-1!==i()(l,r)}},889398:function(e,t,s){s.d(t,{H:()=>i});let r=e=>null!=e&&"object"==typeof e&&"sqlText"in e&&"bindingsJSON"in e,i=e=>null!=e&&"object"==typeof e&&"sqlQuery"in e&&r(e.sqlQuery)&&"role"in e&&"isInternal"in e&&"desc"in e},384789:function(e,t,s){s.d(t,{P:()=>r});let r=()=>{let e=i();return null==e?void 0:e._ga},i=()=>document.cookie.split("; ").reduce((e,t)=>{let[s,...r]=t.split("=");return e[s]=r.join("="),e},{})},854162:function(e,t,s){s.d(t,{U:()=>a,p:()=>n});var r=s(467131),i=s(383151);e=s.hmd(e);let o="Snowflake";class n{bind(t,s={},r=!1){Object.assign(this,s);let i=e=>Object.assign(this,t(e));if(!this.hasOwnProperty("__setter")||void 0===this.__setter||r)Object.defineProperty(this,"__setter",{value:i,configurable:!0});else{if(e.hot)return Object.defineProperty(this,"__setter",{value:i,configurable:!0}),i;throw Error("Cannot rebind the __setter of PageStateCls")}return i}set(e){this.__setter(e)}setModal(e,t){var s;let r=null==t.dismissable||!!t.dismissable,i=!!t.allowShortcuts,o=!!t.downToEarth;t={dismissable:r,allowShortcuts:i,downToEarth:o,...t},(null==(s=this.popover)?void 0:s.dismiss)&&this.popover.dismiss(),this.set({modal:{elClass:e,props:t,dismissable:r,allowShortcuts:i,downToEarth:o},popover:null})}toggleModal(e,t){null==this.modal||this.modal.elClass!==e?this.setModal(e,t):this.hideModal()}updateModalFeatures({dismissable:e,allowShortcuts:t,downToEarth:s},r){this.modal&&(this.modal.oldFeatures={dismissable:this.modal.dismissable,allowShortcuts:this.modal.allowShortcuts,downToEarth:this.modal.downToEarth},this.modal.dismissable=e,this.modal.allowShortcuts=t,this.modal.downToEarth=s,r())}resetModalFeatures(e){var t;(null==(t=this.modal)?void 0:t.oldFeatures)&&(this.modal.dismissable=this.modal.oldFeatures.dismissable,this.modal.allowShortcuts=this.modal.oldFeatures.allowShortcuts,e())}hideModal(){var e;this.modal&&((null==(e=this.popover)?void 0:e.inModal)&&this.hidePopover(),this.set({modal:null}))}setPopover(e){this.set({popover:e})}hidePopover(){var e;(null==(e=this.popover)?void 0:e.dismiss)&&this.popover.dismiss(),this.set({popover:null})}concealPopover(){var e;(null==(e=this.popover)?void 0:e.conceal)&&this.popover.conceal()}movePopover(e,t){if(this.popover&&this.popover.type===e&&t){let e=this.popover.move(t);this.set({popover:e})}}hideTooltip(){(this.tooltip||this.tooltipTimeout)&&(clearInterval(this.tooltipTimeout),this.set({tooltip:null,tooltipTimeout:null}))}showDragLayer(e){this.set({dragLayer:e})}hideDragLayer(){this.dragLayer&&this.set({dragLayer:null})}logError(e){r.cM.error(e),this.setError(e)}setError(e){this.set({error:e})}track(e,t,s,r,o){var n;(null===i.X||void 0===i.X||null==(n=i.X.stores)?void 0:n.analytics)&&"function"==typeof i.X.stores.analytics.track&&i.X.stores.analytics.track(e,t,s,r,o)}changeDefaultTitle(e){o=e}setDefaultTitle(){this.setTitle(o)}setTitle(e){e!==document.title&&(document.title=e)}flashMessage(e){this.setError({message:e})}constructor(){for(let e in this)void 0!==this[e]&&Object.defineProperty(this,e,{value:this[e],writable:!1,enumerable:!1})}}let a=new n},198364:function(e,t,s){s.d(t,{P:()=>v});var r=s(767557),i=s(162849),o=s(238257),n=s(383151),a=s(882042),l=s(982842),u=s(718434),d=s(841702),h=s(375288),c=s(713332),m=s.n(c),p=s(616821),f=s(397288),g=s(674337);function w(e,t){return function(s,r){t(s,r,e)}}let y=(e,t)=>{if(e)try{return e(t)}catch(e){}return t};class v{context(){return this.securableAPIContext}async get(e,t,s,r,i){let o=s?this.httpFactory(()=>s):this.backendHttp,{models:n,...a}=await o.get(e,t,r,i);return await this.modelReceiver.receive(n),a}async delete(e){let{models:t,...s}=await this.backendHttp.delete(e);return await this.modelReceiver.receive(t),s}async post({path:e,data:t,localUpdates:s=[],requestContext:r,options:i,requestOptions:o,track:n,mergeModels:a}){let l,u,d="/queries"===e&&t&&"execute"===t.action&&n;for(let e of s)this.modelReceiver.addUpdater(e.model,e.id,e.updater);let h=r?this.httpFactory(()=>r):this.backendHttp;try{let s=performance.now();if(d)try{n(g.Y8U,{request_id:t.snowflakeRequestId,data:{snowsightPid:t.projectId,queryLanguage:t.queryLanguage,clientOperationId:t.clientOperationId}},void 0,!0)}catch(e){}({models:u,...l}=await h.post(e,t,i,o));let r=performance.now()-s;if(d)try{n(g.EKB,{request_id:t.snowflakeRequestId,data:{snowsightPid:t.projectId,queryLanguage:t.queryLanguage,clientOperationId:t.clientOperationId,durationMs:r}},void 0,!0)}catch(e){}}finally{for(let e of s)this.modelReceiver.removeUpdater(e.model,e.id,e.updater)}let c=performance.now();if(d)try{n(g.EKd,{request_id:t.snowflakeRequestId,data:{snowsightPid:t.projectId,queryLanguage:t.queryLanguage,clientOperationId:t.clientOperationId}},void 0,!0)}catch(e){}await this.modelReceiver.receive(y(a,u));let m=performance.now()-c;if(d)try{n(g.R2O,{request_id:t.snowflakeRequestId,data:{snowsightPid:t.projectId,queryLanguage:t.queryLanguage,clientOperationId:t.clientOperationId,durationMs:m}},void 0,!0)}catch(e){}return l}async v1query(e,t,s=null,r){var i;let o,n,a,l=null!=(i=t.requestId)?i:this.securableAPIContext.getUUIDv4(),d={...t,requestId:l},h=performance.now();try{o=await this.securableAPIContext.v1toV0QueriesAdapter.query({...e,runToCompletion:!this.securableAPIContext.featureFlags.isEnabled(f.Yy)},d)}catch(e){n=e}finally{a=performance.now()}let c={version:1,initiator:"modelStoreAPI",isGuestFetch:!1,result:o,error:n,start:h,end:a,sqlQuery:{query:e,options:d},shadowModeId:s,datadog:this.securableAPIContext.getDatadogRum(),logger:this.securableAPIContext.logger};if(r&&(r.data&&(c.shadowedResult=r.data),r.error&&(c.shadowedError=r.error)),(0,u.A)(c),n)throw n;return o}async query(e,t){var s,r,a,l,c,g;let w,y,v,{desc:b,context:S,keepAlive:x,requestId:C,...R}=t,T=(!!(null==(r=n.X.stores)||null==(s=r.user)?void 0:s.isGuestUser)||!!(null==(a=t.requestContext)?void 0:a.isGuest))&&!(0,o.r)(window.location.hostname),I=null!=(l=t.requestContext)?l:this.urc.requestContext(),E=b?`?desc=${encodeURIComponent(b)}`:"",k=((0,p.WC)()||(0,p.mb)())&&!this.securableAPIContext.featureFlags.isEnabled(f.RL)||this.securableAPIContext.featureFlags.isEnabled(f.fr),_=(0,d.u)(t);if(k&&_&&!T)return this.v1query(e,t);let q=b&&S?`#${new URLSearchParams(S).toString()}`:"",P=performance.now();try{T?{result:w}=await this.get(`${i.A}`,{...e},{...I,requestId:C},{keepAlive:!!x}):{result:w}=await this.post({path:`${i.A}${E}${q}`,data:{...e,...R,...T?{}:{requestId:C}},localUpdates:void 0,requestContext:{...I,requestId:C},options:{keepAlive:x}})}catch(e){v=e}finally{y=performance.now()}let O=!T&&_&&this.securableAPIContext.featureFlags.isEnabled(f.MT)&&(0,h.P)(this.securableAPIContext.featureFlags,{query:e,options:t}),D=O?this.securableAPIContext.getUUIDv4():null;if((0,u.A)({version:0,initiator:"modelStoreAPI",isGuestFetch:T,result:w,error:v,start:P,end:y,sqlQuery:{query:e,options:t},shadowModeId:D,datadog:this.securableAPIContext.getDatadogRum(),logger:this.securableAPIContext.logger}),O){let s={...w,cols:[...null!=(c=null==w?void 0:w.cols)?c:[]],rows:[...null!=(g=null==w?void 0:w.rows)?g:[]]};m()(()=>{this.v1query(e,{...t,requestId:this.securableAPIContext.getUUIDv4()},D,{data:s,error:v})})}if(v)throw v;return w}async filesQuery(e,t){var s;let{desc:r,keepAlive:o,...n}=t,a=null!=(s=t.requestContext)?s:this.urc.requestContext(),l=r?`?desc=${encodeURIComponent(r)}`:"";return await this.post({path:i.x+l,data:{...e,...n},localUpdates:void 0,requestContext:{...a,requestId:t.requestId},options:{keepAlive:o}})}async restPassthrough(e,t,s,i,a,l="/session"){var u,d,h,c;let m,{desc:p,role:f,isJsonBody:g,keepAlive:w,requestId:y,...v}=s,b=null!=(c=s.requestContext)?c:null==(u=this.urc)?void 0:u.requestContext();b||console.warn("requestContext was empty");let S=!!(null==(h=n.X.stores)||null==(d=h.user)?void 0:d.isGuestUser)||!!(null==b?void 0:b.isGuest)&&!(0,o.r)(window.location.hostname);switch(e){case"POST":{let e=r.nZ({desc:p,...a});m=await this.post({path:`${l}${t}${e}`,data:{...i,...v,...S?{}:{requestId:y}},localUpdates:void 0,requestContext:{...b,requestId:y,role:f},options:{isJsonBody:g,keepAlive:w}});break}case"GET":m=await this.get(`${l}${t}`,{requestId:s.requestId,desc:p,...a},{...b,requestId:y,role:f},{keepAlive:!!w});break;default:throw Error(`Unsupported rest passthrough type ${e}`)}return m}requestContext(e){return this.urc.requestContext(e)}constructor(e,t,s,r,i){this.urc=e,this.models=t,this.httpFactory=s,this.modelReceiver=r,this.securableAPIContext=i,this.backendHttp=s(()=>e.requestContext())}}v=function(e,t,s,r){var i,o=arguments.length,n=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(n=(o<3?i(n):o>3?i(t,s,n):i(t,s))||n);return o>3&&n&&Object.defineProperty(t,s,n),n}([(0,a.ri)(),w(0,(0,a.f3)("UserRequestContext")),w(1,(0,a.f3)(l.E)),w(2,(0,a.f3)("BackendHttpFactory")),w(3,(0,a.f3)("ModelReceiver")),w(4,(0,a.f3)("InternalSecurableAPIContext"))],v)},835330:function(e,t,s){s.d(t,{n:()=>a,y:()=>l});var r=s(467131),i=s(407254),o=s.n(i),n=s(854162);class a{destruct(){this.log("DESTROYED")}async bindStores(e,t={}){this._stores=e,this.storesDidBind&&await this.storesDidBind(e,t)}__subscribe(e,t){this._events.addListener("change",e),this._events.addListener("afterChange",t),this._events.addListener("error",this.onError)}__unsubscribe(e,t){this._events.removeListener("change",e),this._events.removeListener("afterChange",t),this._events.removeListener("error",this.onError)}error(e){this._events.emit("error",e)}notify(e,t){this.log(e),this.track(`STORE_${e}`),this._events.emit("change",e,t),this._events.emit("afterChange",e,t)}track(e,t,s,r){this._stores&&this._stores.analytics.track(e,t,s,r)}log(e,t){let s=`stores.${this.constructor.STORE_ID}`,i=20-s.length;i>0&&(s+=" ".repeat(i)),r.cM.info(s,e,t)}constructor(e,t,s){this.reduxStore=t,this.isLasikEnabled=s,this.onError=(e,t)=>{r.cM.error(e,{message:t}),n.U.setError(t?Error(t):e)},this._events=new(o()),this._events.setMaxListeners(1024)}}class l extends a{constructor(e,t,s,r){super(t,s,r),this.api=e}}},621335:function(e,t,s){s.d(t,{I:()=>r});let r=()=>!0},362779:function(e,t,s){s.d(t,{A:()=>v});var r,i=s(307134),o=s(609737),n=s(33055),a=s.n(n),l=s(841334),u=s.n(l),d=s(164214),h=s(383151),c=s(882042),m=s(642261),p=s(441326),f=s(564395),g=s(384789),w=s(198364),y=s(835330);class v extends y.y{static isDisallowedDatadogEvent(e){return void 0!==e.type&&v.disallowedDatadogEventTypes.includes(e.type)}storesDidBind(e,t){let{pageType:s}=t;s&&this.track("PAGE_LOADED",{pageType:s})}updateActivePid(e){this.activePid=e}updateActiveFolder(e){var t,s;this.activeFolderId=null!=(t=null==e?void 0:e.id)?t:null,this.activeFolderType=null!=(s=null==e?void 0:e.type)?s:""}setStreamlitQueue(e){this.streamlitQueue=e}getStreamlitQueue(){return this.streamlitQueue}get props(){let e={ua:window.navigator.userAgent,cv:h.X.clientVersion,url:{path:f.lm.location.pathname,query:f.lm.location.search,hash:f.lm.location.hash},rf:document.referrer,ws:{w:window&&window.innerWidth||0,h:window&&window.innerHeight||0}};return this.activePid&&(e.pid=this.activePid),this.activeFolderId&&(e.folderId=this.activeFolderId,e.folderType=this.activeFolderType),e}track(e,t={},s=!0,r=!1){this.newTrack({event:e,...t},s,r)}newTrack(e,t=!0,s=!1){let r=String(Date.now());e.timestamp=r,e.idempotencyToken=d.Z(),e.metadata={},e.metadata.__debugClientTimestamp=r;let i=this._stores.user.api.urc.getWindowId();i&&(e.windowId=i);try{o.flags._DP_UIP_VISIT_ID()&&(e.visitId=(0,p.c)())}catch(t){e.visitId=(0,p.c)()}let n=this._stores.user.isGuestUser&&(0,g.P)();n&&(e.guestUserCookie=n);let a={eventLog:e,checkFullDiff:s,...!s&&{consolidateRepeats:t}};this.emitEventToDatadog(e),this.queue.push(a),this.throttledCommit()}emitEventToDatadog(e){if(!v.isDisallowedDatadogEvent(e)){"ui_track_view"===e.type&&i.v.startView(e.event);try{let t;void 0!==e.data&&u()(e.data)?t=e.data:void 0!==e.data&&(t={value:e.data}),i.v.addAction(e.event,t)}catch(t){console.error("Unable to emit event: ",e.data)}}}async commit(e){if(h.T.notProvisioned){this.queue.length=0;return}e||(e=this.queue.splice(0,this.queue.length));let t=[],s={},r={};for(let i=0;i<e.length;i++){let{eventLog:o,consolidateRepeats:n,checkFullDiff:l}=e[i],{event:u}=o;if(n)if(null==s[u])s[u]=0,t.push(o);else{s[u]++;continue}else if(l){if(!r[u]){r[u]=[{uniqueEvent:o,numRepeats:0}],t.push(o);continue}let e=!1;for(let t=0;t<r[u].length;t++){let s=r[u][t].uniqueEvent;if(a()(s,o)){r[u][t].numRepeats++,e=!0;break}}e||(r[u].push({uniqueEvent:o,numRepeats:0}),t.push(o))}else t.push(o)}for(let e=0;e<t.length;e++){let i=s[t[e].event];if("number"==typeof i){t[e].repeats=i;continue}let o=r[t[e].event];if(r&&o)for(let s of o)a()(s.uniqueEvent,t[e])&&s.numRepeats>0?t[e].repeats=s.numRepeats:t[e].repeats=0}if(t.length){this.log(`COMMIT (${t.length} events)`);try{await this.api.post({path:"/a/events",data:{events:t,props:this.props,now:new Date().toISOString()}})}catch(e){}}}setClientOperationId(e,t){this.clientOperationIds.set(e,null!=t?t:d.Z())}getClientOperationId(e){return this.clientOperationIds.get(e)}deleteClientOperationId(e){this.clientOperationIds.delete(e)}constructor(e){super(e,{}),this.queue=[],this.throttledCommit=m.P(this.commit.bind(this),3e4,{leading:!1}),this.activePid=null,this.activeFolderId=null,this.activeFolderType="",this.clientOperationIds=new Map,this.streamlitQueue=void 0}}v.STORE_ID="analytics",v.disallowedDatadogEventTypes=["ui_performance","ui_response_success","ui_scroll","ui_impression","ui_visit","ui_error","ui_response_error","ui_keyboard"],v=function(e,t,s,r){var i,o=arguments.length,n=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(n=(o<3?i(n):o>3?i(t,s,n):i(t,s))||n);return o>3&&n&&Object.defineProperty(t,s,n),n}([(0,c.ri)(),(r=(0,c.f3)(w.P),function(e,t){r(e,t,0)})],v)},211657:function(e,t,s){s.d(t,{At:()=>l,PW:()=>d,VX:()=>a,cO:()=>n,r:()=>u});var r=s(307134),i=s(467131);let o={};function n(e){try{let t=e.lastIndexOf("/w");return t>0?e.substring(t+2):void 0}catch(e){return}}function a(e,t){let s={id:e,metrics:t};return o[e]=s,s}function l(e,t,s=!0){let n=o[e];return n&&(s?n.metrics={...n.metrics,...t}:n.metrics={...t,...n.metrics},function(e){let t=e.metrics;if(t.worksheetId&&(t.statsEndTime||t.statsPollingEndTime)&&t.postQueryEndTime&&t.gsDurationMs&&t.resultsOnScreenTime){var s,n;let a={worksheetId:t.worksheetId,isMultistatement:t.isMultistatement,folderId:t.folderId,origin:t.origin,requestId:t.requestId,queryId:t.queryId},l=Math.max(t.postQueryEndTime,null!=(s=t.monitorPollingEndTime)?s:0),u=h(t.postQueryStartTime,l),d=h(l,t.resultsOnScreenTime),c=h(t.postQueryStartTime,t.resultsOnScreenTime),m=u&&u-t.gsDurationMs,p=d&&Math.max(d-t.gsDurationMs,d),f=c&&c-t.gsDurationMs,g=performance.timeOrigin+performance.now(),w={startTime:t.startTime,endTime:g,durationMs:h(t.startTime,g),statsStartTime:t.statsStartTime,statsEndTime:t.statsEndTime,statsFeDurationMs:h(t.statsStartTime,t.statsEndTime),statsPollingStartTime:t.statsPollingStartTime,statsPollingEndTime:t.statsPollingEndTime,statsPollingTimes:t.statsPollingTimes,statsBeDurationMs:h(t.statsPollingStartTime,t.statsPollingEndTime),monitorPollingCount:t.monitorPollingCount,monitorPollingLongestDurationMs:t.monitorPollingLongestDurationMs,monitorPollingShortestDurationMs:t.monitorPollingShortestDurationMs,monitorPollingStartTime:t.monitorPollingStartTime,monitorPollingEndTime:t.monitorPollingEndTime,monitorPollingTotalDuration:h(t.monitorPollingStartTime,t.monitorPollingEndTime),postQueryStartTime:t.postQueryStartTime,postQueryEndTime:t.postQueryEndTime,postQueryDuration:t.postQueryDuration,queryEndStatus:t.queryEndStatus,gsDurationMs:t.gsDurationMs,resultsOnScreenTime:t.resultsOnScreenTime,serverOverheadMs:m,clientOverheadMs:p,totalOverheadMs:f},y={...a,...w};i.cM.info("QE","Query Execution",y),r.v.addAction("snowsight-query-execution",y),o[(n=e).id],o[n.id]}}(n)),n}function u(e){return o[e]}function d(e){if(e){for(let[t,s]of Object.entries(o))if(s.metrics.queryId===e)return t}}function h(e,t){if(void 0!==e&&void 0!==t)return t-e}}}]);
//# sourceMappingURL=88230-c745cfa6739ab58b.js.map